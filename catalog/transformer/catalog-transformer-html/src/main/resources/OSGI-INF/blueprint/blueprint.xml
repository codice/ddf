<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either
 * version 3 of the License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public License is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
-->
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
  xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0">

  <bean id="HtmlTransformer"
    class="ddf.catalog.transformer.html.HtmlMetacardTransformer">
    <argument>
      <list>
        <ref component-id="associationAttributes" />
        <ref component-id="contactAttributes" />
        <ref component-id="coreAttributes" />
        <ref component-id="dateTimeAttributes" />
        <ref component-id="locationAttributes" />
        <ref component-id="mediaAttributes" />
        <ref component-id="securityAttributes" />
        <ref component-id="topicAttributes" />
        <ref component-id="validationAttributes" />
        <ref component-id="versionAttributes" />
      </list>
    </argument>
  </bean>

  <service ref="HtmlTransformer"
    interface="ddf.catalog.transform.MetacardTransformer">
    <service-properties>
      <entry key="id" value="html"/>
      <entry key="shortname" value="html"/>
      <entry key="mime-type" value="text/html"/>
    </service-properties>
  </service>

  <bean id="HtmlQueryResponseTransformer"
    class="ddf.catalog.transformer.html.HtmlQueryResponseTransformer">
    <argument>
      <list>
        <ref component-id="associationAttributes" />
        <ref component-id="contactAttributes" />
        <ref component-id="coreAttributes" />
        <ref component-id="dateTimeAttributes" />
        <ref component-id="locationAttributes" />
        <ref component-id="mediaAttributes" />
        <ref component-id="securityAttributes" />
        <ref component-id="topicAttributes" />
        <ref component-id="validationAttributes" />
        <ref component-id="versionAttributes" />
      </list>
    </argument>
  </bean>

  <service ref="HtmlQueryResponseTransformer"
    interface="ddf.catalog.transform.QueryResponseTransformer">
    <service-properties>
      <entry key="id" value="html"/>
      <entry key="shortname" value="html"/>
      <entry key="mime-type" value="text/html"/>
    </service-properties>
  </service>

  <bean id="associationAttributes" class="ddf.catalog.transformer.html.models.HtmlCategoryModel">
    <cm:managed-properties
      persistent-id="ddf.catalog.transformer.html.associationAttributes"
      update-strategy="container-managed"/>

    <property name="title" value="Association"/>
    <property name="attributeList">
      <list value-type="java.lang.String">
        <value>metacard.associations.related</value>
        <value>metacard.associations.derived</value>
        <value>associations.external</value>
      </list>
    </property>
  </bean>

  <bean id="contactAttributes" class="ddf.catalog.transformer.html.models.HtmlCategoryModel">
    <cm:managed-properties
      persistent-id="ddf.catalog.transformer.html.contactAttributes"
      update-strategy="container-managed"/>

    <property name="title" value="Contact"/>
    <property name="attributeList">
      <list value-type="java.lang.String">
        <value>contact.contributor-address</value>
        <value>contact.contributor-email</value>
        <value>contact.contributor-name</value>
        <value>contact.contributor-phone</value>
        <value>contact.creator-address</value>
        <value>contact.creator-email</value>
        <value>contact.creator-name</value>
        <value>contact.creator-phone</value>
        <value>contact.point-of-contact-address</value>
        <value>contact.point-of-contact-email</value>
        <value>contact.point-of-contact-name</value>
        <value>contact.point-of-contact-phone</value>
        <value>contact.publisher-address</value>
        <value>contact.publisher-email</value>
        <value>contact.publisher-name</value>
        <value>contact.publisher-phone</value>
      </list>
    </property>
  </bean>

  <bean id="coreAttributes" class="ddf.catalog.transformer.html.models.HtmlCategoryModel">
    <property name="title" value="Core"/>

    <property name="attributeList">
      <list value-type="java.lang.String">
        <value>checksum</value>
        <value>checksum-algorithm</value>
        <value>created</value>
        <value>description</value>
        <value>expiration</value>
        <value>id</value>
        <value>language</value>
        <value>location</value>
        <!--<value>metadata</value>-->
        <value>modified</value>
        <value>resource.derived-download-url</value>
        <value>resource.derived-uri</value>
        <value>resource-download-url</value>
        <value>resource-size</value>
        <value>resource-uri</value>
        <value>source-id</value>
        <value>thumbnail</value>
        <value>title</value>
        <value>datatype</value>
        <value>metacard.created</value>
        <value>metacard.modified</value>
        <value>metacard.owner</value>
        <value>metacard-tags</value>
      </list>
    </property>
  </bean>

  <bean id="dateTimeAttributes" class="ddf.catalog.transformer.html.models.HtmlCategoryModel">
    <property name="title" value="Date Time"/>

    <property name="attributeList">
      <list value-type="java.lang.String">
        <value>datetime.start</value>
        <value>datetime.name</value>
        <value>datetime.end</value>
      </list>
    </property>
  </bean>

  <bean id="locationAttributes" class="ddf.catalog.transformer.html.models.HtmlCategoryModel">
    <property name="title" value="Location"/>

    <property name="attributeList">
      <list value-type="java.lang.String">
        <value>location.altitude-meters</value>
        <value>location.country-code</value>
        <value>location.crs-code</value>
        <value>location.crs-name</value>
      </list>
    </property>
  </bean>

  <bean id="mediaAttributes" class="ddf.catalog.transformer.html.models.HtmlCategoryModel">
    <property name="title" value="Media"/>

    <property name="attributeList">
      <list value-type="java.lang.String">
        <value>media.format</value>
        <value>media.format-version</value>
        <value>media.bit-rate</value>
        <value>media.bits-per-sample</value>
        <value>media.compression</value>
        <value>media.encoding</value>
        <value>media.frame-center</value>
        <value>media.frame-rate</value>
        <value>media.height-pixels</value>
        <value>media.number-of-bands</value>
        <value>media.scanning-mode</value>
        <value>media.type</value>
        <value>media.width-pixels</value>
        <value>media.duration</value>
      </list>
    </property>
  </bean>

  <bean id="securityAttributes" class="ddf.catalog.transformer.html.models.HtmlCategoryModel">
    <property name="title" value="Security"/>

    <property name="attributeList">
      <list value-type="java.lang.String">
        <value>security.access-groups</value>
        <value>security.access-individuals</value>
      </list>
    </property>
  </bean>

  <bean id="topicAttributes" class="ddf.catalog.transformer.html.models.HtmlCategoryModel">
    <property name="title" value="Topic"/>

    <property name="attributeList">
      <list value-type="java.lang.String">
        <value>topic.category</value>
        <value>topic.keyword</value>
        <value>topic.vocabulary</value>
      </list>
    </property>
  </bean>

  <bean id="validationAttributes" class="ddf.catalog.transformer.html.models.HtmlCategoryModel">
    <property name="title" value="Validation"/>

    <property name="attributeList">
      <list value-type="java.lang.String">
        <value>validation-warnings</value>
        <value>validation-errors</value>
        <value>failed-validators-warnings</value>
        <value>failed-validators-errors</value>
      </list>
    </property>
  </bean>

  <bean id="versionAttributes" class="ddf.catalog.transformer.html.models.HtmlCategoryModel">
    <property name="title" value="Version"/>

    <property name="attributeList">
      <list value-type="java.lang.String">
        <value>version.action</value>
        <value>version.edited-by</value>
        <value>version.id</value>
        <value>version.tags</value>
        <value>version.types</value>
        <value>version.type-binary</value>
        <value>version.versioned-by</value>
      </list>
    </property>
  </bean>

</blueprint>
