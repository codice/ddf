<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="Version 2.26.17. Copyright (c) Codice Foundation">
<title>Developing DDF Components: Developer's Guide</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Developing DDF Components: Developer&#8217;s Guide</h1>
<div class="details">
<span id="author" class="author">Version 2.26.17. Copyright (c) Codice Foundation</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_developing_ddf_components">1. Developing DDF Components</a>
<ul class="sectlevel2">
<li><a href="#_developing_complementary_catalog_frameworks">1.1. Developing Complementary Catalog Frameworks</a>
<ul class="sectlevel3">
<li><a href="#_simple_catalog_api_implementations">1.1.1. Simple Catalog API Implementations</a></li>
<li><a href="#_use_of_the_whiteboard_design_pattern">1.1.2. Use of the Whiteboard Design Pattern</a></li>
<li><a href="#_recommendations_for_framework_development">1.1.3. Recommendations for Framework Development</a></li>
<li><a href="#_catalog_framework_reference">1.1.4. Catalog Framework Reference</a>
<ul class="sectlevel4">
<li><a href="#_methods">1.1.4.1. Methods</a>
<ul class="sectlevel5">
<li><a href="#_create_update_and_delete_methods">1.1.4.1.1. Create, Update, and Delete Methods</a></li>
<li><a href="#_query_methods">1.1.4.1.2. Query Methods</a></li>
<li><a href="#_resource_methods">1.1.4.1.3. Resource Methods</a></li>
<li><a href="#_source_methods">1.1.4.1.4. Source Methods</a></li>
<li><a href="#_transform_methods">1.1.4.1.5. Transform Methods</a></li>
</ul>
</li>
<li><a href="#_implementing_catalog_methods">1.1.4.2. Implementing Catalog Methods</a></li>
<li><a href="#_dependency_injection">1.1.4.3. Dependency Injection</a></li>
<li><a href="#_osgi_service_registry">1.1.4.4. OSGi Service Registry</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_developing_metacard_types">1.2. Developing Metacard Types</a>
<ul class="sectlevel3">
<li><a href="#_metacard_type_definition_file">1.2.1. Metacard Type Definition File</a></li>
</ul>
</li>
<li><a href="#_developing_global_attribute_validators">1.3. Developing Global Attribute Validators</a>
<ul class="sectlevel3">
<li><a href="#_global_attribute_validators_file">1.3.1. Global Attribute Validators File</a></li>
</ul>
</li>
<li><a href="#_developing_metacard_validators">1.4. Developing Metacard Validators</a>
<ul class="sectlevel3">
<li><a href="#_metacard_validator_definition">1.4.1. Metacard Validator Definition</a></li>
</ul>
</li>
<li><a href="#_developing_attribute_types">1.5. Developing Attribute Types</a>
<ul class="sectlevel3">
<li><a href="#_attribute_type_definition_file">1.5.1. Attribute Type Definition File</a></li>
</ul>
</li>
<li><a href="#_developing_default_attribute_types">1.6. Developing Default Attribute Types</a>
<ul class="sectlevel3">
<li><a href="#_default_attribute_values">1.6.1. Default Attribute Values</a></li>
</ul>
</li>
<li><a href="#_developing_attribute_injections">1.7. Developing Attribute Injections</a>
<ul class="sectlevel3">
<li><a href="#_attribute_injection_definition">1.7.1. Attribute Injection Definition</a></li>
</ul>
</li>
<li><a href="#_developing_endpoints">1.8. Developing Endpoints</a></li>
<li><a href="#_developing_input_transformers">1.9. Developing Input Transformers</a>
<ul class="sectlevel3">
<li><a href="#saxEventHandlers">1.9.1. Create an XML Input Transformer using SaxEventHandlers</a></li>
<li><a href="#_create_an_input_transformer_using_apache_camel">1.9.2. Create an Input Transformer Using Apache Camel</a>
<ul class="sectlevel4">
<li><a href="#_input_transformer_design_pattern_camel">1.9.2.1. Input Transformer Design Pattern (Camel)</a></li>
</ul>
</li>
<li><a href="#_input_transformer_boot_service_flag">1.9.3. Input Transformer Boot Service Flag</a></li>
</ul>
</li>
<li><a href="#_developing_metacard_transformers">1.10. Developing Metacard Transformers</a>
<ul class="sectlevel3">
<li><a href="#_creating_a_new_metacard_transformer">1.10.1. Creating a New Metacard Transformer</a></li>
</ul>
</li>
<li><a href="#_developing_query_response_transformers">1.11. Developing Query Response Transformers</a></li>
<li><a href="#_developing_sources">1.12. Developing Sources</a>
<ul class="sectlevel3">
<li><a href="#_implement_a_source_interface">1.12.1. Implement a Source Interface</a>
<ul class="sectlevel4">
<li><a href="#_developing_catalog_providers">1.12.1.1. Developing Catalog Providers</a></li>
<li><a href="#_developing_federated_sources">1.12.1.2. Developing Federated Sources</a></li>
<li><a href="#_developing_connected_sources">1.12.1.3. Developing Connected Sources</a></li>
<li><a href="#_exception_handling">1.12.1.4. Exception Handling</a>
<ul class="sectlevel5">
<li><a href="#_exception_examples">1.12.1.4.1. Exception Examples</a></li>
<li><a href="#_external_resources_for_developing_sources">1.12.1.4.2. External Resources for Developing Sources</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_developing_catalog_plugins">1.13. Developing Catalog Plugins</a>
<ul class="sectlevel3">
<li><a href="#_implementing_catalog_plugins">1.13.1. Implementing Catalog Plugins</a>
<ul class="sectlevel4">
<li><a href="#_catalog_plugin_failure_behavior">1.13.1.1. Catalog Plugin Failure Behavior</a></li>
<li><a href="#_implementing_pre_ingest_plugins">1.13.1.2. Implementing Pre-Ingest Plugins</a></li>
<li><a href="#_implementing_post_ingest_plugins">1.13.1.3. Implementing Post-Ingest Plugins</a></li>
<li><a href="#_implementing_pre_query_plugins">1.13.1.4. Implementing Pre-Query Plugins</a></li>
<li><a href="#_implementing_post_query_plugins">1.13.1.5. Implementing Post-Query Plugins</a></li>
<li><a href="#_implementing_pre_delivery_plugins">1.13.1.6. Implementing Pre-Delivery Plugins</a></li>
<li><a href="#_implementing_pre_subscription_plugins">1.13.1.7. Implementing Pre-Subscription Plugins</a></li>
<li><a href="#_implementing_pre_resource_plugins">1.13.1.8. Implementing Pre-Resource Plugins</a></li>
<li><a href="#_implementing_post_resource_plugins">1.13.1.9. Implementing Post-Resource Plugins</a></li>
<li><a href="#_implementing_policy_plugins">1.13.1.10. Implementing Policy Plugins</a></li>
<li><a href="#_implementing_access_plugins">1.13.1.11. Implementing Access Plugins</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_developing_token_validators">1.14. Developing Token Validators</a></li>
<li><a href="#_developing_sts_claims_handlers">1.15. Developing STS Claims Handlers</a>
<ul class="sectlevel3">
<li><a href="#_example_requests_and_responses_for_saml_assertions">1.15.1. Example Requests and Responses for SAML Assertions</a></li>
<li><a href="#_binarysecuritytoken_cas_saml_security_token_samples">1.15.2. BinarySecurityToken (CAS) SAML Security Token Samples</a></li>
<li><a href="#_usernametoken_bearer_saml_security_token_sample">1.15.3. UsernameToken Bearer SAML Security Token Sample</a></li>
<li><a href="#_x_509_publickey_saml_security_token_sample">1.15.4. X.509 PublicKey SAML Security Token Sample</a></li>
</ul>
</li>
<li><a href="#_developing_registry_clients">1.16. Developing Registry Clients</a></li>
<li><a href="#_developing_resource_readers">1.17. Developing Resource Readers</a>
<ul class="sectlevel3">
<li><a href="#_creating_a_new_resourcereader">1.17.1. Creating a New <code>ResourceReader</code></a>
<ul class="sectlevel4">
<li><a href="#_implementing_the_resourcereader_interface">1.17.1.1. Implementing the <code>ResourceReader</code> Interface</a></li>
<li><a href="#_retrieveresource">1.17.1.2. retrieveResource</a></li>
<li><a href="#_implement_retrieveresource">1.17.1.3. Implement <code>retrieveResource()</code></a></li>
<li><a href="#_getsupportedschemes">1.17.1.4. <code>getSupportedSchemes</code></a></li>
<li><a href="#_export_to_osgi_service_registry">1.17.1.5. Export to OSGi Service Registry</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_developing_resource_writers">1.18. Developing Resource Writers</a>
<ul class="sectlevel3">
<li><a href="#_create_a_new_resourcewriter">1.18.1. Create a New <code>ResourceWriter</code></a></li>
</ul>
</li>
<li><a href="#_developing_filters">1.19. Developing Filters</a>
<ul class="sectlevel3">
<li><a href="#_units_of_measure">1.19.1. Units of Measure</a></li>
<li><a href="#_filter_examples">1.19.2. Filter Examples</a>
<ul class="sectlevel4">
<li><a href="#_contextual_searches">1.19.2.1. Contextual Searches</a>
<ul class="sectlevel5">
<li><a href="#_tree_view_of_creating_filters">1.19.2.1.1. Tree View of Creating Filters </a></li>
<li><a href="#_xml_view_of_creating_filters">1.19.2.1.2. XML View of Creating Filters</a></li>
</ul>
</li>
<li><a href="#_fuzzy_operations">1.19.2.2. Fuzzy Operations</a></li>
</ul>
</li>
<li><a href="#_parsing_filters">1.19.3. Parsing Filters</a>
<ul class="sectlevel4">
<li><a href="#_interpreting_a_filter_to_create_sql">1.19.3.1. Interpreting a Filter to Create SQL</a></li>
<li><a href="#_interpreting_a_filter_to_create_xquery">1.19.3.2. Interpreting a Filter to Create XQuery</a>
<ul class="sectlevel5">
<li><a href="#_filteradapterdelegate_process_for_figure_parsing">1.19.3.2.1. FilterAdapter/Delegate Process for Figure Parsing</a></li>
<li><a href="#_filtervisitor_process_for_figure_parsing">1.19.3.2.2. FilterVisitor Process for Figure Parsing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_filter_profile">1.19.4. Filter Profile</a>
<ul class="sectlevel4">
<li><a href="#_role_of_the_ogc_filter">1.19.4.1. Role of the OGC Filter</a></li>
<li><a href="#_catalog_filter_profile">1.19.4.2. Catalog Filter Profile</a>
<ul class="sectlevel5">
<li><a href="#_comparison_operators">1.19.4.2.1. Comparison Operators</a></li>
<li><a href="#_logical_operators">1.19.4.2.2. Logical Operators</a></li>
<li><a href="#_temporal_operators">1.19.4.2.3. Temporal Operators</a></li>
<li><a href="#_spatial_operators">1.19.4.2.4. Spatial Operators</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_developing_filter_delegates">1.20. Developing Filter Delegates</a>
<ul class="sectlevel3">
<li><a href="#_creating_a_new_filter_delegate">1.20.1. Creating a New Filter Delegate</a>
<ul class="sectlevel4">
<li><a href="#_implementing_the_filter_delegate">1.20.1.1. Implementing the Filter Delegate</a></li>
<li><a href="#_throwing_exceptions">1.20.1.2. Throwing Exceptions</a></li>
<li><a href="#_using_the_filter_adapter">1.20.1.3. Using the Filter Adapter</a></li>
<li><a href="#_filter_support">1.20.1.4. Filter Support</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_developing_action_components">1.21. Developing Action Components</a>
<ul class="sectlevel3">
<li><a href="#_action_component_naming_convention">1.21.1. Action Component Naming Convention</a>
<ul class="sectlevel4">
<li><a href="#_action_component_taxonomy">1.21.1.1. Action Component Taxonomy</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_developing_query_options">1.22. Developing Query Options</a>
<ul class="sectlevel3">
<li><a href="#_evaluating_a_query">1.22.1. Evaluating a query</a></li>
<li><a href="#_commons_ddf_utilities">1.22.2. Commons-DDF Utilities</a>
<ul class="sectlevel4">
<li><a href="#_fuzzyfunction">1.22.2.1. FuzzyFunction</a></li>
<li><a href="#_xpathhelper">1.22.2.2. XPathHelper</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_configuring_managed_service_factory_bundles">1.23. Configuring Managed Service Factory Bundles</a>
<ul class="sectlevel3">
<li><a href="#_file_format">1.23.1. File Format</a></li>
</ul>
</li>
<li><a href="#_developing_xacml_policies">1.24. Developing XACML Policies</a>
<ul class="sectlevel3">
<li><a href="#_xacml_policy_attributes">1.24.1. XACML Policy Attributes</a></li>
<li><a href="#_xacml_policy_subject">1.24.2. XACML Policy Subject</a></li>
<li><a href="#_xacml_policy_resource">1.24.3. XACML Policy Resource</a></li>
<li><a href="#_using_a_xacml_policy">1.24.4. Using a XACML Policy</a></li>
</ul>
</li>
<li><a href="#_assuring_authenticity_of_bundles_and_applications">1.25. Assuring Authenticity of Bundles and Applications</a>
<ul class="sectlevel3">
<li><a href="#_prerequisites">1.25.1. Prerequisites</a></li>
<li><a href="#_signing_a_jarkar">1.25.2. Signing a JAR/KAR</a>
<ul class="sectlevel4">
<li><a href="#_verifying_a_jarkar">1.25.2.1. Verifying a JAR/KAR</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_wfs_services">1.26. WFS Services</a></li>
<li><a href="#_json_definition_files">1.27. JSON Definition Files</a>
<ul class="sectlevel3">
<li><a href="#_definition_file_format">1.27.1. Definition File Format</a></li>
<li><a href="#_deploying_definition_files">1.27.2. Deploying Definition Files</a></li>
</ul>
</li>
<li><a href="#_developing_subscriptions">1.28. Developing Subscriptions</a>
<ul class="sectlevel3">
<li><a href="#_subscription_lifecycle">1.28.1. Subscription Lifecycle</a>
<ul class="sectlevel4">
<li><a href="#_creation">1.28.1.1. Creation</a></li>
<li><a href="#_evaluation">1.28.1.2. Evaluation</a></li>
<li><a href="#_update_evaluation">1.28.1.3. Update Evaluation</a></li>
<li><a href="#_durability">1.28.1.4. Durability</a></li>
</ul>
</li>
<li><a href="#_creating_a_subscription">1.28.2. Creating a Subscription</a>
<ul class="sectlevel4">
<li><a href="#_event_processing_and_notification">1.28.2.1. Event Processing and Notification</a>
<ul class="sectlevel5">
<li><a href="#_using_ddf_implementation">1.28.2.1.1. Using DDF Implementation</a></li>
</ul>
</li>
<li><a href="#_delivery_method">1.28.2.2. Delivery Method</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_contributing_to_documentation">1.29. Contributing to Documentation</a>
<ul class="sectlevel3">
<li><a href="#_editing_existing_documentation">1.29.1. Editing Existing Documentation</a></li>
<li><a href="#_adding_new_documentation_content">1.29.2. Adding New Documentation Content</a></li>
<li><a href="#_creating_a_new_documentation_template">1.29.3. Creating a New Documentation Template</a></li>
<li><a href="#_extending_documentation_in_downstream_distributions">1.29.4. Extending Documentation in Downstream Distributions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_development_guidelines">2. Development Guidelines</a>
<ul class="sectlevel2">
<li><a href="#_contributing">2.1. Contributing</a></li>
<li><a href="#_osgi_basics">2.2. OSGi Basics</a>
<ul class="sectlevel3">
<li><a href="#_packaging_capabilities_as_bundles">2.2.1. Packaging Capabilities as Bundles</a>
<ul class="sectlevel4">
<li><a href="#_creating_a_bundle">2.2.1.1. Creating a Bundle</a>
<ul class="sectlevel5">
<li><a href="#_bundle_development_recommendations">2.2.1.1.1. Bundle Development Recommendations</a></li>
<li><a href="#_maven_bundle_plugin">2.2.1.1.2. Maven Bundle Plugin</a></li>
</ul>
</li>
<li><a href="#_third_party_and_utility_bundles">2.2.1.2. Third Party and Utility Bundles</a></li>
<li><a href="#_deploying_a_bundle">2.2.1.3. Deploying a Bundle</a></li>
<li><a href="#_verifying_bundle_state">2.2.1.4. Verifying Bundle State</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_high_availability_guidance">2.3. High Availability Guidance</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_developing_ddf_components"><a class="anchor" href="#_developing_ddf_components"></a><a class="link" href="#_developing_ddf_components">1. Developing DDF Components</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create custom implementations of DDF components.</p>
</div>
<div class="sect2">
<h3 id="_developing_complementary_catalog_frameworks"><a class="anchor" href="#_developing_complementary_catalog_frameworks"></a><a class="link" href="#_developing_complementary_catalog_frameworks">1.1. Developing Complementary Catalog Frameworks</a></h3>
<div class="paragraph">
<p>DDF and the underlying OSGi technology can serve as a robust infrastructure for developing frameworks that complement the Catalog.</p>
</div>
<div class="sect3">
<h4 id="_simple_catalog_api_implementations"><a class="anchor" href="#_simple_catalog_api_implementations"></a><a class="link" href="#_simple_catalog_api_implementations">1.1.1. Simple Catalog API Implementations</a></h4>
<div class="paragraph">
<p>The Catalog API implementations, which are denoted with the suffix of <code>Impl</code> on the Java file names, have multiple purposes and uses:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, they provide a good starting point for other developers to extend functionality in the framework. For instance, extending the <code>MetacardImpl</code> allows developers to focus less on the inner workings of DDF and more on the developer&#8217;s intended purposes and objectives. </p>
</li>
<li>
<p>Second, the Catalog API Implementations display the proper usage of an interface and an interface&#8217;s intentions. Also, they are good code examples for future implementations. If a developer does not want to extend the simple implementations, the developer can at least have a working code reference on which to base future development.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_use_of_the_whiteboard_design_pattern"><a class="anchor" href="#_use_of_the_whiteboard_design_pattern"></a><a class="link" href="#_use_of_the_whiteboard_design_pattern">1.1.2. Use of the Whiteboard Design Pattern</a></h4>
<div class="paragraph">
<p>The Catalog makes extensive use of the Whiteboard Design Pattern.
Catalog Components are registered as services in the OSGi Service Registry, and the Catalog Framework or any other clients tracking the OSGi Service Registry are automatically notified by the OSGi Framework of additions and removals of relevant services.</p>
</div>
<div class="paragraph">
<p>The Whiteboard Design Pattern is a common OSGi technique that is derived from a technical whitepaper provided by the OSGi Alliance in 2004.
It is recommended to use the Whiteboard pattern over the Listener pattern in OSGi because it provides less complexity in code (both on the client and server sides), fewer deadlock possibilities than the Listener pattern, and closely models the intended usage of the OSGi framework.</p>
</div>
</div>
<div class="sect3">
<h4 id="_recommendations_for_framework_development"><a class="anchor" href="#_recommendations_for_framework_development"></a><a class="link" href="#_recommendations_for_framework_development">1.1.3. Recommendations for Framework Development</a></h4>
<div class="ulist">
<ul>
<li>
<p>Provide extensibility similar to that of the Catalog.</p>
<div class="ulist">
<ul>
<li>
<p>Provide a stable API with interfaces and simple implementations (refer to <code><a href="http://www.ibm.com/developerworks/websphere/techjournal/1007_charters/1007_charters.html" class="bare">http://www.ibm.com/developerworks/websphere/techjournal/1007_charters/1007_charters.html</a></code>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Make use of the Catalog wherever possible to store, search, and transform information.</p>
</li>
<li>
<p>Utilize OSGi standards wherever possible.</p>
<div class="ulist">
<ul>
<li>
<p>ConfigurationAdmin</p>
</li>
<li>
<p>MetaType</p>
</li>
</ul>
</div>
</li>
<li>
<p>Utilize the sub-frameworks available in DDF.</p>
<div class="ulist">
<ul>
<li>
<p>Karaf</p>
</li>
<li>
<p>CXF</p>
</li>
<li>
<p>PAX Web and Jetty</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_catalog_framework_reference"><a class="anchor" href="#_catalog_framework_reference"></a><a class="link" href="#_catalog_framework_reference">1.1.4. Catalog Framework Reference</a></h4>
<div class="paragraph">
<p>The Catalog Framework can be requested from the OSGi Service Registry.</p>
</div>
<div class="listingblock">
<div class="title">Blueprint Service Reference</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;reference</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">catalogFramework</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DDF.catalog.CatalogFramework</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_methods"><a class="anchor" href="#_methods"></a><a class="link" href="#_methods">1.1.4.1. Methods</a></h5>
<div class="paragraph">
<p>The <code>CatalogFramework</code> provides convenient methods to transform <code>Metacards</code> and <code>QueryResponses</code> using a reference to the <code>CatalogFramework</code>.</p>
</div>
<div class="sect5">
<h6 id="_create_update_and_delete_methods"><a class="anchor" href="#_create_update_and_delete_methods"></a><a class="link" href="#_create_update_and_delete_methods">1.1.4.1.1. Create, Update, and Delete Methods</a></h6>
<div class="paragraph">
<p>Create, Update, and Delete (CUD) methods add, change, or remove stored metadata in the local Catalog Provider.</p>
</div>
<div class="listingblock">
<div class="title">Example Create, Update, Delete Methods</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="directive">public</span> CreateResponse create(CreateRequest createRequest) <span class="directive">throws</span> IngestException, SourceUnavailableException;
<span class="directive">public</span> UpdateResponse update(UpdateRequest updateRequest) <span class="directive">throws</span> IngestException, SourceUnavailableException;
<span class="directive">public</span> DeleteResponse delete(DeleteRequest deleteRequest) <span class="directive">throws</span> IngestException, SourceUnavailableException;</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>CUD operations process <code>PolicyPlugin</code>, <code>AccessPlugin</code>, and <code>PreIngestPlugin</code> instances before execution and <code>PostIngestPlugin</code> instances after execution.</p>
</div>
</div>
<div class="sect5">
<h6 id="_query_methods"><a class="anchor" href="#_query_methods"></a><a class="link" href="#_query_methods">1.1.4.1.2. Query Methods</a></h6>
<div class="paragraph">
<p>Query methods search metadata from available Sources based on the <code>QueryRequest</code> properties and Federation Strategy.
Sources could include Catalog Provider, Connected Sources, and Federated Sources.</p>
</div>
<div class="listingblock">
<div class="title">Example Query Methods</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre><span class="directive">public</span> QueryResponse query(QueryRequest query) <span class="directive">throws</span> UnsupportedQueryException,SourceUnavailableException, FederationException;
<span class="directive">public</span> QueryResponse query(QueryRequest queryRequest, FederationStrategy strategy) <span class="directive">throws</span> SourceUnavailableException, UnsupportedQueryException, FederationException;</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Query requests process  <code>PolicyPlugin</code>, <code>AccessPlugin</code>, and <code>PreQueryPlugin</code> instances before execution and  <code>PolicyPlugin</code>, <code>AccessPlugin</code>, and <code>PostQueryPlugin</code> instances after execution.</p>
</div>
</div>
<div class="sect5">
<h6 id="_resource_methods"><a class="anchor" href="#_resource_methods"></a><a class="link" href="#_resource_methods">1.1.4.1.3. Resource Methods</a></h6>
<div class="paragraph">
<p>Resource methods retrieve data resources from Sources.</p>
</div>
<div class="listingblock">
<div class="title">Example Resource Methods</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="directive">public</span> ResourceResponse getEnterpriseResource(ResourceRequest request) throwsIOException, ResourceNotFoundException, ResourceNotSupportedException;
<span class="directive">public</span> ResourceResponse getLocalResource(ResourceRequest request) <span class="directive">throws</span> <span class="exception">IOException</span>, ResourceNotFoundException, ResourceNotSupportedException;
<span class="directive">public</span> ResourceResponse getResource(ResourceRequest request, <span class="predefined-type">String</span> resourceSiteName) <span class="directive">throws</span> <span class="exception">IOException</span>, ResourceNotFoundException, ResourceNotSupportedException;</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Resource requests process <code>PreResourcePlugin</code>s before execution and <code>PostResourcePlugin</code>s after execution.</p>
</div>
</div>
<div class="sect5">
<h6 id="_source_methods"><a class="anchor" href="#_source_methods"></a><a class="link" href="#_source_methods">1.1.4.1.4. Source Methods</a></h6>
<div class="paragraph">
<p>Source methods can get a list of Source identifiers or request descriptions about Sources.</p>
</div>
<div class="listingblock">
<div class="title">Example Source Methods</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre><span class="directive">public</span> <span class="predefined-type">Set</span>&lt;<span class="predefined-type">String</span>&gt; getSourceIds();
<span class="directive">public</span> SourceInfoResponse getSourceInfo(SourceInfoRequest sourceInfoRequest) <span class="directive">throws</span> SourceUnavailableException;</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_transform_methods"><a class="anchor" href="#_transform_methods"></a><a class="link" href="#_transform_methods">1.1.4.1.5. Transform Methods</a></h6>
<div class="paragraph">
<p>Transform methods provide convenience methods for using Metacard Transformers and Query Response Transformers.</p>
</div>
<div class="listingblock">
<div class="title">Transform Methods</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="comment">// Metacard Transformer</span>
<span class="directive">public</span> BinaryContent transform(Metacard metacard, <span class="predefined-type">String</span> transformerId, <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>,<span class="predefined-type">Serializable</span>&gt; requestProperties) <span class="directive">throws</span> CatalogTransformerException;

<span class="comment">// Query Response Transformer</span>
<span class="directive">public</span> BinaryContent transform(SourceResponse response, <span class="predefined-type">String</span> transformerId, <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Serializable</span>&gt; requestProperties) <span class="directive">throws</span> CatalogTransformerException;</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_implementing_catalog_methods"><a class="anchor" href="#_implementing_catalog_methods"></a><a class="link" href="#_implementing_catalog_methods">1.1.4.2. Implementing Catalog Methods</a></h5>
<div class="listingblock">
<div class="title">Query Response Transform Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td>
  <td class="code"><pre><span class="comment">// inject CatalogFramework instance or retrieve an instance</span>
<span class="directive">private</span> CatalogFramework catalogFramework;

<span class="directive">public</span> RSSEndpoint(CatalogFramework catalogFramework)
{
     <span class="local-variable">this</span>.catalogFramework = catalogFramework ;
     <span class="comment">// implementation</span>
}

 <span class="comment">// Other implementation details ...</span>

<span class="directive">private</span> <span class="type">void</span> convert(QueryResponse queryResponse ) {
    <span class="comment">// ...</span>
    <span class="predefined-type">String</span> transformerId = <span class="string"><span class="delimiter">&quot;</span><span class="content">rss</span><span class="delimiter">&quot;</span></span>;

    BinaryContent content = catalogFramework.transform(queryResponse, transformerId, <span class="predefined-constant">null</span>);

    <span class="comment">// ...</span>

}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_dependency_injection"><a class="anchor" href="#_dependency_injection"></a><a class="link" href="#_dependency_injection">1.1.4.3. Dependency Injection</a></h5>
<div class="paragraph">
<p>Using Blueprint or another injection framework, transformers can be injected from the OSGi Service Registry.</p>
</div>
<div class="listingblock">
<div class="title">Blueprint Service Reference</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;reference</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[[Reference Id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DDF.catalog.transform.[[Transformer Interface Name]]</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">filter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">(shortname=[[Transformer Identifier]])</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each transformer has one or more <code>transform</code> methods that can be used to get the desired output.</p>
</div>
<div class="listingblock">
<div class="title">Input Transformer Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>DDF.catalog.transform.InputTransformer inputTransformer = retrieveInjectedInstance() ;

Metacard entry = inputTransformer.transform(messageInputStream);</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Metacard Transformer Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>DDF.catalog.transform.MetacardTransformer metacardTransformer = retrieveInjectedInstance() ;

BinaryContent content = metacardTransformer.transform(metacard, arguments);</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query Response Transformer Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>DDF.catalog.transform.QueryResponseTransformer queryResponseTransformer = retrieveInjectedInstance() ;

BinaryContent content = queryResponseTransformer.transform(sourceSesponse, arguments);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_osgi_service_registry"><a class="anchor" href="#_osgi_service_registry"></a><a class="link" href="#_osgi_service_registry">1.1.4.4. OSGi Service Registry</a></h5>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>In the vast majority of cases, working with the OSGi Service Reference directly should be avoided.
Instead, dependencies should be injected via a dependency injection framework like Blueprint.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Transformers are registered with the OSGi Service Registry.
Using a <code>BundleContext</code> and a filter, references to a registered service can be retrieved.</p>
</div>
<div class="listingblock">
<div class="title">OSGi Service Registry Reference Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>ServiceReference<span class="type">[]</span> refs =
    bundleContext.getServiceReferences(DDF.catalog.transform.InputTransformer.class.getName(),<span class="string"><span class="delimiter">&quot;</span><span class="content">(shortname=</span><span class="delimiter">&quot;</span></span> + transformerId + <span class="string"><span class="delimiter">&quot;</span><span class="content">)</span><span class="delimiter">&quot;</span></span>);
InputTransformer inputTransformer = (InputTransformer) context.getService(refs[<span class="integer">0</span>]);
Metacard entry = inputTransformer.transform(messageInputStream);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_metacard_types"><a class="anchor" href="#_developing_metacard_types"></a><a class="link" href="#_developing_metacard_types">1.2. Developing Metacard Types</a></h3>
<div class="paragraph">
<p>Create custom Metacard types with Metacard Type definition files.</p>
</div>
<div class="sect3">
<h4 id="_metacard_type_definition_file"><a class="anchor" href="#_metacard_type_definition_file"></a><a class="link" href="#_metacard_type_definition_file">1.2.1. Metacard Type Definition File</a></h4>
<div class="paragraph">
<p>To define Metacard Types, the definition file must have a <code>metacardTypes</code> key in the root object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardTypes</span><span class="delimiter">&quot;</span></span>: [...]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>metacardTypes</code> must be an array of Metacard Type Objects, which are composed of the <code>type</code> (required), <code>extendsTypes</code> (optional), and <code>attributes</code> (optional) keys.</p>
</div>
<div class="listingblock">
<div class="title">Sample Top Level metacardTypes Definition</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardTypes</span><span class="delimiter">&quot;</span></span>: [
        {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">my-metacard-type</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">extendsTypes</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">core</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">security</span><span class="delimiter">&quot;</span></span>],
            <span class="key"><span class="delimiter">&quot;</span><span class="content">attributes</span><span class="delimiter">&quot;</span></span>: {<span class="error">.</span><span class="error">.</span><span class="error">.</span>}
        }
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of the <code>type</code> key is the name of the metacard type being defined. <strong>This field is required.</strong></p>
</div>
<div class="paragraph">
<p>The value of the <code>extendsTypes</code> key is an array of metacard type names (strings) whose attributes you wish to include in your type. Valid Metacard Types already defined in the system or any Metacard Types already defined in this file will work. Please note this section is evaluated from top to bottom so order any types used in other definitions above where they are used in the <code>extendsTypes</code> of other definitions. This key and value may be completely omitted to not extend any types.</p>
</div>
<div class="paragraph">
<p>The value of the <code>attributes</code> key is a map where each key is the name of an attribute type to include in this metacard type and each value is a map with a single key named <code>required</code> and a boolean value. Required attributes are used for metacard validation - metacards that lack required attributes will be flagged with validation errors. <code>attributes</code> may be completely omitted. <code>required</code> may be omitted.</p>
</div>
<div class="listingblock">
<div class="title">Sample Complete metacardTypes Definition</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardTypes</span><span class="delimiter">&quot;</span></span>: [
        {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">my-metacard-type</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">attributes</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">resolution</span><span class="delimiter">&quot;</span></span>: {
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
                },
                <span class="key"><span class="delimiter">&quot;</span><span class="content">target-areas</span><span class="delimiter">&quot;</span></span>: {
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
                },
                <span class="key"><span class="delimiter">&quot;</span><span class="content">expiration</span><span class="delimiter">&quot;</span></span>: {},
                <span class="key"><span class="delimiter">&quot;</span><span class="content">point-of-contact</span><span class="delimiter">&quot;</span></span>: {
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
                }
            }
        }
    ]
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The DDF basic metacard attribute types are added to custom metacard types by default. If any attribute types are required by a metacard type, just include them in the <code>attributes</code> map and set <code>required</code> to <code>true</code>, as shown in the above example with <code>point-of-contact</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Multiple Metacard Types in a Single File</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardTypes</span><span class="delimiter">&quot;</span></span>: [
        {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">my-metacard-type</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">attributes</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">resolution</span><span class="delimiter">&quot;</span></span>: {
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
                },
                <span class="key"><span class="delimiter">&quot;</span><span class="content">target-areas</span><span class="delimiter">&quot;</span></span>: {
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
                }
            }
        },
        {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">another-metacard-type</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">attributes</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">effective</span><span class="delimiter">&quot;</span></span>: {
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
                },
                <span class="key"><span class="delimiter">&quot;</span><span class="content">resolution</span><span class="delimiter">&quot;</span></span>: {
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
                }
            }
        }
    ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_global_attribute_validators"><a class="anchor" href="#_developing_global_attribute_validators"></a><a class="link" href="#_developing_global_attribute_validators">1.3. Developing Global Attribute Validators</a></h3>
<div class="sect3">
<h4 id="_global_attribute_validators_file"><a class="anchor" href="#_global_attribute_validators_file"></a><a class="link" href="#_global_attribute_validators_file">1.3.1. Global Attribute Validators File</a></h4>
<div class="paragraph">
<p>To define Validators, the definition file must have a <code>validators</code> key in the root object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">validators</span><span class="delimiter">&quot;</span></span>: {<span class="error">.</span><span class="error">.</span><span class="error">.</span>}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>validators</code> is a map of the attribute name to a list of validators for that attribute.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">validators</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">point-of-contact</span><span class="delimiter">&quot;</span></span>: [<span class="error">.</span><span class="error">.</span><span class="error">.</span>]
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each object in the list of validators is the validator name and list of arguments for that validator.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">validators</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">point-of-contact</span><span class="delimiter">&quot;</span></span>: [
            {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">pattern</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">arguments</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">.*regex.+</span><span class="char">\\</span><span class="content">s</span><span class="delimiter">&quot;</span></span>]
            }
        ]
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>The value of the <code>arguments</code> key must always be an array of strings, even for numeric arguments, e.g. <code>["1", "10"]</code></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>validator</code> key must have a value of one of the following:</p>
</div>
<div class="exampleblock">
<div class="title"> 1. <code>validator</code> Possible Values</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>size</code> (validates the size of Strings, Arrays, Collections, and Maps)</p>
<div class="ulist">
<ul>
<li>
<p><code>arguments</code>: (2) [integer: lower bound (inclusive), integer: upper bound (inclusive)]</p>
<div class="ulist">
<ul>
<li>
<p>lower bound must be greater than or equal to zero and the upper bound must be greater than or equal to the lower bound</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>pattern</code></p>
<div class="ulist">
<ul>
<li>
<p><code>arguments</code>: (1) [regular expression]</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>pastdate</code></p>
<div class="ulist">
<ul>
<li>
<p><code>arguments</code>: (0) [NO ARGUMENTS]</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>futuredate</code></p>
<div class="ulist">
<ul>
<li>
<p><code>arguments</code>: (0) [NO ARGUMENTS]</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>range</code></p>
<div class="ulist">
<ul>
<li>
<p>(2) [number (decimal or integer): inclusive lower bound, number (decimal or integer): inclusive upper bound]</p>
<div class="ulist">
<ul>
<li>
<p>uses a default epsilon of 1E-6 on either side of the range to account for floating point representation inaccuracies</p>
</li>
</ul>
</div>
</li>
<li>
<p>(3) [number (decimal or integer): inclusive lower bound, number (decimal or integer): inclusive upper bound, decimal number: epsilon (the maximum tolerable error on either side of the range)]</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>enumeration</code></p>
<div class="ulist">
<ul>
<li>
<p><code>arguments</code>: (unlimited) [list of strings: each argument is one case-sensitive, valid enumeration value]</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>relationship</code></p>
<div class="ulist">
<ul>
<li>
<p><code>arguments</code>: (4+) [attribute value or null, one of mustHave|cannotHave|canOnlyHave, target attribute name, null or target attribute value(s) as additional arguments]</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>match_any</code></p>
<div class="ulist">
<ul>
<li>
<p><code>validators</code>: (unlimited) [list of previously defined validators: valid if any validator succeeds]</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Example Validator Definition</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">validators</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: [
            {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">size</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">arguments</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">50</span><span class="delimiter">&quot;</span></span>]
            },
            {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">pattern</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">arguments</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="char">\\</span><span class="content">D+</span><span class="delimiter">&quot;</span></span>]
            }
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">created</span><span class="delimiter">&quot;</span></span>: [
            {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">pastdate</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">arguments</span><span class="delimiter">&quot;</span></span>: []
            }
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">expiration</span><span class="delimiter">&quot;</span></span>: [
            {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">futuredate</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">arguments</span><span class="delimiter">&quot;</span></span>: []
            }
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">page-count</span><span class="delimiter">&quot;</span></span>: [
            {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">range</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">arguments</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">500</span><span class="delimiter">&quot;</span></span>]
            }
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">temperature</span><span class="delimiter">&quot;</span></span>: [
            {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">range</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">arguments</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">12.2</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">19.8</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">0.01</span><span class="delimiter">&quot;</span></span>]
            }
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">resolution</span><span class="delimiter">&quot;</span></span>: [
            {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">enumeration</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">arguments</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">1080p</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">1080i</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">720p</span><span class="delimiter">&quot;</span></span>]
            }
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">datatype</span><span class="delimiter">&quot;</span></span>: [
            {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">match_any</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">validators</span><span class="delimiter">&quot;</span></span>: [
                    {
                        <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">range</span><span class="delimiter">&quot;</span></span>,
                        <span class="key"><span class="delimiter">&quot;</span><span class="content">arguments</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">25</span><span class="delimiter">&quot;</span></span>]
                    },
                    {
                        <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">enumeration</span><span class="delimiter">&quot;</span></span>,
                        <span class="key"><span class="delimiter">&quot;</span><span class="content">arguments</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">Collection</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Dataset</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Event</span><span class="delimiter">&quot;</span></span>]
                    }
                ]
            }
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">topic.vocabulary</span><span class="delimiter">&quot;</span></span>: [
             {
                 <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">relationship</span><span class="delimiter">&quot;</span></span>,
                 <span class="key"><span class="delimiter">&quot;</span><span class="content">arguments</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">animal</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">canOnlyHave</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">topic.category</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">cat</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">dog</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">lizard</span><span class="delimiter">&quot;</span></span>]
             }
         ]
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_metacard_validators"><a class="anchor" href="#_developing_metacard_validators"></a><a class="link" href="#_developing_metacard_validators">1.4. Developing Metacard Validators</a></h3>
<div class="sect3">
<h4 id="_metacard_validator_definition"><a class="anchor" href="#_metacard_validator_definition"></a><a class="link" href="#_metacard_validator_definition">1.4.1. Metacard Validator Definition</a></h4>
<div class="paragraph">
<p>Metacard Validator definitions are similar to the Validators definitions. To define Metacard
Validators, your definition file must have a <code>metacardvalidators</code> key in the root object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardvalidators</span><span class="delimiter">&quot;</span></span>: {<span class="error">.</span><span class="error">.</span><span class="error">.</span>}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>metacardvalidators</code> is a list of maps, where each map contains a key that is the name
of the metacard type the corresponding validators will apply to. Its value is a list of maps of the
validator configuration parameters that specify which validators to configure for the given metacard
type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardvalidators</span><span class="delimiter">&quot;</span></span>: [{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">metacard.type</span><span class="delimiter">&quot;</span></span> : [{
            <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">requiredattributes</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>
        }]
      }]
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>The configuration for the metacard validator must always contain a <code>validator</code> key that specifies
the type of validator to create. Additional key/value pairs may be required to configure the
validator.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>validator</code> key must have a value of one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>requiredattributes</code> (checks that metacards of the specified type contain certain attributes)</p>
<div class="ulist">
<ul>
<li>
<p>Must add the key <code>requiredattributes</code> whose value is a list of strings naming the required
attributes</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardvalidators</span><span class="delimiter">&quot;</span></span>: [{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">fallback.common</span><span class="delimiter">&quot;</span></span>: [{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">validator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">requiredattributes</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">requiredattributes</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">attr</span><span class="delimiter">&quot;</span></span>
        ]
    }]
  }]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_attribute_types"><a class="anchor" href="#_developing_attribute_types"></a><a class="link" href="#_developing_attribute_types">1.5. Developing Attribute Types</a></h3>
<div class="paragraph">
<p>Create custom attribute types with Attribute Type definition files.</p>
</div>
<div class="sect3">
<h4 id="_attribute_type_definition_file"><a class="anchor" href="#_attribute_type_definition_file"></a><a class="link" href="#_attribute_type_definition_file">1.5.1. Attribute Type Definition File</a></h4>
<div class="paragraph">
<p>To define Attribute Types, the definition file must have an <code>attributeTypes</code> key in the root object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attributeTypes</span><span class="delimiter">&quot;</span></span>: {<span class="error">.</span><span class="error">.</span><span class="error">.</span>}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>attributeTypes</code> must be a map where each key is the attribute type&#8217;s name and each value is a map that includes the data type and whether the attribute type is stored, indexed, tokenized, or multi-valued.</p>
</div>
<div class="listingblock">
<div class="title">Attribute Types</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attributeTypes</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">temperature</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">DOUBLE_TYPE</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">stored</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">indexed</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenized</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">multivalued</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The attributes <code>stored</code>, <code>indexed</code>, <code>tokenized</code>, and <code>multivalued</code> must be included and must have a boolean value.</p>
</div>
<div class="exampleblock">
<div class="title"> 2. Required Attribute Definitions</div>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>stored</code></dt>
<dd>
<p>If true, the value of the attribute should be stored in the underlying datastore. Some attributes may only be indexed or used in transit and do not need to be persisted.</p>
</dd>
<dt class="hdlist1"><code>indexed</code></dt>
<dd>
<p>If true, then the value of the attribute should be included in the datastore&#8217;s index and therefore be part of query evaluation.</p>
</dd>
<dt class="hdlist1"><code>tokenized</code></dt>
<dd>
<p>Only applicable to STRING_TYPE attributes, if true then stopwords and punctuation will be stripped prior to storing and/or indexing. If false, only an exact string will match.</p>
</dd>
<dt class="hdlist1"><code>multi-valued</code></dt>
<dd>
<p>If true, then the attribute values will be Lists of the attribute type rather than single values.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>type</code> attribute must also be included and must have one of the allowed values:</p>
</div>
<div class="exampleblock">
<div class="title"> 3. <code>type</code> Attribute Possible Values</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>DATE_TYPE</code></p>
</li>
<li>
<p><code>STRING_TYPE</code></p>
</li>
<li>
<p><code>XML_TYPE</code></p>
</li>
<li>
<p><code>LONG_TYPE</code></p>
</li>
<li>
<p><code>BINARY_TYPE</code></p>
</li>
<li>
<p><code>GEO_TYPE</code></p>
</li>
<li>
<p><code>BOOLEAN_TYPE</code></p>
</li>
<li>
<p><code>DOUBLE_TYPE</code></p>
</li>
<li>
<p><code>FLOAT_TYPE</code></p>
</li>
<li>
<p><code>INTEGER_TYPE</code></p>
</li>
<li>
<p><code>OBJECT_TYPE</code></p>
</li>
<li>
<p><code>SHORT_TYPE</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>An example with multiple attributes defined:</p>
</div>
<div class="listingblock">
<div class="title">Multiple Attributes Defined</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attributeTypes</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">resolution</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">STRING_TYPE</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">stored</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">indexed</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenized</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">multivalued</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
        },
        <span class="key"><span class="delimiter">&quot;</span><span class="content">target-areas</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">GEO_TYPE</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">stored</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">indexed</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenized</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">multivalued</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_default_attribute_types"><a class="anchor" href="#_developing_default_attribute_types"></a><a class="link" href="#_developing_default_attribute_types">1.6. Developing Default Attribute Types</a></h3>
<div class="paragraph">
<p>Create custom default attribute types.</p>
</div>
<div class="sect3">
<h4 id="_default_attribute_values"><a class="anchor" href="#_default_attribute_values"></a><a class="link" href="#_default_attribute_values">1.6.1. Default Attribute Values</a></h4>
<div class="paragraph">
<p>To define default attribute values, the definition file must have a <code>defaults</code> key in the root object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">defaults</span><span class="delimiter">&quot;</span></span>: [<span class="error">.</span><span class="error">.</span><span class="error">.</span>]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>defaults</code> is a list of objects where each object contains the keys <code>attribute</code>, <code>value</code>, and optionally <code>metacardTypes</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">defaults</span><span class="delimiter">&quot;</span></span>: [
        {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">attribute</span><span class="delimiter">&quot;</span></span>: <span class="error">.</span><span class="error">.</span><span class="error">.</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="error">.</span><span class="error">.</span><span class="error">.</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardTypes</span><span class="delimiter">&quot;</span></span>: [<span class="error">.</span><span class="error">.</span><span class="error">.</span>]
        }
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value corresponding to the <code>attribute</code> key is the name of the attribute to which the default value will be applied. The value corresponding to the <code>value</code> key is the default value of the attribute.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The attribute&#8217;s default value must be of the same type as the attribute, but it has to be written as a string (i.e., enclosed in quotation marks) in the JSON file.</p>
</div>
<div class="paragraph">
<p>Dates must be UTC datetimes in the ISO 8601 format, i.e., <code>yyyy-MM-ddTHH:mm:ssZ</code></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>metacardTypes</code> key is optional. If it is left out, then the default attribute value will be applied to every metacard that has that attribute. It can be thought of as a 'global' default value. If the <code>metacardTypes</code> key is included, then its value must be a list of strings where each string is the name of a metacard type. In this case, the default attribute value will be applied only to metacards that match one of the types given in the list.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>In the event that an attribute has a 'global' default value as well as a default value for a specific metacard type, the default value for the specific metacard type will be applied (i.e., the more specific default value wins).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">defaults</span><span class="delimiter">&quot;</span></span>: [
        {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">attribute</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Default Title</span><span class="delimiter">&quot;</span></span>
        },
        {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">attribute</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Default video description</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardTypes</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">video</span><span class="delimiter">&quot;</span></span>]
        },
        {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">attribute</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">expiration</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2020-05-06T12:00:00Z</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardTypes</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">video</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">nitf</span><span class="delimiter">&quot;</span></span>]
        },
        {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">attribute</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">frame-rate</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span>
        }
    ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_attribute_injections"><a class="anchor" href="#_developing_attribute_injections"></a><a class="link" href="#_developing_attribute_injections">1.7. Developing Attribute Injections</a></h3>
<div class="paragraph">
<p>Attribute injections are defined attributes that will be injected into all metacard types or into specific metacard types. This capability allows metacard types to be extended with new attributes.</p>
</div>
<div class="sect3">
<h4 id="_attribute_injection_definition"><a class="anchor" href="#_attribute_injection_definition"></a><a class="link" href="#_attribute_injection_definition">1.7.1. Attribute Injection Definition</a></h4>
<div class="paragraph">
<p>To define attribute injections, create a JSON file in the <code>&lt;DDF_HOME&gt;/etc/definitions</code> directory. The definition file must have an <code>inject</code> key in the root object.</p>
</div>
<div class="listingblock">
<div class="title">Inject Key</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">inject</span><span class="delimiter">&quot;</span></span>: [<span class="error">.</span><span class="error">.</span><span class="error">.</span>]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>inject</code> is simply a list of objects where each object contains the key <code>attribute</code> and optionally <code>metacardTypes</code>.</p>
</div>
<div class="listingblock">
<div class="title">Inject Values</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">inject</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">attribute</span><span class="delimiter">&quot;</span></span>: <span class="error">.</span><span class="error">.</span><span class="error">.</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardTypes</span><span class="delimiter">&quot;</span></span>: [<span class="error">.</span><span class="error">.</span><span class="error">.</span>]
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value corresponding to the <code>attribute</code> key is the name of the attribute to inject.</p>
</div>
<div class="paragraph">
<p>The <code>metacardTypes</code> key is optional.
If it is left out, then the attribute will be injected into every metacard type.
In that case it can be thought of as a 'global' attribute injection.
If the <code>metacardTypes</code> key is included, then its value must be a list of strings where each string is the name of a metacard type.
In this case, the attribute will be injected only into metacard types that match one of the types given in the list.</p>
</div>
<div class="listingblock">
<div class="title">Global and Specific Inject Values</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">inject</span><span class="delimiter">&quot;</span></span>: [
    <span class="error">/</span><span class="error">/</span> <span class="error">G</span><span class="error">l</span><span class="error">o</span><span class="error">b</span><span class="error">a</span><span class="error">l</span> <span class="error">a</span><span class="error">t</span><span class="error">t</span><span class="error">r</span><span class="error">i</span><span class="error">b</span><span class="error">u</span><span class="error">t</span><span class="error">e</span> <span class="error">i</span><span class="error">n</span><span class="error">j</span><span class="error">e</span><span class="error">c</span><span class="error">t</span><span class="error">i</span><span class="error">o</span><span class="error">n</span>, <span class="error">a</span><span class="error">l</span><span class="error">l</span> <span class="error">m</span><span class="error">e</span><span class="error">t</span><span class="error">a</span><span class="error">c</span><span class="error">a</span><span class="error">r</span><span class="error">d</span><span class="error">s</span>
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">attribute</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">rating</span><span class="delimiter">&quot;</span></span>
    },
    <span class="error">/</span><span class="error">/</span> <span class="error">S</span><span class="error">p</span><span class="error">e</span><span class="error">c</span><span class="error">i</span><span class="error">f</span><span class="error">i</span><span class="error">c</span> <span class="error">a</span><span class="error">t</span><span class="error">t</span><span class="error">r</span><span class="error">i</span><span class="error">b</span><span class="error">u</span><span class="error">t</span><span class="error">e</span> <span class="error">i</span><span class="error">n</span><span class="error">j</span><span class="error">e</span><span class="error">c</span><span class="error">t</span><span class="error">i</span><span class="error">o</span><span class="error">n</span>, <span class="error">o</span><span class="error">n</span><span class="error">l</span><span class="error">y</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">video</span><span class="delimiter">&quot;</span></span> <span class="error">m</span><span class="error">e</span><span class="error">t</span><span class="error">a</span><span class="error">c</span><span class="error">a</span><span class="error">r</span><span class="error">d</span><span class="error">s</span>
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">attribute</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">cloud-cover</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardTypes</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">video</span><span class="delimiter">&quot;</span></span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Attributes must be registered in the attribute registry (see the <code>AttributeRegistry</code> interface) to be injected into metacard types. For example, attributes defined in JSON definition files are placed in the registry, so they can be injected.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Add a second key for <code>attributeTypes</code> to register the new types defined previously. For each attribute injections, specify the name and properties for that attribute.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type: Data type of the possible values for this attribute.</p>
</li>
<li>
<p>indexed: Boolean, attribute is indexed.</p>
</li>
<li>
<p>stored: Boolean, attribute is stored.</p>
</li>
<li>
<p>tokenized:  Boolean, attribute is stored.</p>
</li>
<li>
<p>multivalued: Boolean, attribute can hold multiple values.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Sample Attribute Injection File</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td>
  <td class="code"><pre>{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">inject</span><span class="delimiter">&quot;</span></span>: [
    <span class="error">/</span><span class="error">/</span> <span class="error">G</span><span class="error">l</span><span class="error">o</span><span class="error">b</span><span class="error">a</span><span class="error">l</span> <span class="error">a</span><span class="error">t</span><span class="error">t</span><span class="error">r</span><span class="error">i</span><span class="error">b</span><span class="error">u</span><span class="error">t</span><span class="error">e</span> <span class="error">i</span><span class="error">n</span><span class="error">j</span><span class="error">e</span><span class="error">c</span><span class="error">t</span><span class="error">i</span><span class="error">o</span><span class="error">n</span>, <span class="error">a</span><span class="error">l</span><span class="error">l</span> <span class="error">m</span><span class="error">e</span><span class="error">t</span><span class="error">a</span><span class="error">c</span><span class="error">a</span><span class="error">r</span><span class="error">d</span><span class="error">s</span>
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">attribute</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">rating</span><span class="delimiter">&quot;</span></span>
    },
    <span class="error">/</span><span class="error">/</span> <span class="error">S</span><span class="error">p</span><span class="error">e</span><span class="error">c</span><span class="error">i</span><span class="error">f</span><span class="error">i</span><span class="error">c</span> <span class="error">a</span><span class="error">t</span><span class="error">t</span><span class="error">r</span><span class="error">i</span><span class="error">b</span><span class="error">u</span><span class="error">t</span><span class="error">e</span> <span class="error">i</span><span class="error">n</span><span class="error">j</span><span class="error">e</span><span class="error">c</span><span class="error">t</span><span class="error">i</span><span class="error">o</span><span class="error">n</span>, <span class="error">o</span><span class="error">n</span><span class="error">l</span><span class="error">y</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">video</span><span class="delimiter">&quot;</span></span> <span class="error">m</span><span class="error">e</span><span class="error">t</span><span class="error">a</span><span class="error">c</span><span class="error">a</span><span class="error">r</span><span class="error">d</span><span class="error">s</span>
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">attribute</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">cloud-cover</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">metacardTypes</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">video</span><span class="delimiter">&quot;</span></span>
    }
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">attributeTypes</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">rating</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">STRING_TYPE</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">indexed</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">stored</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenized</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">multivalued</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">cloud-cover</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">STRING_TYPE</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">indexed</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">stored</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenized</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">multivalued</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
    }
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_endpoints"><a class="anchor" href="#_developing_endpoints"></a><a class="link" href="#_developing_endpoints">1.8. Developing Endpoints</a></h3>
<div class="paragraph">
<p>Custom endpoints can be created, if necessary.
See <a href="documentation.html#_endpoint_details">Endpoints</a> for descriptions of provided endpoints.</p>
</div>
<div class="paragraph">
<p>Complete the following procedure to create an endpoint. </p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements the endpoint&#8217;s business logic. Example: Creating a web service that external clients can invoke.</p>
</li>
<li>
<p>Add the endpoint&#8217;s business logic, invoking <code>CatalogFramework</code> calls as needed.  </p>
</li>
<li>
<p>Import the DDF packages to the bundle&#8217;s manifest for run-time (in addition to any other required packages):<br>
<code>Import-Package: ddf.catalog, ddf.catalog.*</code></p>
</li>
<li>
<p>Retrieve an instance of <code>CatalogFramework</code> from the OSGi registry. (Refer to <a href="#_osgi_basics">OSGi Basics - Service Registry</a> for examples.)</p>
</li>
<li>
<p>Deploy the packaged service to DDF.
(Refer to <a href="#_osgi_basics">OSGi Basics - Bundles</a>.)</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>It is recommended to use the maven bundle plugin to create the Endpoint bundle&#8217;s manifest as opposed to directly editing the manifest file.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p><strong>No implementation of an interface is required</strong><br>
Unlike other DDF components that require you to implement a standard interface, no implementation of an interface is required in order to create an endpoint.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Common Endpoint Business Logic</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Methods</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Ingest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add, modify, and remove metadata using the ingest-related <code>CatalogFramework</code> methods: </p>
<p class="tableblock">create, update, and delete. </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Query</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request metadata using the <code>query</code> method.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get available <code>Source</code> information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Resource</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve resources referenced in Metacards from Sources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Transform</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert common Catalog Framework data types to and from other data formats.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_developing_input_transformers"><a class="anchor" href="#_developing_input_transformers"></a><a class="link" href="#_developing_input_transformers">1.9. Developing Input Transformers</a></h3>
<div class="paragraph">
<p>DDF supports the creation of custom <a href="architecture.html#_types_of_transformers">input transformers</a> for use cases not covered by the included implementations.</p>
</div>
<div class="olist arabic">
<div class="title">Creating a custom input Transformer:</div>
<ol class="arabic">
<li>
<p>Create a new Java class that implements ddf.catalog.transform.InputTransformer.<br>
<code>public class SampleInputTransformer implements ddf.catalog.transform.InputTransformer</code></p>
</li>
<li>
<p>Implement the transform methods.<br>
<code>public Metacard transform(InputStream input) throws IOException, CatalogTransformerException</code><br>
<code>public Metacard transform(InputStream input, String id) throws IOException, CatalogTransformerException</code></p>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog,ddf.catalog.transform</code></p>
</li>
<li>
<p>Create an OSGi descriptor file to communicate with the OSGi Service Registry (described in the <a href="#_osgi_basics">OSGi Basics</a> section). Export the service to the OSGi Registry and declare service properties.</p>
<div class="listingblock">
<div class="title">Input Transformer Blueprint Descriptor Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre>...
<span class="tag">&lt;service</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SampleInputTransformer</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ddf.catalog.transform.InputTransformer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;service-properties&gt;</span>
        <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shortname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[[sampletransform]]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[[Sample Input Transformer]]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[[A new transformer for metacard input.]]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/service-properties&gt;</span>
<span class="tag">&lt;/service&gt;</span>
...</pre></td>
</tr></table></code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Input Transformer Variable Descriptions / Blueprint Service Properties</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Description of Value</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>shortname</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Required) An abbreviation for the return-type of the <code>BinaryContent</code> being sent to the user.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>atom</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>title</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) A user-readable title that describes (in greater detail than the shortname) the service.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Atom Entry Transformer Service</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>description</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) A short, human-readable description that describes the functionality of the service and the output.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>This service converts a single metacard xml document to an atom entry element.</em></code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Deploy OSGi Bundle to OSGi runtime.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="saxEventHandlers"><a class="anchor" href="#saxEventHandlers"></a><a class="link" href="#saxEventHandlers">1.9.1. Create an XML Input Transformer using SaxEventHandlers</a></h4>
<div class="paragraph">
<p>For a transformer to transform XML, (as opposed to JSON or a Word document, for example) there is a simpler solution than fully implementing a <code>MetacardValidator</code>.
DDF includes an extensible, configurable <code>XmlInputTransformer</code>.
This transformer can be instantiated via blueprint as a managed service factory and configured via metatype.
The <code>XmlInputTransformer</code> takes a configuration of <code>SaxEventHandlers</code>.
A <code>SaxEventHandler</code> is a class that handles SAX Events (a very fast XML parser) to parse metadata and create metacards.
Any number of <code>SaxEventHandlers</code> can be implemented and included in the <code>XmlInputTransformer</code> configuration.
See the <code>catalog-transformer-streaming-impl</code> bundle for examples (<code>XmlSaxEventHandlerImpl</code> which parses the DDF Metacard XML Metadata and the <code>GmlHandler</code> which parses GML 2.0)
Each <code>SaxEventHandler</code> implementation has a <code>SaxEventHandlerFactory</code> associated with it.
The <code>SaxEventHandlerFactory</code> is responsible for instantiating new <code>SaxEventHandlers</code> - each transform request gets a new instance of <code>XmlInputTransformer</code> and set of <code>SaxEventHandlers</code> to be <em>thread-</em> and <em>state-safe</em>.</p>
</div>
<div class="paragraph">
<p>The following diagrams intend to clarify implementation details:</p>
</div>
<div class="paragraph">
<p>The <code>XmlInputTransformer</code> Configuration diagram shows the <code>XmlInputTransformer</code> configuration, which is configured using the metatype and has the <code>SaxEventHandlerFactory</code> ids.
Then, when a transform request is received, the <code>ManagedServiceFactory</code> instantiates a new <code>XmlInputTransformer</code>.
This <code>XmlInputTransformer</code> then instantiates a new <code>SaxEventHandlerDelegate</code> with the configured <code>SaxEventHandlersFactory</code> ids.
The factories all in turn instantiate a <code>SaxEventHandler</code>.
Then, the <code>SaxEventHandlerDelegate</code> begins parsing the XML input document, handing the SAX Events off to each <code>SaxEventHandler</code>, which handle them if they can.
After parsing is finished, each <code>SaxEventHandler</code> returns a list of <code>Attributes</code> to the <code>SaxEventHandlerDelegate</code> and <code>XmlInputTransformer</code> which add the attributes to the metacard and then return the fully constructed metacard.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmwAAADuCAIAAAALEMyIAAAdUklEQVR42u2df0gdV96HC2KDBdeKrg0SguuSSggSgiASUleygWwMbsgGQYKIlOA//SMkywbKyhLSZUkIWTeEUASxEoKr1tSabGpsWpOKWNsukeBKsK2LWAliU1PXiLHWt++HHN7Zea93zsy9Rh31ef64zJwZZ77nx5xnzsy51xd+AgAAgLh4gSIAAABAogAAAKsk0f8BAACAACBRAAAAJAoAAIBEAQAAkCgAAAASBQAAACQKAACARAEAAJAoAAAAEgUAAECiAAAAgEQBAACQKAAAABIFAABAogAAAEgUiQIAACBRAAAAJAoAAIBEAQAAkCgAAAAgUQAAACQKAACARAEAAJAoAAAAEgUAAAAkCgAAgEQBAACQKAAAABIFAABAokgUAAAAiQIAACBRAACAjSrRTz/99Le//e0rr7zyAgAAQDhITk4uKSm5d+9eqCXa2tqalpZ28uTJ69ev/xMAACAcyEqnTp1KTU29efPmzMzM06dP5+fnFxYWQiTR8fHxzMzM5uZmagsAAEJIW1vbL3/5y6GhocnJySdPnszNzcXn0WWR6FtvvVVcXEwlAQBAaDl8+LCGpKOjo99+++309PQPP/wQFon++te/PnfuHDUEAACh5fz587/61a8GBwdHRkbk0ZmZmR9//DEUEv3FL36hkTI1BAAAoeUf//jHK6+80tvbK49+880333//fRyD0WWRaEJCQnd3NzUEAAChRfp84YUXbt269dlnn3355ZcTExOzs7OhkKjConoAACDkyFbvv//+J598MjAwMDY29uTJEyQKAAAQVKLvvvvuxx9/fO/evZGRkampKSQKAAAQVKLNzc0ffvihloeHhx8/foxEAQAAgkq0qamps7Pziy+++PrrrycnJ5EoAABAUIn+/e9/l0Q///xzSfS7775DogAAADFI9NatW5LoV199hUQBAAA2sET5DwMAGxb6dECiz0GiPwHAxgOJAhJFogCARAGJIlEAQKKARJEoACBRACQKAEgUAIkiUQBAooBEkSgAIFFAoutQoseOHdOh9uzZE5GuFKVra9zXuTvCiNXl7mIWn9qLle8B29ratm7dmpCQsBZvg/r7+8vLyzMyMhITEzdt2pSZmXnkyJFlKpbVqiCvs69uPEgUkGhIJTo3N7dr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" alt="`XMLInputTransformer` Configuration" width="620" height="238">
</div>
<div class="title"><code>XMLInputTransformer</code> Configuration</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmwAAAEmCAIAAABQ3FvlAAAhHklEQVR42u2df0hVef7/By4mBq6JrhMSg+tSEiERgoiYK23QZrgxG4IMIhLhP/NH1LJBrAzRLEsRrRsRgyAmEm06NnesLXNqtBFxnJkPRbiyODMu4oiIs2Pjmpjj+O37xDccDtd7zz33h7ejPh5/XM6P9z3v9/uc9/v1OO9z3lffeAUAAABR8QanAAAAAIkCAAC8Jon+PwAAAHABEgUAAECiAAAASBQAAACJAgAAIFEAAABAogAAAEgUAAAAiQIAACBRAAAAJAoAAABIFAAAAIkCAAAgUQAAACQKAACARJEoAAAAEgUAAECiAAAASBQAAACJAgAAABIFAABAogAAAEgUAAAAiQIAACBRAAAAQKIAAABIFAAAAIkCAAAgUQAAACSKRAEAAJAoAAAAEgUAANisEv38889///vfv/nmm28AAAB4g9TU1IqKiidPnnhaoh0dHRkZGadPn75z587/AQAAeANZ6cyZM+np6ffu3Zufn3/58uXS0tLy8rKHJDo1NZWdnd3W1sbVAgAAD+L3+3/961+PjIzMzMy8ePFicXExOo+uiUTff//98vJyLhIAAHiWt99+W0PS8fHx77//fm5u7qeffvKKRH/7299evHiRKwQAAJ7l0qVLv/nNb4aHh8fGxuTR+fn5n3/+2RMS/dWvfqWRMlcIAAA8yz//+c8333xzYGBAHv3uu+9+/PHHKAajayJRn8/X19fHFQIAAM8ifb7xxhsPHjz44osvvv766+np6YWFBU9IVMXi8gAAgMeRrT7++OPPPvtsaGhoYmLixYsXSBQAAMCtRD/88MNPP/30yZMnY2Njs7OzSBQAAMCtRNva2j755BMtj46OPn/+HIkCAAC4leitW7e6u7u/+uqrb7/9dmZmBokCAAC4leg//vEPSfTLL7+URH/44QckCgAAEIFEHzx4IIl+8803SBQAAGATS5T/MACwaSGmAxKNg0RfAcDmA4kCEkWiAIBEAYkiUQBAooBEkSgAIFEAJAoASBQAiSJRAECigESRKAAgUUCi60yiJ06cULKSkpKA7dqi7dobdR+25x6wutbhY3XWoUh8dPP7/W+99ZbP5+MWB5AoINF1L9HFxcV9+/Yp5YULF6yNly5d0paCgoKlpaX1LlGXuxJGdna2yjAx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" alt="`XMLInputTransformer` `SaxEventHandlerDelegate` Configuration" width="620" height="294">
</div>
<div class="title"><code>XMLInputTransformer</code> <code>SaxEventHandlerDelegate</code> Configuration</div>
</div>
<div class="paragraph">
<p>For more specific details, see the Javadoc for the <code>org.codice.ddf.transformer.xml.streaming.*</code> package.
Additionally, see the source code for the <code>org.codice.ddf.transformer.xml.streaming.impl.GmlHandler.java</code>, <code>org.codice.ddf.transformer.xml.streaming.impl.GmlHandlerFactory</code>, <code>org.codice.ddf.transformer.xml.streaming.impl.XmlInputTransformerImpl</code>, and <code>org.codice.ddf.transformer.xml.streaming.impl.XmlInputTransformerImplFactory</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>XmlInputTransformer</code> &amp; <code>SaxEventHandlerDelegate</code> create and configure themselves based on String matches of the configuration ids with the <code>SaxEventHandlerFactory</code> ids, so ensure these match.</p>
</li>
<li>
<p>The <code>XmlInputTransformer</code> uses a <code>DynamicMetacardType</code>.
This is pertinent because a metacards attributes are only stored in the <code>CatalogProvider</code> if they are declared on the <code>MetacardType</code>.
Since the <code>DynamicMetacardType</code> is constructed dynamically, attributes are declared by the <code>SaxEventHandlerFactory</code> that parses them, as opposed to the <code>MetacardType</code>. See <code>org.codice.ddf.transformer.xml.streaming.impl.XmlSaxEventHandlerFactoryImpl.java</code> vs <code>ddf.catalog.data.impl.BasicTypes.java</code></p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_create_an_input_transformer_using_apache_camel"><a class="anchor" href="#_create_an_input_transformer_using_apache_camel"></a><a class="link" href="#_create_an_input_transformer_using_apache_camel">1.9.2. Create an Input Transformer Using Apache Camel</a></h4>
<div class="paragraph">
<p>Alternatively, make an Apache Camel route in a blueprint file and deploy it using a feature file or via hot deploy.</p>
</div>
<div class="sect4">
<h5 id="_input_transformer_design_pattern_camel"><a class="anchor" href="#_input_transformer_design_pattern_camel"></a><a class="link" href="#_input_transformer_design_pattern_camel">1.9.2.1. Input Transformer Design Pattern (Camel)</a></h5>
<div class="paragraph">
<p>Follow this design pattern for compatibility:</p>
</div>
<div class="paragraph">
<div class="title">From</div>
<p>When using <strong>from</strong>, <code>catalog:inputtransformer?id=text/xml</code>, an Input Transformer will be created and registered in the OSGi registry with an id of <code>text/xml</code>.</p>
</div>
<div class="paragraph">
<div class="title">To</div>
<p>When using <strong>to</strong>, <code>catalog:inputtransformer?id=text/xml</code>, an Input Transformer with an id matching text/xml will be discovered from the OSGi registry and invoked.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. InputTransformer Message Formats</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 33.3333%;">
<col style="width: 16.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exchange Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Type</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request (comes from <code>&lt;from&gt;</code> in the route)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">body</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.io.InputStream</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response (returned after called via <code>&lt;to&gt;</code> in the route)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">body</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.data.Metacard</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Its always a good idea to wrap the <code>mimeType</code> value with the RAW parameter as shown in the example above.
This will ensure that the value is taken exactly as is, and is especially useful when you are using special characters.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">InputTransformer Creation Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre><span class="tag">&lt;blueprint</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.osgi.org/xmlns/blueprint/v1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;camelContext</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://camel.apache.org/schema/blueprint</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;route&gt;</span>
            <span class="tag">&lt;from</span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">catalog:inputtransformer?mimeType=RAW(id=text/xml;id=vehicle)</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;to</span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xslt:vehicle.xslt</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span> <span class="comment">&lt;!-- must be on classpath for this bundle --&gt;</span>
            <span class="tag">&lt;to</span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">catalog:inputtransformer?mimeType=RAW(id=application/json;id=geojson)</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;/route&gt;</span>
    <span class="tag">&lt;/camelContext&gt;</span>
<span class="tag">&lt;/blueprint&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="olist arabic">
<div class="title">InputTransformer Creation Details</div>
<ol class="arabic">
<li>
<p>Defines this as an Apache Aries blueprint file.</p>
</li>
<li>
<p>Defines the Apache Camel context that contains the route.</p>
</li>
<li>
<p>Defines start of an Apache Camel route.</p>
</li>
<li>
<p>Defines the endpoint/consumer for the route. In this case it is the DDF custom catalog component that is an <code>InputTransformer</code> registered with an id of <code>text/xml;id=vehicle</code> meaning it can transform an <code>InputStream</code> of vehicle data into a metacard. <strong>Note that the specified XSL stylesheet must be on the classpath of the bundle that this blueprint file is packaged in.</strong></p>
</li>
<li>
<p>Defines the XSLT to be used to transform the vehicle input into GeoJSON format using the Apache Camel provided XSLT component.</p>
</li>
<li>
<p>Defines the route node that accepts GeoJSON formatted input and transforms it into a Mmtacard, using the DDF custom catalog component that is an InputTransformer registered with an id of application/json;id=geojson.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>An example of using an Apache Camel route to define an <code>InputTransformer</code> in a blueprint file and deploying it as a bundle to an OSGi container can be found in the DDF SDK examples at <code>DDF/sdk/sample-transformers/xslt-identity-input-transformer</code></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_input_transformer_boot_service_flag"><a class="anchor" href="#_input_transformer_boot_service_flag"></a><a class="link" href="#_input_transformer_boot_service_flag">1.9.3. Input Transformer Boot Service Flag</a></h4>
<div class="paragraph">
<p>The <code>org.codice.ddf.platform.bootflag.BootServiceFlag</code> service with a service property of <code>id=inputTransformerBootFlag</code> is used to indicate certain Input Transformers are ready in the system.
Adding an Input Transformers ID to a new or existing JSON file under <code>&lt;DDF_HOME&gt;/etc/transformers</code> will cause the service to wait for an Input Transformer with the given ID.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_metacard_transformers"><a class="anchor" href="#_developing_metacard_transformers"></a><a class="link" href="#_developing_metacard_transformers">1.10. Developing Metacard Transformers</a></h3>
<div class="paragraph">
<p>In general, a <code>MetacardTransformer</code> is used to transform a <code>Metacard</code> into some desired format useful to the end user or as input to another process.
Programmatically, a <code>MetacardTransformer</code> transforms a <code>Metacard</code> into a <code>BinaryContent</code> instance, which translates the <code>Metacard</code> into the desired final format.
Metacard transformers can be used through the Catalog Framework <code>transform</code> convenience method or requested from the OSGi Service Registry by endpoints or other bundles.</p>
</div>
<div class="sect3">
<h4 id="_creating_a_new_metacard_transformer"><a class="anchor" href="#_creating_a_new_metacard_transformer"></a><a class="link" href="#_creating_a_new_metacard_transformer">1.10.1. Creating a New Metacard Transformer</a></h4>
<div class="paragraph">
<p>Existing metacard transformers are written as Java classes, and these steps walk through the steps to create a custom metacard transformer.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new Java class that implements <code>ddf.catalog.transform.MetacardTransformer</code>.<br>
<code>public class SampleMetacardTransformer implements ddf.catalog.transform.MetacardTransformer</code></p>
</li>
<li>
<p>Implement the <code>transform</code> method.<br>
<code>public BinaryContent transform(Metacard metacard, Map&lt;String, Serializable&gt; arguments) throws CatalogTransformerException</code><br></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>transform</code> must return a <code>Metacard</code> or throw an exception. It cannot return null.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog,ddf.catalog.transform</code></p>
</li>
<li>
<p>Create an OSGi descriptor file to communicate with the OSGi Service registry (described in the <a href="#_osgi_basics">OSGi Basics</a> section). Export the service to the OSGi registry and declare service properties.</p>
<div class="listingblock">
<div class="title">Metacard Transformer Blueprint Descriptor Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre>...
<span class="tag">&lt;service</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SampleMetacardTransformer</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ddf.catalog.transform.MetacardTransformer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;service-properties&gt;</span>
        <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shortname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[[sampletransform]]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[[Sample Metacard Transformer]]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[[A new transformer for metacards.]]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/service-properties&gt;</span>
<span class="tag">&lt;/service&gt;</span>
...</pre></td>
</tr></table></code></pre>
</div>
</div>
</li>
<li>
<p>Deploy OSGi Bundle to OSGi runtime.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Metacard Transformer Blueprint Service Properties / Variable Descriptions</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Description of Value</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shortname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Required) An abbreviation for the return type of the BinaryContent being sent to the user.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">atom</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>title</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) A user-readable title that describes (in greater detail than the shortname) the service.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Atom Entry Transformer Service</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) A short, human-readable description that describes the functionality of the service and the output.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This service converts a single metacard xml document to an atom entry element.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_developing_query_response_transformers"><a class="anchor" href="#_developing_query_response_transformers"></a><a class="link" href="#_developing_query_response_transformers">1.11. Developing Query Response Transformers</a></h3>
<div class="paragraph">
<p>A <code>QueryResponseTransformer</code> is used to transform a List of Results from a <code>SourceResponse</code>.
Query Response Transformers can be used through the Catalog transform convenience method or requested from the OSGi Service Registry by endpoints or other bundles.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new Java class that implements <code>ddf.catalog.transform.QueryResponseTransformer</code>.<br>
<code>public class SampleResponseTransformer implements ddf.catalog.transform.QueryResponseTransformer</code></p>
</li>
<li>
<p>Implement the <code>transform</code> method.<br>
<code>public BinaryContent transform(SourceResponse upstreamResponse, Map&lt;String, Serializable&gt; arguments) throws CatalogTransformerException</code></p>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog, ddf.catalog.transform</code></p>
</li>
<li>
<p>Create an OSGi descriptor file to communicate with the OSGi Service Registry (described in <a href="#_osgi_basics">OSGi Basics</a>). Export the service to the OSGi registry and declare service properties.</p>
</li>
<li>
<p>Deploy OSGi Bundle to OSGi runtime.</p>
<div class="listingblock">
<div class="title">Query Response Transformer Blueprint Descriptor Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td>
  <td class="code"><pre>...
<span class="tag">&lt;service</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SampleResponseTransformer</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ddf.catalog.transform.QueryResponseTransformer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;service-properties&gt;</span>
        <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[[sampleId]]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shortname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[[sampletransform]]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[[Sample Response Transformer]]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[[A new transformer for response queues.]]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/service-properties&gt;</span>
<span class="tag">&lt;/service&gt;</span>
...</pre></td>
</tr></table></code></pre>
</div>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Query Response Transformer Blueprint Service Properties / Variable Descriptions</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Description of Value</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A unique identifier to target a specific query response transformer.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">atom</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shortname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An abbreviation for the return type of the BinaryContent being sent to the user.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">atom</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>title</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A user-readable title that describes (in greater detail than the shortname) the service.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Atom Entry Transformer Service</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A short, human-readable description that describes the functionality of the service and the output.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>This service converts a single metacard xml document to an atom entry element</em>.</p></td>
</tr>
</tbody>
</table>
<hr>
</div>
<div class="sect2">
<h3 id="_developing_sources"><a class="anchor" href="#_developing_sources"></a><a class="link" href="#_developing_sources">1.12. Developing Sources</a></h3>
<div class="paragraph">
<p>Sources are components that enable DDF to talk to back-end services.
They let DDF perform query and ingest operations on catalog stores and query operations on federated sources.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png;base64,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" alt="Source Architecture" width="1000" height="448">
</div>
<div class="title">Source Architecture</div>
</div>
<div class="sect3">
<h4 id="_implement_a_source_interface"><a class="anchor" href="#_implement_a_source_interface"></a><a class="link" href="#_implement_a_source_interface">1.12.1. Implement a Source Interface</a></h4>
<div class="paragraph">
<p>There are three types of sources that can be created to perform query operations.
All of these sources must also be able to return their availability and the list of content types currently stored in their back-end data stores.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Catalog Provider</dt>
<dd>
<p><code>ddf.catalog.source.CatalogProvider</code> <em>is used to communicate with back-end storage and allows for Query and Create/Update/Delete operations.</em></p>
</dd>
<dt class="hdlist1">Federated Source</dt>
<dd>
<p><code>ddf.catalog.source.FederatedSource</code> <em>is used to communicate with remote systems and only allows query operations.</em></p>
</dd>
<dt class="hdlist1">Connected Source</dt>
<dd>
<p><code>ddf.catalog.source.ConnectedSource</code> <em>is similar to a Federated Source with the following exceptions:</em></p>
<div class="ulist">
<ul>
<li>
<p><em>Queried on all local queries</em></p>
</li>
<li>
<p><code>SiteName</code> <em>is hidden (masked with the DDF sourceId) in query results</em></p>
</li>
<li>
<p><code>SiteService</code> <em>does not show this Source&#8217;s information separate from DDF&#8217;s.</em></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Catalog Store</dt>
<dd>
<p><code>catalog.store.interface</code> <em>is used to store data.</em></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The procedure for implementing any of the source types follows a similar format:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new class that implements the specified Source interface, the <code>ConfiguredService</code> and the required methods.</p>
</li>
<li>
<p>Create an OSGi descriptor file to communicate with the OSGi registry. (Refer to <a href="#_osgi_basics">OSGi Services</a>.)</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Import DDF packages.</p>
</li>
<li>
<p>Register source class as service to the OSGi registry.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Deploy to DDF.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>factory-pid</code> property of the metatype must contain one of the following in the name: service, Service, source, Source</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Remote sources currently extend the <code>ResourceReader</code> interface. However, a <code>RemoteSource</code> is not treated as a <code>ResourceReader</code>. The <code>getSupportedSchemes()</code> method should never be called on a <code>RemoteSource</code>, thus the suggested implementation for a <code>RemoteSource</code> is to return an empty set. The <code>retrieveResource( …​ )</code> and <code>getOptions( …​ )</code> methods will be called and MUST be properly implemented by a <code>RemoteSource</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_developing_catalog_providers"><a class="anchor" href="#_developing_catalog_providers"></a><a class="link" href="#_developing_catalog_providers">1.12.1.1. Developing Catalog Providers</a></h5>
<div class="paragraph">
<p>Create a custom implementation of a catalog provider.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>CatalogProvider</code>.<br>
<code>public class TestCatalogProvider implements ddf.catalog.source.CatalogProvider</code></p>
</li>
<li>
<p>Implement the required methods from the <code>ddf.catalog.source.CatalogProvider</code> interface.<br>
<code>public CreateResponse create(CreateRequest createRequest) throws IngestException;</code>
<code>public UpdateResponset update(UpdateRequest updateRequest) throws IngestException;</code>
<code>public DeleteResponse delete(DeleteRequest deleteRequest) throws IngestException;</code></p>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog, ddf.catalog.source</code></p>
</li>
<li>
<p>Export the service to the OSGi registry.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Catalog Provider Blueprint example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;service</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TestCatalogProvider</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ddf.catalog.source.CatalogProvider</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="managing.html#_connecting_to_sources">existing Catalog Provider list</a> for examples of Catalog Providers included in DDF.</p>
</div>
</div>
<div class="sect4">
<h5 id="_developing_federated_sources"><a class="anchor" href="#_developing_federated_sources"></a><a class="link" href="#_developing_federated_sources">1.12.1.2. Developing Federated Sources</a></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>FederatedSource</code> and <code>ConfiguredService</code>.<br>
<code>public class TestFederatedSource implements ddf.catalog.source.FederatedSource, ddf.catalog.service.ConfiguredService</code></p>
</li>
<li>
<p>Implement the required methods of the <code>ddf.catalog.source.FederatedSource</code> and <code>ddf.catalog.service.ConfiguredService</code> interfaces.</p>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog, ddf.catalog.source</code></p>
</li>
<li>
<p>Export the service to the OSGi registry.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Federated Source Blueprint example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;service</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TestFederatedSource</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ddf.catalog.source.FederatedSource</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_developing_connected_sources"><a class="anchor" href="#_developing_connected_sources"></a><a class="link" href="#_developing_connected_sources">1.12.1.3. Developing Connected Sources</a></h5>
<div class="paragraph">
<p>Create a custom implementation of a connected source.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>ConnectedSource</code> and <code>ConfiguredService</code>.<br>
<code>public class TestConnectedSource implements ddf.catalog.source.ConnectedSource, ddf.catalog.service.ConfiguredService</code></p>
</li>
<li>
<p>Implement the required methods of the <code>ddf.catalog.source.ConnectedSource</code> and <code>ddf.catalog.service.ConfiguredService</code> interfaces.</p>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog, ddf.catalog.source</code></p>
</li>
<li>
<p>Export the service to the OSGi registry.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Connected Source Blueprint example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="tag">&lt;service</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TestConnectedSource</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ddf.catalog.source.ConnectedSource</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>In some Providers that are created, there is a need to make Web Service calls through JAXB clients.
It is best to NOT create a JAXB client as a global variable.
There may be intermittent failures with the creation of Providers and federated sources when clients are created in this manner.
To avoid this issue, create any JAXB within the methods requiring it.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_exception_handling"><a class="anchor" href="#_exception_handling"></a><a class="link" href="#_exception_handling">1.12.1.4. Exception Handling</a></h5>
<div class="paragraph">
<p>In general, sources should only send information back related to the call, not implementation details.</p>
</div>
<div class="sect5">
<h6 id="_exception_examples"><a class="anchor" href="#_exception_examples"></a><a class="link" href="#_exception_examples">1.12.1.4.1. Exception Examples</a></h6>
<div class="paragraph">
<p>Follow these guidelines for effective exception handling:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use a "Site XYZ not found" message rather than the full stack trace with the original site not found exception.</p>
</li>
<li>
<p>If the caller issues a malformed search request, return an error describing the right form, or specifically what was not recognized in the request. Do not return the exception and stack trace where the parsing broke.</p>
</li>
<li>
<p>If the caller leaves something out, do not return the null pointer exception with a stack trace, rather return a generic exception with the message "xyz was missing."</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_external_resources_for_developing_sources"><a class="anchor" href="#_external_resources_for_developing_sources"></a><a class="link" href="#_external_resources_for_developing_sources">1.12.1.4.2. External Resources for Developing Sources</a></h6>
<div class="ulist">
<ul>
<li>
<p><a href="http://today.java.net/pub/a/today/2003/12/04/exceptions.html">Three Rules for Effective Exception Handling</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Developing Sources"></span>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_catalog_plugins"><a class="anchor" href="#_developing_catalog_plugins"></a><a class="link" href="#_developing_catalog_plugins">1.13. Developing Catalog Plugins</a></h3>
<div class="paragraph">
<p>Plugins extend the functionality of the Catalog Framework by performing actions at specified times during a transaction. 
Plugin interfaces are located in the Catalog Core API.
By implementing a plugin interface, actions can be performed at the desired time. </p>
</div>
<div class="paragraph">
<p>The following types of plugins can be created:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Plugin Interfaces</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Plugin Type</th>
<th class="tableblock halign-left valign-top">Plugin Interface</th>
<th class="tableblock halign-left valign-top">Invocation Order</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_pre_authorization_plugins">Pre-Authorization</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PreAuthorizationPlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Before any security rules are applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_policy_plugins">Policy</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PolicyPlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">After pre-authorization plugins, but before other catalog plugins to establish the policy for requests/responses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_access_plugins">Access</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.AccessPlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directly after any policy plugins</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_pre_ingest_plugins">Pre-Ingest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PreIngestPlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Before the Create/Update/Delete method is sent to the Catalog Provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_post_ingest_plugins">Post-Ingest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PostIngestPlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">After the Create/Update/Delete method is sent to the Catalog Provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_pre_query_plugins">Pre-Query</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PreQueryPlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prior to the Query/Read method being sent to the Source.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_post_query_plugins">Post-Query</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PostQueryPlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">After results have been retrieved from the query but before they are posted to the Endpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_pre_federated_query_plugins">Pre-Federated-Query</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PreFederatedQueryPlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Before a federated query is executed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_post_federated_query_plugins">Post-Federated-Query</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PostFederatedQueryPlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">After a federated query has been executed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_pre_resource_plugins">Pre-Resource</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PreResourcePlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prior to a Resource being retrieved.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_post_resource_plugins">Post-Resource</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PostResourcePlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">After a Resource is retrieved, but before it is sent to the Endpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_pre_create_storage_plugins">Pre-Create Storage</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.content.plugin.PreCreateStoragePlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="reference.html#_packages_removed_from_whitelist">Experimental </a>Before an item is created in the content repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_post_create_storage_plugins">Post-Create Storage</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.content.plugin.PostCreateStoragePlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="reference.html#_packages_removed_from_whitelist">Experimental </a>After an item is created in the content repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_pre_update_storage_plugins">Pre-Update Storage</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.content.plugin.PreUpdateStoragePlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="reference.html#_packages_removed_from_whitelist">Experimental </a>Before an item is updated in the content repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_post_update_storage_plugins">Post-Update Storage</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.content.plugin.PostUpdateStoragePlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="reference.html#_packages_removed_from_whitelist">Experimental </a>After an item is updated in the content repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_pre_subscription_plugins">Pre-Subscription</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PreSubscriptionPlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prior to a Subscription being created or updated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="architecture.html#_pre_delivery_plugins">Pre-Delivery</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ddf.catalog.plugin.PreDeliveryPlugin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prior to the delivery of a Metacard when an event is posted.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_implementing_catalog_plugins"><a class="anchor" href="#_implementing_catalog_plugins"></a><a class="link" href="#_implementing_catalog_plugins">1.13.1. Implementing Catalog Plugins</a></h4>
<div class="paragraph">
<p>The procedure for implementing any of the plugins follows a similar format:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new class that implements the specified plugin interface.</p>
</li>
<li>
<p>Implement the required methods.</p>
</li>
<li>
<p>Create an OSGi descriptor file to communicate with the OSGi registry.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Register the plugin class as a service to OSGi registry.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Deploy to DDF.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">Plugin Performance Concerns</div>
<div class="paragraph">
<p>Plugins should include a check to determine if requests are local or not.
It is usually preferable to take no action on non-local requests.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Refer to the Javadoc for more information on all Requests and Responses in the <code>ddf.catalog.operation</code> and <code>ddf.catalog.event</code> packages.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_catalog_plugin_failure_behavior"><a class="anchor" href="#_catalog_plugin_failure_behavior"></a><a class="link" href="#_catalog_plugin_failure_behavior">1.13.1.1. Catalog Plugin Failure Behavior</a></h5>
<div class="paragraph">
<p>In the event that this Catalog Plugin cannot operate but does not wish to fail the transaction, a <code>PluginExecutionException</code> should be thrown.
If processing is to be explicitly stopped, a <code>StopProcessingException</code> should be thrown.
For any other exceptions, the Catalog should "fail fast" and cancel the Operation.</p>
</div>
</div>
<div class="sect4">
<h5 id="_implementing_pre_ingest_plugins"><a class="anchor" href="#_implementing_pre_ingest_plugins"></a><a class="link" href="#_implementing_pre_ingest_plugins">1.13.1.2. Implementing Pre-Ingest Plugins</a></h5>
<div class="paragraph">
<p>Develop a custom Pre-Ingest Plugin.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>PreIngestPlugin</code>.<br>
<code>public class SamplePreIngestPlugin implements ddf.catalog.plugin.PreIngestPlugin</code></p>
</li>
<li>
<p>Implement the required methods.<br></p>
<div class="ulist">
<ul>
<li>
<p><code>public CreateRequest process(CreateRequest input) throws PluginExecutionException, StopProcessingException;</code></p>
</li>
<li>
<p><code>public UpdateRequest process(UpdateRequest input) throws PluginExecutionException, StopProcessingException;</code></p>
</li>
<li>
<p><code>public DeleteRequest process(DeleteRequest input) throws PluginExecutionException, StopProcessingException;</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog,ddf.catalog.plugin</code></p>
</li>
<li>
<p>Export the service to the OSGi registry.<br>
<strong>Blueprint descriptor example</strong>
<code>&lt;service ref="SamplePreIngestPlugin" interface="ddf.catalog.plugin.PreIngestPlugin" /&gt;</code></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_implementing_post_ingest_plugins"><a class="anchor" href="#_implementing_post_ingest_plugins"></a><a class="link" href="#_implementing_post_ingest_plugins">1.13.1.3. Implementing Post-Ingest Plugins</a></h5>
<div class="paragraph">
<p>Develop a custom Post-Ingest Plugin.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>PostIngestPlugin</code>.<br>
<code>public class SamplePostIngestPlugin implements ddf.catalog.plugin.PostIngestPlugin</code></p>
</li>
<li>
<p>Implement the required methods.<br></p>
<div class="ulist">
<ul>
<li>
<p><code>public CreateResponse process(CreateResponse input) <strong>throws</strong> PluginExecutionException;</code></p>
</li>
<li>
<p><code>public UpdateResponse process(UpdateResponse input) <strong>throws</strong> PluginExecutionException;</code></p>
</li>
<li>
<p><code>public DeleteResponse process(DeleteResponse input) <strong>throws</strong> PluginExecutionException;</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog,ddf.catalog.plugin</code></p>
</li>
<li>
<p>Export the service to the OSGi registry.<br>
<strong>Blueprint descriptor example</strong>
<code>&lt;service ref="SamplePostIngestPlugin" interface="ddf.catalog.plugin.PostIngestPlugin" /&gt;</code></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_implementing_pre_query_plugins"><a class="anchor" href="#_implementing_pre_query_plugins"></a><a class="link" href="#_implementing_pre_query_plugins">1.13.1.4. Implementing Pre-Query Plugins</a></h5>
<div class="paragraph">
<p>Develop a custom Pre-Query Plugin</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>PreQueryPlugin</code>.<br>
<code>public class SamplePreQueryPlugin implements ddf.catalog.plugin.PreQueryPlugin</code></p>
</li>
<li>
<p>Implement the required method.<br>
<code>public QueryRequest process(QueryRequest input) <strong>throws</strong> PluginExecutionException, StopProcessingException;</code></p>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog,ddf.catalog.plugin</code></p>
</li>
<li>
<p>Export the service to the OSGi registry.<br>
<code>&lt;service ref="SamplePreQueryPlugin" interface="ddf.catalog.plugin.PreQueryPlugin" /&gt;</code></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_implementing_post_query_plugins"><a class="anchor" href="#_implementing_post_query_plugins"></a><a class="link" href="#_implementing_post_query_plugins">1.13.1.5. Implementing Post-Query Plugins</a></h5>
<div class="paragraph">
<p>Develop a custom Post-Query Plugin</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>PostQueryPlugin</code>.<br>
<code>public class SamplePostQueryPlugin implements ddf.catalog.plugin.PostQueryPlugin</code></p>
</li>
<li>
<p>Implement the required method.<br>
<code>public QueryResponse process(QueryResponse input) <strong>throws</strong> PluginExecutionException, StopProcessingException;</code></p>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog,ddf.catalog.plugin</code></p>
</li>
<li>
<p>Export the service to the OSGi registry.<br>
<code>&lt;service ref="SamplePostQueryPlugin" interface="ddf.catalog.plugin.PostQueryPlugin" /&gt;</code></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_implementing_pre_delivery_plugins"><a class="anchor" href="#_implementing_pre_delivery_plugins"></a><a class="link" href="#_implementing_pre_delivery_plugins">1.13.1.6. Implementing Pre-Delivery Plugins</a></h5>
<div class="paragraph">
<p>Develop a custom Pre-Delivery Plugin.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>PreDeliveryPlugin</code>.<br>
<code>public class SamplePreDeliveryPlugin <strong>implements</strong> ddf.catalog.plugin.PreDeliveryPlugin</code></p>
</li>
<li>
<p>Implement the required methods.<br>
<code>public Metacard processCreate(Metacard metacard) <strong>throws</strong> PluginExecutionException, StopProcessingException;</code>
<code>public Update processUpdateMiss(Update update) <strong>throws</strong> PluginExecutionException,
StopProcessingException;</code></p>
<div class="ulist">
<ul>
<li>
<p><code>public Update processUpdateHit(Update update) <strong>throws</strong> PluginExecutionException, StopProcessingException;</code></p>
</li>
<li>
<p><code>public Metacard processCreate(Metacard metacard) <strong>throws</strong> PluginExecutionException, StopProcessingException;</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog,ddf.catalog.plugin,ddf.catalog.operation,ddf.catalog.event</code></p>
</li>
<li>
<p>Export the service to the OSGi registry.<br>
<strong>Blueprint descriptor example</strong><br>
<code>&lt;service ref="SamplePreDeliveryPlugin" interface="ddf.catalog.plugin.PreDeliveryPlugin" /&gt;</code></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_implementing_pre_subscription_plugins"><a class="anchor" href="#_implementing_pre_subscription_plugins"></a><a class="link" href="#_implementing_pre_subscription_plugins">1.13.1.7. Implementing Pre-Subscription Plugins</a></h5>
<div class="paragraph">
<p>Develop a custom Pre-Subscription Plugin.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>PreSubscriptionPlugin</code>.<br>
<code>public class SamplePreSubscriptionPlugin <strong>implements</strong> ddf.catalog.plugin.PreSubscriptionPlugin</code></p>
</li>
<li>
<p>Implement the required method.</p>
<div class="ulist">
<ul>
<li>
<p><code>public Subscription process(Subscription input) <strong>throws</strong> PluginExecutionException, StopProcessingException;</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_implementing_pre_resource_plugins"><a class="anchor" href="#_implementing_pre_resource_plugins"></a><a class="link" href="#_implementing_pre_resource_plugins">1.13.1.8. Implementing Pre-Resource Plugins</a></h5>
<div class="paragraph">
<p>Develop a custom Pre-Resource Plugin.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>PreResourcePlugin</code>.
<code>public class SamplePreResourcePlugin <strong>implements</strong> ddf.catalog.plugin.PreResourcePlugin</code></p>
</li>
<li>
<p>Implement the required method.<br></p>
<div class="ulist">
<ul>
<li>
<p><code>public ResourceRequest process(ResourceRequest input) <strong>throws</strong> PluginExecutionException, StopProcessingException;</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog,ddf.catalog.plugin,ddf.catalog.operation</code></p>
</li>
<li>
<p>Export the service to the OSGi registry.
.Blueprint descriptor example</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;service ref="SamplePreResourcePlugin" interface="ddf.catalog.plugin.PreResourcePlugin" /&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_implementing_post_resource_plugins"><a class="anchor" href="#_implementing_post_resource_plugins"></a><a class="link" href="#_implementing_post_resource_plugins">1.13.1.9. Implementing Post-Resource Plugins</a></h5>
<div class="paragraph">
<p>Develop a custom Post-Resource Plugin.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>PostResourcePlugin</code>.<br>
<code>public class SamplePostResourcePlugin <strong>implements</strong> ddf.catalog.plugin.PostResourcePlugin</code></p>
</li>
<li>
<p>Implement the required method.<br></p>
<div class="ulist">
<ul>
<li>
<p><code>public ResourceResponse process(ResourceResponse input) <strong>throws</strong> PluginExecutionException, StopProcessingException;</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog,ddf.catalog.plugin,ddf.catalog.operation</code></p>
</li>
<li>
<p>Export the service to the OSGi registry.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Blueprint descriptor example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>]]&quot; inter&quot;[[SamplePostResourcePlugin&quot; interface=&quot;ddf.catalog.plugin.PostResourcePlugin&quot; /<span class="error">&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_implementing_policy_plugins"><a class="anchor" href="#_implementing_policy_plugins"></a><a class="link" href="#_implementing_policy_plugins">1.13.1.10. Implementing Policy Plugins</a></h5>
<div class="paragraph">
<p>Develop a custom Policy Plugin.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>PolicyPlugin</code>.<br>
<code>public class SamplePolicyPlugin <strong>implements</strong> ddf.catalog.plugin.PolicyPlugin</code></p>
</li>
<li>
<p>Implement the required methods.<br></p>
<div class="ulist">
<ul>
<li>
<p><code>PolicyResponse processPreCreate(Metacard input, Map&lt;String, Serializable&gt; properties) <strong>throws</strong> StopProcessingException;</code></p>
</li>
<li>
<p><code>PolicyResponse processPreUpdate(Metacard input, Map&lt;String, Serializable&gt; properties) <strong>throws</strong> StopProcessingException;</code></p>
</li>
<li>
<p><code>PolicyResponse processPreDelete(String attributeName, List&lt;Serializable&gt; attributeValues, Map&lt;String, Serializable&gt; properties) <strong>throws</strong> StopProcessingException;</code></p>
</li>
<li>
<p><code>PolicyResponse processPreQuery(Query query, Map&lt;String, Serializable&gt; properties) <strong>throws</strong> StopProcessingException;</code></p>
</li>
<li>
<p><code>PolicyResponse processPostQuery(Result input, Map&lt;String, Serializable&gt; properties) <strong>throws</strong> StopProcessingException;</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog,ddf.catalog.plugin,ddf.catalog.operation</code></p>
</li>
<li>
<p>Export the service to the OSGi registry. <br>
<strong>Blueprint descriptor example</strong><br>
<code>&lt;]]" inter"[[SamplePolicyPlugin" interface="ddf.catalog.plugin.PolicyPlugin" /&gt;</code></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_implementing_access_plugins"><a class="anchor" href="#_implementing_access_plugins"></a><a class="link" href="#_implementing_access_plugins">1.13.1.11. Implementing Access Plugins</a></h5>
<div class="paragraph">
<p>Develop a custom Access Plugin.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements <code>AccessPlugin</code>.<br>
<code>public class SamplePostResourcePlugin <strong>implements</strong> ddf.catalog.plugin.AccessPlugin</code></p>
</li>
<li>
<p>Implement the required methods.<br></p>
<div class="ulist">
<ul>
<li>
<p><code>CreateRequest processPreCreate(CreateRequest input) <strong>throws</strong> StopProcessingException;</code></p>
</li>
<li>
<p><code>UpdateRequest processPreUpdate(UpdateRequest input) <strong>throws</strong> StopProcessingException;</code></p>
</li>
<li>
<p><code>DeleteRequest processPreDelete(DeleteRequest input) <strong>throws</strong> StopProcessingException;</code></p>
</li>
<li>
<p><code>QueryRequest processPreQuery(QueryRequest input) <strong>throws</strong> StopProcessingException;</code></p>
</li>
<li>
<p><code>QueryResponse processPostQuery(QueryResponse input) <strong>throws</strong> StopProcessingException;</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Import the DDF interface packages to the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: ddf.catalog,ddf.catalog.plugin,ddf.catalog.operation</code></p>
</li>
<li>
<p>Export the service to the OSGi registry. <br>
<strong>Blueprint descriptor example</strong><br>
<code>&lt;]]" inter"[[SampleAccessPlugin" interface="ddf.catalog.plugin.AccessPlugin" /&gt;</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_token_validators"><a class="anchor" href="#_developing_token_validators"></a><a class="link" href="#_developing_token_validators">1.14. Developing Token Validators</a></h3>
<div class="paragraph">
<p>Token validators are used by the Security Token Service (STS) to validate incoming token requests.
The <code>TokenValidator</code> CXF interface must be implemented by all custom token validators.
The <code>canHandleToken</code> and <code>validateToken</code> methods must be overridden.
The <code>canHandleToken</code> method should return true or false based on the <code>ValueType</code> value of the token that the validator is associated with.
The validator may be able to handle any number of different tokens that you specify.
The <code>validateToken</code> method returns a <code>TokenValidatorResponse</code> object that contains the <code>Principal</code> of the identity being validated and also validates the <code>ReceivedToken</code> object collected from the RST (<code>RequestSecurityToken</code>) message.</p>
</div>
</div>
<div class="sect2">
<h3 id="_developing_sts_claims_handlers"><a class="anchor" href="#_developing_sts_claims_handlers"></a><a class="link" href="#_developing_sts_claims_handlers">1.15. Developing STS Claims Handlers</a></h3>
<div class="paragraph">
<p>Develop a custom claims handler to retrieve attributes from an external attribute store.</p>
</div>
<div class="paragraph">
<p>A claim is an additional piece of data about a subject that can be included in a token along with basic token data.
A claims manager provides hooks for a developer to plug in claims handlers to ensure that the STS includes the specified claims in the issued token.</p>
</div>
<div class="paragraph">
<p>The following steps define the procedure for adding a custom claims handler to the STS.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The new claims handler must implement the <code>org.apache.cxf.sts.claims.ClaimsHander</code> interface.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td>
  <td class="code"><pre><span class="comment">/**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements. See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership. The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * &quot;License&quot;); you may not use this file except in compliance
 * with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */</span>

<span class="keyword">package</span> <span class="namespace">org.apache.cxf.sts.claims</span>;

<span class="keyword">import</span> <span class="include">java.net.URI</span>;
<span class="keyword">import</span> <span class="include">java.util.List</span>;

<span class="comment">/**
 * This interface provides a pluggable way to handle Claims.
 */</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">ClaimsHandler</span> {

    <span class="predefined-type">List</span>&lt;<span class="predefined-type">URI</span>&gt; getSupportedClaimTypes();

    ClaimCollection retrieveClaimValues(RequestClaimCollection claims, ClaimsParameters parameters);

}</pre></td>
</tr></table></code></pre>
</div>
</div>
</li>
<li>
<p>Expose the new claims handler as an OSGi service under the <code>org.apache.cxf.sts.claims.ClaimsHandler</code> interface.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;blueprint</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.osgi.org/xmlns/blueprint/v1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CustomClaimsHandler</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">security.sts.claimsHandler.CustomClaimsHandler</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

    <span class="tag">&lt;service</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">customClaimsHandler</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.apache.cxf.sts.claims.ClaimsHandler</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;/blueprint&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</li>
<li>
<p>Deploy the bundle.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the new claims handler is hitting an external service that is secured with SSL/TLS, a developer may need to add the root CA of the external site to the DDF trustStore and add a valid certificate into the DDF keyStore. For more information on certificates, refer to <a href="managing.html#_managing_keystores_and_certificates">Configuring a Java Keystore for Secure Communications</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This XML file is found inside of the STS bundle and is named <code>ws-trust-1.4-service.wsdl</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">STS WS-Trust WSDL Document</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
</pre></td>
  <td class="code"><pre><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;wsdl:definitions</span> <span class="attribute-name">xmlns:tns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wstrust</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsdl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/wsdl/</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:soap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/wsdl/soap/</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsap10</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2006/05/addressing/wsdl</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsu</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/ns/ws-policy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wst</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsam</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2007/05/addressing/metadata</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">targetNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;wsdl:types&gt;</span>
        <span class="tag">&lt;xs:schema</span> <span class="attribute-name">elementFormDefault</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">qualified</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">targetNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityToken</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wst:AbstractRequestSecurityTokenType</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityTokenResponse</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wst:AbstractRequestSecurityTokenType</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;xs:complexType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">AbstractRequestSecurityTokenType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;xs:sequence&gt;</span>
                    <span class="tag">&lt;xs:any</span> <span class="attribute-name">namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">##any</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">processContents</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">lax</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">minOccurs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maxOccurs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">unbounded</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;/xs:sequence&gt;</span>
                <span class="tag">&lt;xs:attribute</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Context</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:anyURI</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">optional</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;xs:anyAttribute</span> <span class="attribute-name">namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">##other</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">processContents</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">lax</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/xs:complexType&gt;</span>
            <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityTokenCollection</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wst:RequestSecurityTokenCollectionType</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;xs:complexType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityTokenCollectionType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;xs:sequence&gt;</span>
                    <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityToken</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wst:AbstractRequestSecurityTokenType</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">minOccurs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maxOccurs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">unbounded</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;/xs:sequence&gt;</span>
            <span class="tag">&lt;/xs:complexType&gt;</span>
            <span class="tag">&lt;xs:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityTokenResponseCollection</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wst:RequestSecurityTokenResponseCollectionType</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;xs:complexType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityTokenResponseCollectionType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;xs:sequence&gt;</span>
                    <span class="tag">&lt;xs:element</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wst:RequestSecurityTokenResponse</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">minOccurs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maxOccurs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">unbounded</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;/xs:sequence&gt;</span>
                <span class="tag">&lt;xs:anyAttribute</span> <span class="attribute-name">namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">##other</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">processContents</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">lax</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/xs:complexType&gt;</span>
        <span class="tag">&lt;/xs:schema&gt;</span>
    <span class="tag">&lt;/wsdl:types&gt;</span>
    <span class="comment">&lt;!-- WS-Trust defines the following GEDs --&gt;</span>
    <span class="tag">&lt;wsdl:message</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityTokenMsg</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsdl:part</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">request</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">element</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wst:RequestSecurityToken</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/wsdl:message&gt;</span>
    <span class="tag">&lt;wsdl:message</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityTokenResponseMsg</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsdl:part</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">response</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">element</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wst:RequestSecurityTokenResponse</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/wsdl:message&gt;</span>
    <span class="tag">&lt;wsdl:message</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityTokenCollectionMsg</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsdl:part</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">requestCollection</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">element</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wst:RequestSecurityTokenCollection</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/wsdl:message&gt;</span>
    <span class="tag">&lt;wsdl:message</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityTokenResponseCollectionMsg</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsdl:part</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">responseCollection</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">element</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wst:RequestSecurityTokenResponseCollection</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/wsdl:message&gt;</span>
    <span class="comment">&lt;!-- This portType an example of a Requestor (or other) endpoint that
         Accepts SOAP-based challenges from a Security Token Service --&gt;</span>
    <span class="tag">&lt;wsdl:portType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">WSSecurityRequestor</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Challenge</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsdl:input</span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenResponseMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:output</span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenResponseMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
    <span class="tag">&lt;/wsdl:portType&gt;</span>
    <span class="comment">&lt;!-- This portType is an example of an STS supporting full protocol --&gt;</span>
    <span class="tag">&lt;wsdl:portType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">STS</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cancel</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsdl:input</span> <span class="attribute-name">wsam:Action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Cancel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:output</span> <span class="attribute-name">wsam:Action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTR/CancelFinal</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenResponseMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Issue</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsdl:input</span> <span class="attribute-name">wsam:Action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:output</span> <span class="attribute-name">wsam:Action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTRC/IssueFinal</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenResponseCollectionMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Renew</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsdl:input</span> <span class="attribute-name">wsam:Action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Renew</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:output</span> <span class="attribute-name">wsam:Action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTR/RenewFinal</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenResponseMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Validate</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsdl:input</span> <span class="attribute-name">wsam:Action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Validate</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:output</span> <span class="attribute-name">wsam:Action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTR/ValidateFinal</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenResponseMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">KeyExchangeToken</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsdl:input</span> <span class="attribute-name">wsam:Action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/KET</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:output</span> <span class="attribute-name">wsam:Action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTR/KETFinal</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenResponseMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestCollection</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsdl:input</span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenCollectionMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:output</span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenResponseCollectionMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
    <span class="tag">&lt;/wsdl:portType&gt;</span>
    <span class="comment">&lt;!-- This portType is an example of an endpoint that accepts
         Unsolicited RequestSecurityTokenResponse messages --&gt;</span>
    <span class="tag">&lt;wsdl:portType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SecurityTokenResponseService</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestSecurityTokenResponse</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsdl:input</span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:RequestSecurityTokenResponseMsg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
    <span class="tag">&lt;/wsdl:portType&gt;</span>
    <span class="tag">&lt;wsdl:binding</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">STS_Binding</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wstrust:STS</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsp:PolicyReference</span> <span class="attribute-name">URI</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#STS_policy</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;soap:binding</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">document</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">transport</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/soap/http</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Issue</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;soap:operation</span> <span class="attribute-name">soapAction</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:input&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:input&gt;</span>
            <span class="tag">&lt;wsdl:output&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:output&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Validate</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;soap:operation</span> <span class="attribute-name">soapAction</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Validate</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:input&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:input&gt;</span>
            <span class="tag">&lt;wsdl:output&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:output&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cancel</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;soap:operation</span> <span class="attribute-name">soapAction</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Cancel</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:input&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:input&gt;</span>
            <span class="tag">&lt;wsdl:output&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:output&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Renew</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;soap:operation</span> <span class="attribute-name">soapAction</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Renew</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:input&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:input&gt;</span>
            <span class="tag">&lt;wsdl:output&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:output&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">KeyExchangeToken</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;soap:operation</span> <span class="attribute-name">soapAction</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/KeyExchangeToken</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:input&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:input&gt;</span>
            <span class="tag">&lt;wsdl:output&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:output&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
        <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RequestCollection</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;soap:operation</span> <span class="attribute-name">soapAction</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/RequestCollection</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;wsdl:input&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:input&gt;</span>
            <span class="tag">&lt;wsdl:output&gt;</span>
                <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wsdl:output&gt;</span>
        <span class="tag">&lt;/wsdl:operation&gt;</span>
    <span class="tag">&lt;/wsdl:binding&gt;</span>
    <span class="tag">&lt;wsp:Policy</span> <span class="attribute-name">wsu:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">STS_policy</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsp:ExactlyOne&gt;</span>
            <span class="tag">&lt;wsp:All&gt;</span>
                <span class="tag">&lt;wsap10:UsingAddressing</span><span class="tag">/&gt;</span>
                <span class="tag">&lt;wsp:ExactlyOne&gt;</span>
                    <span class="tag">&lt;sp:TransportBinding</span> <span class="attribute-name">xmlns:sp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;wsp:Policy&gt;</span>
                            <span class="tag">&lt;sp:TransportToken&gt;</span>
                                <span class="tag">&lt;wsp:Policy&gt;</span>
                                    <span class="tag">&lt;sp:HttpsToken&gt;</span>
                                        <span class="tag">&lt;wsp:Policy</span><span class="tag">/&gt;</span>
                                    <span class="tag">&lt;/sp:HttpsToken&gt;</span>
                                <span class="tag">&lt;/wsp:Policy&gt;</span>
                            <span class="tag">&lt;/sp:TransportToken&gt;</span>
                            <span class="tag">&lt;sp:AlgorithmSuite&gt;</span>
                                <span class="tag">&lt;wsp:Policy&gt;</span>
                                    <span class="tag">&lt;sp:Basic128</span><span class="tag">/&gt;</span>
                                <span class="tag">&lt;/wsp:Policy&gt;</span>
                            <span class="tag">&lt;/sp:AlgorithmSuite&gt;</span>
                            <span class="tag">&lt;sp:Layout&gt;</span>
                                <span class="tag">&lt;wsp:Policy&gt;</span>
                                    <span class="tag">&lt;sp:Lax</span><span class="tag">/&gt;</span>
                                <span class="tag">&lt;/wsp:Policy&gt;</span>
                            <span class="tag">&lt;/sp:Layout&gt;</span>
                            <span class="tag">&lt;sp:IncludeTimestamp</span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;/wsp:Policy&gt;</span>
                    <span class="tag">&lt;/sp:TransportBinding&gt;</span>
                <span class="tag">&lt;/wsp:ExactlyOne&gt;</span>
                <span class="tag">&lt;sp:Wss11</span> <span class="attribute-name">xmlns:sp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;wsp:Policy&gt;</span>
                        <span class="tag">&lt;sp:MustSupportRefKeyIdentifier</span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;sp:MustSupportRefIssuerSerial</span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;sp:MustSupportRefThumbprint</span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;sp:MustSupportRefEncryptedKey</span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;/wsp:Policy&gt;</span>
                <span class="tag">&lt;/sp:Wss11&gt;</span>
                <span class="tag">&lt;sp:Trust13</span> <span class="attribute-name">xmlns:sp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;wsp:Policy&gt;</span>
                        <span class="tag">&lt;sp:MustSupportIssuedTokens</span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;sp:RequireClientEntropy</span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;sp:RequireServerEntropy</span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;/wsp:Policy&gt;</span>
                <span class="tag">&lt;/sp:Trust13&gt;</span>
            <span class="tag">&lt;/wsp:All&gt;</span>
        <span class="tag">&lt;/wsp:ExactlyOne&gt;</span>
    <span class="tag">&lt;/wsp:Policy&gt;</span>
    <span class="tag">&lt;wsp:Policy</span> <span class="attribute-name">wsu:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Input_policy</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsp:ExactlyOne&gt;</span>
            <span class="tag">&lt;wsp:All&gt;</span>
                <span class="tag">&lt;sp:SignedParts</span> <span class="attribute-name">xmlns:sp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;sp:Body</span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">To</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">From</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FaultTo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ReplyTo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">MessageID</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RelatesTo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Action</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;/sp:SignedParts&gt;</span>
                <span class="tag">&lt;sp:EncryptedParts</span> <span class="attribute-name">xmlns:sp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;sp:Body</span><span class="tag">/&gt;</span>
                <span class="tag">&lt;/sp:EncryptedParts&gt;</span>
            <span class="tag">&lt;/wsp:All&gt;</span>
        <span class="tag">&lt;/wsp:ExactlyOne&gt;</span>
    <span class="tag">&lt;/wsp:Policy&gt;</span>
    <span class="tag">&lt;wsp:Policy</span> <span class="attribute-name">wsu:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Output_policy</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsp:ExactlyOne&gt;</span>
            <span class="tag">&lt;wsp:All&gt;</span>
                <span class="tag">&lt;sp:SignedParts</span> <span class="attribute-name">xmlns:sp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;sp:Body</span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">To</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">From</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FaultTo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ReplyTo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">MessageID</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RelatesTo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;sp:Header</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Action</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Namespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;/sp:SignedParts&gt;</span>
                <span class="tag">&lt;sp:EncryptedParts</span> <span class="attribute-name">xmlns:sp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;sp:Body</span><span class="tag">/&gt;</span>
                <span class="tag">&lt;/sp:EncryptedParts&gt;</span>
            <span class="tag">&lt;/wsp:All&gt;</span>
        <span class="tag">&lt;/wsp:ExactlyOne&gt;</span>
    <span class="tag">&lt;/wsp:Policy&gt;</span>
    <span class="tag">&lt;wsdl:service</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SecurityTokenService</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsdl:port</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">STS_Port</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:STS_Binding</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;soap:address</span> <span class="attribute-name">location</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://{FQDN}:{PORT}/services/SecurityTokenService</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/wsdl:port&gt;</span>
    <span class="tag">&lt;/wsdl:service&gt;</span>
<span class="tag">&lt;/wsdl:definitions&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_example_requests_and_responses_for_saml_assertions"><a class="anchor" href="#_example_requests_and_responses_for_saml_assertions"></a><a class="link" href="#_example_requests_and_responses_for_saml_assertions">1.15.1. Example Requests and Responses for SAML Assertions</a></h4>
<div class="paragraph">
<p>A client performs a RequestSecurityToken operation against the STS to receive a SAML assertion.
The DDF STS offers several different ways to request a SAML assertion.
For help in understanding the various request and response formats, samples have been provided.
The samples are divided out into different request token types.</p>
</div>
</div>
<div class="sect3">
<h4 id="_binarysecuritytoken_cas_saml_security_token_samples"><a class="anchor" href="#_binarysecuritytoken_cas_saml_security_token_samples"></a><a class="link" href="#_binarysecuritytoken_cas_saml_security_token_samples">1.15.2. BinarySecurityToken (CAS) SAML Security Token Samples</a></h4>
<div class="paragraph">
<p>Most endpoints in DDF require the X.509 PublicKey SAML assertion.</p>
</div>
<div class="listingblock">
<div class="title">BinarySecurityToken (CAS) SAML Security Token Sample Request</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre></td>
  <td class="code"><pre><span class="tag">&lt;soap:Envelope</span> <span class="attribute-name">xmlns:soap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/soap/envelope/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;soap:Header&gt;</span>
        <span class="tag">&lt;Action</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue<span class="tag">&lt;/Action&gt;</span>
        <span class="tag">&lt;MessageID</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>urn:uuid:60652909-faca-4e4a-a4a7-8a5ce243a7cb<span class="tag">&lt;/MessageID&gt;</span>
        <span class="tag">&lt;To</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>https://server:8993/services/SecurityTokenService<span class="tag">&lt;/To&gt;</span>
        <span class="tag">&lt;ReplyTo</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;Address&gt;</span>http://www.w3.org/2005/08/addressing/anonymous<span class="tag">&lt;/Address&gt;</span>
        <span class="tag">&lt;/ReplyTo&gt;</span>
        <span class="tag">&lt;wsse:Security</span> <span class="attribute-name">xmlns:wsse</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsu</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">soap:mustUnderstand</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsu:Timestamp</span> <span class="attribute-name">wsu:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TS-1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;wsu:Created&gt;</span>2013-04-29T18:35:10.688Z<span class="tag">&lt;/wsu:Created&gt;</span>
                <span class="tag">&lt;wsu:Expires&gt;</span>2013-04-29T18:40:10.688Z<span class="tag">&lt;/wsu:Expires&gt;</span>
            <span class="tag">&lt;/wsu:Timestamp&gt;</span>
        <span class="tag">&lt;/wsse:Security&gt;</span>
    <span class="tag">&lt;/soap:Header&gt;</span>
    <span class="tag">&lt;soap:Body&gt;</span>
        <span class="tag">&lt;wst:RequestSecurityToken</span> <span class="attribute-name">xmlns:wst</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wst:RequestType&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue<span class="tag">&lt;/wst:RequestType&gt;</span>
            <span class="tag">&lt;wsp:AppliesTo</span> <span class="attribute-name">xmlns:wsp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2004/09/policy</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;wsa:EndpointReference</span> <span class="attribute-name">xmlns:wsa</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;wsa:Address&gt;</span>https://server:8993/services/SecurityTokenService<span class="tag">&lt;/wsa:Address&gt;</span>
                <span class="tag">&lt;/wsa:EndpointReference&gt;</span>
            <span class="tag">&lt;/wsp:AppliesTo&gt;</span>
            <span class="tag">&lt;wst:Claims</span> <span class="attribute-name">xmlns:ic</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wst</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Dialect</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">xmlns:ic</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">xmlns:ic</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">xmlns:ic</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">xmlns:ic</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">xmlns:ic</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wst:Claims&gt;</span>
            <span class="tag">&lt;wst:OnBehalfOf&gt;</span>
                <span class="tag">&lt;BinarySecurityToken</span> <span class="attribute-name">ValueType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#CAS</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">EncodingType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ns1:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CAS</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>U1QtMTQtYUtmcDYxcFRtS0FxZG1pVDMzOWMtY2FzfGh0dHBzOi8vdG9rZW5pc3N1ZXI6ODk5My9zZXJ2aWNlcy9TZWN1cml0eVRva2VuU2VydmljZQ==<span class="tag">&lt;/BinarySecurityToken&gt;</span>
            <span class="tag">&lt;/wst:OnBehalfOf&gt;</span>
            <span class="tag">&lt;wst:TokenType&gt;</span>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0<span class="tag">&lt;/wst:TokenType&gt;</span>
            <span class="tag">&lt;wst:KeyType&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/PublicKey<span class="tag">&lt;/wst:KeyType&gt;</span>
            <span class="tag">&lt;wst:UseKey&gt;</span>
                <span class="tag">&lt;ds:KeyInfo</span> <span class="attribute-name">xmlns:ds</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;ds:X509Data&gt;</span>
                        <span class="tag">&lt;ds:X509Certificate&gt;</span>
MIIC5DCCAk2gAwIBAgIJAKj7ROPHjo1yMA0GCSqGSIb3DQEBCwUAMIGKMQswCQYDVQQGEwJVUzEQ
MA4GA1UECAwHQXJpem9uYTERMA8GA1UEBwwIR29vZHllYXIxGDAWBgNVBAoMD0xvY2toZWVkIE1h
cnRpbjENMAsGA1UECwwESTRDRTEPMA0GA1UEAwwGY2xpZW50MRwwGgYJKoZIhvcNAQkBFg1pNGNl
QGxtY28uY29tMB4XDTEyMDYyMDE5NDMwOVoXDTIyMDYxODE5NDMwOVowgYoxCzAJBgNVBAYTAlVT
MRAwDgYDVQQIDAdBcml6b25hMREwDwYDVQQHDAhHb29keWVhcjEYMBYGA1UECgwPTG9ja2hlZWQg
TWFydGluMQ0wCwYDVQQLDARJNENFMQ8wDQYDVQQDDAZjbGllbnQxHDAaBgkqhkiG9w0BCQEWDWk0
Y2VAbG1jby5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAIpHxCBLYE7xfDLcITS9SsPG
4Q04Z6S32/+TriGsRgpGTj/7GuMG7oJ98m6Ws5cTYl7nyunyHTkZuP7rBzy4esDIHheyx18EgdSJ
vvACgGVCnEmHndkf9bWUlAOfNaxW+vZwljUkRUVdkhPbPdPwOcMdKg/SsLSNjZfsQIjoWd4rAgMB
AAGjUDBOMB0GA1UdDgQWBBQx11VLtYXLvFGpFdHnhlNW9+lxBDAfBgNVHSMEGDAWgBQx11VLtYXL
vFGpFdHnhlNW9+lxBDAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBCwUAA4GBAHYs2OI0K6yVXzyS
sKcv2fmfw6XCICGTnyA7BOdAjYoqq6wD+33dHJUCFDqye7AWdcivuc7RWJt9jnlfJZKIm2BHcDTR
Hhk6CvjJ14Gf40WQdeMHoX8U8b0diq7Iy5Ravx+zRg7SdiyJUqFYjRh/O5tywXRT1+freI3bwAN0
L6tQ
<span class="tag">&lt;/ds:X509Certificate&gt;</span>
                    <span class="tag">&lt;/ds:X509Data&gt;</span>
                <span class="tag">&lt;/ds:KeyInfo&gt;</span>
            <span class="tag">&lt;/wst:UseKey&gt;</span>
            <span class="tag">&lt;wst:Renewing</span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/wst:RequestSecurityToken&gt;</span>
    <span class="tag">&lt;/soap:Body&gt;</span>
<span class="tag">&lt;/soap:Envelope&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">BinarySecurityToken (CAS) SAML Security Token Sample Response</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
</pre></td>
  <td class="code"><pre><span class="tag">&lt;soap:Envelope</span> <span class="attribute-name">xmlns:soap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/soap/envelope/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;soap:Header&gt;</span>
        <span class="tag">&lt;Action</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTRC/IssueFinal<span class="tag">&lt;/Action&gt;</span>
        <span class="tag">&lt;MessageID</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>urn:uuid:7a6fde04-9013-41ef-b08b-0689ffa9c93e<span class="tag">&lt;/MessageID&gt;</span>
        <span class="tag">&lt;To</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://www.w3.org/2005/08/addressing/anonymous<span class="tag">&lt;/To&gt;</span>
        <span class="tag">&lt;RelatesTo</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>urn:uuid:60652909-faca-4e4a-a4a7-8a5ce243a7cb<span class="tag">&lt;/RelatesTo&gt;</span>
        <span class="tag">&lt;wsse:Security</span> <span class="attribute-name">xmlns:wsse</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsu</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">soap:mustUnderstand</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsu:Timestamp</span> <span class="attribute-name">wsu:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TS-2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;wsu:Created&gt;</span>2013-04-29T18:35:11.459Z<span class="tag">&lt;/wsu:Created&gt;</span>
                <span class="tag">&lt;wsu:Expires&gt;</span>2013-04-29T18:40:11.459Z<span class="tag">&lt;/wsu:Expires&gt;</span>
            <span class="tag">&lt;/wsu:Timestamp&gt;</span>
        <span class="tag">&lt;/wsse:Security&gt;</span>
    <span class="tag">&lt;/soap:Header&gt;</span>
    <span class="tag">&lt;soap:Body&gt;</span>
        <span class="tag">&lt;RequestSecurityTokenResponseCollection</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns3</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns4</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns5</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200802</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;RequestSecurityTokenResponse&gt;</span>
                <span class="tag">&lt;TokenType&gt;</span>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0<span class="tag">&lt;/TokenType&gt;</span>
                <span class="tag">&lt;RequestedSecurityToken&gt;</span>
                    <span class="tag">&lt;saml2:Assertion</span> <span class="attribute-name">xmlns:saml2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:assertion</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ID</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">_BDC44EB8593F47D1B213672605113671</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">IssueInstant</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2013-04-29T18:35:11.370Z</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">saml2:AssertionType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;saml2:Issuer&gt;</span>tokenissuer<span class="tag">&lt;/saml2:Issuer&gt;</span>
                        <span class="tag">&lt;ds:Signature</span> <span class="attribute-name">xmlns:ds</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                            <span class="tag">&lt;ds:SignedInfo&gt;</span>
                                <span class="tag">&lt;ds:CanonicalizationMethod</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/10/xml-exc-c14n#</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                <span class="tag">&lt;ds:SignatureMethod</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#rsa-sha1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                <span class="tag">&lt;ds:Reference</span> <span class="attribute-name">URI</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#_BDC44EB8593F47D1B213672605113671</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                    <span class="tag">&lt;ds:Transforms&gt;</span>
                                        <span class="tag">&lt;ds:Transform</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#enveloped-signature</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                        <span class="tag">&lt;ds:Transform</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/10/xml-exc-c14n#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                            <span class="tag">&lt;ec:InclusiveNamespaces</span> <span class="attribute-name">xmlns:ec</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/10/xml-exc-c14n#</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">PrefixList</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                        <span class="tag">&lt;/ds:Transform&gt;</span>
                                    <span class="tag">&lt;/ds:Transforms&gt;</span>
                                    <span class="tag">&lt;ds:DigestMethod</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#sha1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                    <span class="tag">&lt;ds:DigestValue&gt;</span>6wnWbft6Pz5XOF5Q9AG59gcGwLY=<span class="tag">&lt;/ds:DigestValue&gt;</span>
                                <span class="tag">&lt;/ds:Reference&gt;</span>
                            <span class="tag">&lt;/ds:SignedInfo&gt;</span>
                            <span class="tag">&lt;ds:SignatureValue&gt;</span>h+NvkgXGdQtca3/eKebhAKgG38tHp3i2n5uLLy8xXXIg02qyKgEP0FCowp2LiYlsQU9YjKfSwCUbH3WR6jhbAv9zj29CE+ePfEny7MeXvgNl3wId+vcHqti/DGGhhgtO2Mbx/tyX1BhHQUwKRlcHajxHeecwmvV7D85NMdV48tI=<span class="tag">&lt;/ds:SignatureValue&gt;</span>
                            <span class="tag">&lt;ds:KeyInfo&gt;</span>
                                <span class="tag">&lt;ds:X509Data&gt;</span>
                                    <span class="tag">&lt;ds:X509Certificate&gt;</span>MIIDmjCCAwOgAwIBAgIBBDANBgkqhkiG9w0BAQQFADB1MQswCQYDVQQGEwJVUzEQMA4GA1UECBMH
QXJpem9uYTERMA8GA1UEBxMIR29vZHllYXIxEDAOBgNVBAoTB0V4YW1wbGUxEDAOBgNVBAoTB0V4
YW1wbGUxEDAOBgNVBAsTB0V4YW1wbGUxCzAJBgNVBAMTAkNBMB4XDTEzMDQwOTE4MzcxMVoXDTIz
MDQwNzE4MzcxMVowgaYxCzAJBgNVBAYTAlVTMRAwDgYDVQQIEwdBcml6b25hMREwDwYDVQQHEwhH
b29keWVhcjEQMA4GA1UEChMHRXhhbXBsZTEQMA4GA1UEChMHRXhhbXBsZTEQMA4GA1UECxMHRXhh
bXBsZTEUMBIGA1UEAxMLdG9rZW5pc3N1ZXIxJjAkBgkqhkiG9w0BCQEWF3Rva2VuaXNzdWVyQGV4
YW1wbGUuY29tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDfktpA8Lrp9rTfRibKdgtxtN9
uB44diiIqq3JOzDGfDhGLu6mjpuHO1hrKItv42hBOhhmH7lS9ipiaQCIpVfgIG63MB7fa5dBrfGF
G69vFrU1Lfi7IvsVVsNrtAEQljOMmw9sxS3SUsRQX+bD8jq7Uj1hpoF7DdqpV8Kb0COOGwIDAQAB
o4IBBjCCAQIwCQYDVR0TBAIwADAsBglghkgBhvhCAQ0EHxYdT3BlblNTTCBHZW5lcmF0ZWQgQ2Vy
dGlmaWNhdGUwHQYDVR0OBBYEFD1mHviop2Tc4HaNu8yPXR6GqWP1MIGnBgNVHSMEgZ8wgZyAFBcn
en6/j05DzaVwORwrteKc7TZOoXmkdzB1MQswCQYDVQQGEwJVUzEQMA4GA1UECBMHQXJpem9uYTER
MA8GA1UEBxMIR29vZHllYXIxEDAOBgNVBAoTB0V4YW1wbGUxEDAOBgNVBAoTB0V4YW1wbGUxEDAO
BgNVBAsTB0V4YW1wbGUxCzAJBgNVBAMTAkNBggkAwXk7OcwO7gwwDQYJKoZIhvcNAQEEBQADgYEA
PiTX5kYXwdhmijutSkrObKpRbQkvkkzcyZlO6VrAxRQ+eFeN6NyuyhgYy5K6l/sIWdaGou5iJOQx
2pQYWx1v8Klyl0W22IfEAXYv/epiO89hpdACryuDJpioXI/X8TAwvRwLKL21Dk3k2b+eyCgA0O++
HM0dPfiQLQ99ElWkv/0=<span class="tag">&lt;/ds:X509Certificate&gt;</span>
                                <span class="tag">&lt;/ds:X509Data&gt;</span>
                            <span class="tag">&lt;/ds:KeyInfo&gt;</span>
                        <span class="tag">&lt;/ds:Signature&gt;</span>
                        <span class="tag">&lt;saml2:Subject&gt;</span>
                            <span class="tag">&lt;saml2:NameID</span> <span class="attribute-name">Format</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameQualifier</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://cxf.apache.org/sts</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>srogers<span class="tag">&lt;/saml2:NameID&gt;</span>
                            <span class="tag">&lt;saml2:SubjectConfirmation</span> <span class="attribute-name">Method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:cm:holder-of-key</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:SubjectConfirmationData</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">saml2:KeyInfoConfirmationDataType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                    <span class="tag">&lt;ds:KeyInfo</span> <span class="attribute-name">xmlns:ds</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;ds:X509Data&gt;</span>
                                            <span class="tag">&lt;ds:X509Certificate&gt;</span>MIIC5DCCAk2gAwIBAgIJAKj7ROPHjo1yMA0GCSqGSIb3DQEBCwUAMIGKMQswCQYDVQQGEwJVUzEQ
MA4GA1UECAwHQXJpem9uYTERMA8GA1UEBwwIR29vZHllYXIxGDAWBgNVBAoMD0xvY2toZWVkIE1h
cnRpbjENMAsGA1UECwwESTRDRTEPMA0GA1UEAwwGY2xpZW50MRwwGgYJKoZIhvcNAQkBFg1pNGNl
QGxtY28uY29tMB4XDTEyMDYyMDE5NDMwOVoXDTIyMDYxODE5NDMwOVowgYoxCzAJBgNVBAYTAlVT
MRAwDgYDVQQIDAdBcml6b25hMREwDwYDVQQHDAhHb29keWVhcjEYMBYGA1UECgwPTG9ja2hlZWQg
TWFydGluMQ0wCwYDVQQLDARJNENFMQ8wDQYDVQQDDAZjbGllbnQxHDAaBgkqhkiG9w0BCQEWDWk0
Y2VAbG1jby5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAIpHxCBLYE7xfDLcITS9SsPG
4Q04Z6S32/+TriGsRgpGTj/7GuMG7oJ98m6Ws5cTYl7nyunyHTkZuP7rBzy4esDIHheyx18EgdSJ
vvACgGVCnEmHndkf9bWUlAOfNaxW+vZwljUkRUVdkhPbPdPwOcMdKg/SsLSNjZfsQIjoWd4rAgMB
AAGjUDBOMB0GA1UdDgQWBBQx11VLtYXLvFGpFdHnhlNW9+lxBDAfBgNVHSMEGDAWgBQx11VLtYXL
vFGpFdHnhlNW9+lxBDAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBCwUAA4GBAHYs2OI0K6yVXzyS
sKcv2fmfw6XCICGTnyA7BOdAjYoqq6wD+33dHJUCFDqye7AWdcivuc7RWJt9jnlfJZKIm2BHcDTR
Hhk6CvjJ14Gf40WQdeMHoX8U8b0diq7Iy5Ravx+zRg7SdiyJUqFYjRh/O5tywXRT1+freI3bwAN0
L6tQ<span class="tag">&lt;/ds:X509Certificate&gt;</span>
                                        <span class="tag">&lt;/ds:X509Data&gt;</span>
                                    <span class="tag">&lt;/ds:KeyInfo&gt;</span>
                                <span class="tag">&lt;/saml2:SubjectConfirmationData&gt;</span>
                            <span class="tag">&lt;/saml2:SubjectConfirmation&gt;</span>
                        <span class="tag">&lt;/saml2:Subject&gt;</span>
                        <span class="tag">&lt;saml2:Conditions</span> <span class="attribute-name">NotBefore</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2013-04-29T18:35:11.407Z</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NotOnOrAfter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2013-04-29T19:05:11.407Z</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                            <span class="tag">&lt;saml2:AudienceRestriction&gt;</span>
                                <span class="tag">&lt;saml2:Audience&gt;</span>https://server:8993/services/SecurityTokenService<span class="tag">&lt;/saml2:Audience&gt;</span>
                            <span class="tag">&lt;/saml2:AudienceRestriction&gt;</span>
                        <span class="tag">&lt;/saml2:Conditions&gt;</span>
                        <span class="tag">&lt;saml2:AuthnStatement</span> <span class="attribute-name">AuthnInstant</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2013-04-29T18:35:11.392Z</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                            <span class="tag">&lt;saml2:AuthnContext&gt;</span>
                                <span class="tag">&lt;saml2:AuthnContextClassRef&gt;</span>urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified<span class="tag">&lt;/saml2:AuthnContextClassRef&gt;</span>
                            <span class="tag">&lt;/saml2:AuthnContext&gt;</span>
                        <span class="tag">&lt;/saml2:AuthnStatement&gt;</span>
                        <span class="tag">&lt;saml2:AttributeStatement&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>srogers<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>srogers@example.com<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>srogers<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Steve Rogers<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>avengers<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>admin<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                        <span class="tag">&lt;/saml2:AttributeStatement&gt;</span>
                    <span class="tag">&lt;/saml2:Assertion&gt;</span>
                <span class="tag">&lt;/RequestedSecurityToken&gt;</span>
                <span class="tag">&lt;RequestedAttachedReference&gt;</span>
                    <span class="tag">&lt;ns3:SecurityTokenReference</span> <span class="attribute-name">xmlns:wsse11</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">wsse11:TokenType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;ns3:KeyIdentifier</span> <span class="attribute-name">ValueType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>_BDC44EB8593F47D1B213672605113671<span class="tag">&lt;/ns3:KeyIdentifier&gt;</span>
                    <span class="tag">&lt;/ns3:SecurityTokenReference&gt;</span>
                <span class="tag">&lt;/RequestedAttachedReference&gt;</span>
                <span class="tag">&lt;RequestedUnattachedReference&gt;</span>
                    <span class="tag">&lt;ns3:SecurityTokenReference</span> <span class="attribute-name">xmlns:wsse11</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">wsse11:TokenType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;ns3:KeyIdentifier</span> <span class="attribute-name">ValueType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>_BDC44EB8593F47D1B213672605113671<span class="tag">&lt;/ns3:KeyIdentifier&gt;</span>
                    <span class="tag">&lt;/ns3:SecurityTokenReference&gt;</span>
                <span class="tag">&lt;/RequestedUnattachedReference&gt;</span>
                <span class="tag">&lt;wsp:AppliesTo</span> <span class="attribute-name">xmlns:wsp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2004/09/policy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wst</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;wsa:EndpointReference</span> <span class="attribute-name">xmlns:wsa</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;wsa:Address&gt;</span>https://server:8993/services/SecurityTokenService<span class="tag">&lt;/wsa:Address&gt;</span>
                    <span class="tag">&lt;/wsa:EndpointReference&gt;</span>
                <span class="tag">&lt;/wsp:AppliesTo&gt;</span>
                <span class="tag">&lt;Lifetime&gt;</span>
                    <span class="tag">&lt;ns2:Created&gt;</span>2013-04-29T18:35:11.444Z<span class="tag">&lt;/ns2:Created&gt;</span>
                    <span class="tag">&lt;ns2:Expires&gt;</span>2013-04-29T19:05:11.444Z<span class="tag">&lt;/ns2:Expires&gt;</span>
                <span class="tag">&lt;/Lifetime&gt;</span>
            <span class="tag">&lt;/RequestSecurityTokenResponse&gt;</span>
        <span class="tag">&lt;/RequestSecurityTokenResponseCollection&gt;</span>
    <span class="tag">&lt;/soap:Body&gt;</span>
<span class="tag">&lt;/soap:Envelope&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>To obtain a SAML assertion to use in secure communication to DDF, a RequestSecurityToken (RST) request has to be made to the STS.</p>
</div>
<div class="paragraph">
<p>A Bearer SAML assertion is automatically trusted by the endpoint.
The client doesn&#8217;t have to prove it can own that SAML assertion.
It is the simplest way to request a SAML assertion, but many endpoints won&#8217;t accept a KeyType of Bearer.</p>
</div>
</div>
<div class="sect3">
<h4 id="_usernametoken_bearer_saml_security_token_sample"><a class="anchor" href="#_usernametoken_bearer_saml_security_token_sample"></a><a class="link" href="#_usernametoken_bearer_saml_security_token_sample">1.15.3. UsernameToken Bearer SAML Security Token Sample</a></h4>
<div class="ulist">
<ul>
<li>
<p>WS-Addressing header with Action, To, and Message ID</p>
</li>
<li>
<p>Valid, non-expired timestamp</p>
</li>
<li>
<p>Username Token containing a username and password that the STS will authenticate</p>
</li>
<li>
<p>Issued over HTTPS</p>
</li>
<li>
<p>KeyType of <a href="http://docs.oasis-open.org/ws-sx/ws-trust/200512/Bearer" class="bare">http://docs.oasis-open.org/ws-sx/ws-trust/200512/Bearer</a></p>
</li>
<li>
<p>Claims (optional): Some endpoints may require that the SAML assertion include attributes of the user, such as an authenticated user&#8217;s role, name identifier, email address, etc. If the SAML assertion needs those attributes, the <code>RequestSecurityToken</code> must specify which ones to include.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">UsernameToken Bearer SAML Security Token Sample Request</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td>
  <td class="code"><pre><span class="tag">&lt;soap:Envelope</span> <span class="attribute-name">xmlns:soap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/soap/envelope/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;soap:Header</span> <span class="attribute-name">xmlns:wsa</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wsse:Security</span> <span class="attribute-name">xmlns:wsse</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsu</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">soap:mustUnderstand</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsu:Timestamp</span> <span class="attribute-name">wsu:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TS-1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;wsu:Created&gt;</span>2013-04-29T17:47:37.817Z<span class="tag">&lt;/wsu:Created&gt;</span>
                <span class="tag">&lt;wsu:Expires&gt;</span>2013-04-29T17:57:37.817Z<span class="tag">&lt;/wsu:Expires&gt;</span>
            <span class="tag">&lt;/wsu:Timestamp&gt;</span>
            <span class="tag">&lt;wsse:UsernameToken</span> <span class="attribute-name">wsu:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UsernameToken-1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;wsse:Username&gt;</span>srogers<span class="tag">&lt;/wsse:Username&gt;</span>
                <span class="tag">&lt;wsse:Password</span> <span class="attribute-name">Type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>password1<span class="tag">&lt;/wsse:Password&gt;</span>
            <span class="tag">&lt;/wsse:UsernameToken&gt;</span>
        <span class="tag">&lt;/wsse:Security&gt;</span>
        <span class="tag">&lt;wsa:Action&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue<span class="tag">&lt;/wsa:Action&gt;</span>
        <span class="tag">&lt;wsa:MessageID&gt;</span>uuid:a1bba87b-0f00-46cc-975f-001391658cbe<span class="tag">&lt;/wsa:MessageID&gt;</span>
        <span class="tag">&lt;wsa:To&gt;</span>https://server:8993/services/SecurityTokenService<span class="tag">&lt;/wsa:To&gt;</span>
    <span class="tag">&lt;/soap:Header&gt;</span>
    <span class="tag">&lt;soap:Body&gt;</span>
        <span class="tag">&lt;wst:RequestSecurityToken</span> <span class="attribute-name">xmlns:wst</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wst:SecondaryParameters&gt;</span>
                <span class="tag">&lt;t:TokenType</span> <span class="attribute-name">xmlns:t</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0<span class="tag">&lt;/t:TokenType&gt;</span>
                <span class="tag">&lt;t:KeyType</span> <span class="attribute-name">xmlns:t</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Bearer<span class="tag">&lt;/t:KeyType&gt;</span>
                <span class="tag">&lt;t:Claims</span> <span class="attribute-name">xmlns:ic</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:t</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Dialect</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="comment">&lt;!--Add any additional claims you want to grab for the service--&gt;</span>
                    <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/uid</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                    <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;/t:Claims&gt;</span>
            <span class="tag">&lt;/wst:SecondaryParameters&gt;</span>
            <span class="tag">&lt;wst:RequestType&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue<span class="tag">&lt;/wst:RequestType&gt;</span>
            <span class="tag">&lt;wsp:AppliesTo</span> <span class="attribute-name">xmlns:wsp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2004/09/policy</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;wsa:EndpointReference</span> <span class="attribute-name">xmlns:wsa</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;wsa:Address&gt;</span>https://server:8993/services/QueryService<span class="tag">&lt;/wsa:Address&gt;</span>
                <span class="tag">&lt;/wsa:EndpointReference&gt;</span>
            <span class="tag">&lt;/wsp:AppliesTo&gt;</span>
            <span class="tag">&lt;wst:Renewing</span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/wst:RequestSecurityToken&gt;</span>
    <span class="tag">&lt;/soap:Body&gt;</span>
<span class="tag">&lt;/soap:Envelope&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the response from the STS containing the SAML assertion to be used in subsequent requests to QCRUD endpoints:</p>
</div>
<div class="paragraph">
<p>The <code>saml2:Assertion</code> block contains the entire SAML assertion.</p>
</div>
<div class="paragraph">
<p>The <code>Signature</code> block contains a signature from the STS&#8217;s private key.
The endpoint receiving the SAML assertion will verify that it trusts the signer and ensure that the message wasn&#8217;t tampered with.</p>
</div>
<div class="paragraph">
<p>The <code>AttributeStatement</code> block contains all the Claims requested.</p>
</div>
<div class="paragraph">
<p>The <code>Lifetime</code> block indicates the valid time interval in which the SAML assertion can be used.</p>
</div>
<div class="listingblock">
<div class="title">UsernameToken Bearer SAML Security Token Sample Response</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
</pre></td>
  <td class="code"><pre><span class="tag">&lt;soap:Envelope</span> <span class="attribute-name">xmlns:soap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/soap/envelope/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;soap:Header&gt;</span>
        <span class="tag">&lt;Action</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTRC/IssueFinal<span class="tag">&lt;/Action&gt;</span>
        <span class="tag">&lt;MessageID</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>urn:uuid:eee4c6ef-ac10-4cbc-a53c-13d960e3b6e8<span class="tag">&lt;/MessageID&gt;</span>
        <span class="tag">&lt;To</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://www.w3.org/2005/08/addressing/anonymous<span class="tag">&lt;/To&gt;</span>
        <span class="tag">&lt;RelatesTo</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>uuid:a1bba87b-0f00-46cc-975f-001391658cbe<span class="tag">&lt;/RelatesTo&gt;</span>
        <span class="tag">&lt;wsse:Security</span> <span class="attribute-name">xmlns:wsse</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsu</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">soap:mustUnderstand</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsu:Timestamp</span> <span class="attribute-name">wsu:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TS-2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;wsu:Created&gt;</span>2013-04-29T17:49:12.624Z<span class="tag">&lt;/wsu:Created&gt;</span>
                <span class="tag">&lt;wsu:Expires&gt;</span>2013-04-29T17:54:12.624Z<span class="tag">&lt;/wsu:Expires&gt;</span>
            <span class="tag">&lt;/wsu:Timestamp&gt;</span>
        <span class="tag">&lt;/wsse:Security&gt;</span>
    <span class="tag">&lt;/soap:Header&gt;</span>
    <span class="tag">&lt;soap:Body&gt;</span>
        <span class="tag">&lt;RequestSecurityTokenResponseCollection</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns3</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns4</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns5</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200802</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;RequestSecurityTokenResponse&gt;</span>
                <span class="tag">&lt;TokenType&gt;</span>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0<span class="tag">&lt;/TokenType&gt;</span>
                <span class="tag">&lt;RequestedSecurityToken&gt;</span>
                    <span class="tag">&lt;saml2:Assertion</span> <span class="attribute-name">xmlns:saml2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:assertion</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ID</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">_7437C1A55F19AFF22113672577526132</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">IssueInstant</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2013-04-29T17:49:12.613Z</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">saml2:AssertionType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;saml2:Issuer&gt;</span>tokenissuer<span class="tag">&lt;/saml2:Issuer&gt;</span>
                        <span class="tag">&lt;ds:Signature</span> <span class="attribute-name">xmlns:ds</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                            <span class="tag">&lt;ds:SignedInfo&gt;</span>
                                <span class="tag">&lt;ds:CanonicalizationMethod</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/10/xml-exc-c14n#</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                <span class="tag">&lt;ds:SignatureMethod</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#rsa-sha1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                <span class="tag">&lt;ds:Reference</span> <span class="attribute-name">URI</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#_7437C1A55F19AFF22113672577526132</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                    <span class="tag">&lt;ds:Transforms&gt;</span>
                                        <span class="tag">&lt;ds:Transform</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#enveloped-signature</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                        <span class="tag">&lt;ds:Transform</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/10/xml-exc-c14n#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                            <span class="tag">&lt;ec:InclusiveNamespaces</span> <span class="attribute-name">xmlns:ec</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/10/xml-exc-c14n#</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">PrefixList</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                        <span class="tag">&lt;/ds:Transform&gt;</span>
                                    <span class="tag">&lt;/ds:Transforms&gt;</span>
                                    <span class="tag">&lt;ds:DigestMethod</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#sha1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                                    <span class="tag">&lt;ds:DigestValue&gt;</span>ReOqEbGZlyplW5kqiynXOjPnVEA=<span class="tag">&lt;/ds:DigestValue&gt;</span>
                                <span class="tag">&lt;/ds:Reference&gt;</span>
                            <span class="tag">&lt;/ds:SignedInfo&gt;</span>
                            <span class="tag">&lt;ds:SignatureValue&gt;</span>X5Kzd54PrKIlGVV2XxzCmWFRzHRoybF7hU6zxbEhSLMR0AWS9R7Me3epq91XqeOwvIDDbwmE/oJNC7vI0fIw/rqXkx4aZsY5a5nbAs7f+aXF9TGdk82x2eNhNGYpViq0YZJfsJ5WSyMtG8w5nRekmDMy9oTLsHG+Y/OhJDEwq58=<span class="tag">&lt;/ds:SignatureValue&gt;</span>
                            <span class="tag">&lt;ds:KeyInfo&gt;</span>
                                <span class="tag">&lt;ds:X509Data&gt;</span>
                                    <span class="tag">&lt;ds:X509Certificate&gt;</span>MIIDmjCCAwOgAwIBAgIBBDANBgkqhkiG9w0BAQQFADB1MQswCQYDVQQGEwJVUzEQMA4GA1UECBMH
QXJpem9uYTERMA8GA1UEBxMIR29vZHllYXIxEDAOBgNVBAoTB0V4YW1wbGUxEDAOBgNVBAoTB0V4
YW1wbGUxEDAOBgNVBAsTB0V4YW1wbGUxCzAJBgNVBAMTAkNBMB4XDTEzMDQwOTE4MzcxMVoXDTIz
MDQwNzE4MzcxMVowgaYxCzAJBgNVBAYTAlVTMRAwDgYDVQQIEwdBcml6b25hMREwDwYDVQQHEwhH
b29keWVhcjEQMA4GA1UEChMHRXhhbXBsZTEQMA4GA1UEChMHRXhhbXBsZTEQMA4GA1UECxMHRXhh
bXBsZTEUMBIGA1UEAxMLdG9rZW5pc3N1ZXIxJjAkBgkqhkiG9w0BCQEWF3Rva2VuaXNzdWVyQGV4
YW1wbGUuY29tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDfktpA8Lrp9rTfRibKdgtxtN9
uB44diiIqq3JOzDGfDhGLu6mjpuHO1hrKItv42hBOhhmH7lS9ipiaQCIpVfgIG63MB7fa5dBrfGF
G69vFrU1Lfi7IvsVVsNrtAEQljOMmw9sxS3SUsRQX+bD8jq7Uj1hpoF7DdqpV8Kb0COOGwIDAQAB
o4IBBjCCAQIwCQYDVR0TBAIwADAsBglghkgBhvhCAQ0EHxYdT3BlblNTTCBHZW5lcmF0ZWQgQ2Vy
dGlmaWNhdGUwHQYDVR0OBBYEFD1mHviop2Tc4HaNu8yPXR6GqWP1MIGnBgNVHSMEgZ8wgZyAFBcn
en6/j05DzaVwORwrteKc7TZOoXmkdzB1MQswCQYDVQQGEwJVUzEQMA4GA1UECBMHQXJpem9uYTER
MA8GA1UEBxMIR29vZHllYXIxEDAOBgNVBAoTB0V4YW1wbGUxEDAOBgNVBAoTB0V4YW1wbGUxEDAO
BgNVBAsTB0V4YW1wbGUxCzAJBgNVBAMTAkNBggkAwXk7OcwO7gwwDQYJKoZIhvcNAQEEBQADgYEA
PiTX5kYXwdhmijutSkrObKpRbQkvkkzcyZlO6VrAxRQ+eFeN6NyuyhgYy5K6l/sIWdaGou5iJOQx
2pQYWx1v8Klyl0W22IfEAXYv/epiO89hpdACryuDJpioXI/X8TAwvRwLKL21Dk3k2b+eyCgA0O++
HM0dPfiQLQ99ElWkv/0=<span class="tag">&lt;/ds:X509Certificate&gt;</span>
                                <span class="tag">&lt;/ds:X509Data&gt;</span>
                            <span class="tag">&lt;/ds:KeyInfo&gt;</span>
                        <span class="tag">&lt;/ds:Signature&gt;</span>
                        <span class="tag">&lt;saml2:Subject&gt;</span>
                            <span class="tag">&lt;saml2:NameID</span> <span class="attribute-name">Format</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameQualifier</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://cxf.apache.org/sts</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>srogers<span class="tag">&lt;/saml2:NameID&gt;</span>
                            <span class="tag">&lt;saml2:SubjectConfirmation</span> <span class="attribute-name">Method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:cm:bearer</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;/saml2:Subject&gt;</span>
                        <span class="tag">&lt;saml2:Conditions</span> <span class="attribute-name">NotBefore</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2013-04-29T17:49:12.614Z</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NotOnOrAfter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2013-04-29T18:19:12.614Z</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                            <span class="tag">&lt;saml2:AudienceRestriction&gt;</span>
                                <span class="tag">&lt;saml2:Audience&gt;</span>https://server:8993/services/QueryService<span class="tag">&lt;/saml2:Audience&gt;</span>
                            <span class="tag">&lt;/saml2:AudienceRestriction&gt;</span>
                        <span class="tag">&lt;/saml2:Conditions&gt;</span>
                        <span class="tag">&lt;saml2:AuthnStatement</span> <span class="attribute-name">AuthnInstant</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2013-04-29T17:49:12.613Z</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                            <span class="tag">&lt;saml2:AuthnContext&gt;</span>
                                <span class="tag">&lt;saml2:AuthnContextClassRef&gt;</span>urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified<span class="tag">&lt;/saml2:AuthnContextClassRef&gt;</span>
                            <span class="tag">&lt;/saml2:AuthnContext&gt;</span>
                        <span class="tag">&lt;/saml2:AuthnStatement&gt;</span>
                        <span class="tag">&lt;saml2:AttributeStatement&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>srogers<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>srogers@example.com<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>srogers<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Steve Rogers<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>avengers<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                            <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>admin<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                            <span class="tag">&lt;/saml2:Attribute&gt;</span>
                        <span class="tag">&lt;/saml2:AttributeStatement&gt;</span>
                    <span class="tag">&lt;/saml2:Assertion&gt;</span>
                <span class="tag">&lt;/RequestedSecurityToken&gt;</span>
                <span class="tag">&lt;RequestedAttachedReference&gt;</span>
                    <span class="tag">&lt;ns3:SecurityTokenReference</span> <span class="attribute-name">xmlns:wsse11</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">wsse11:TokenType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;ns3:KeyIdentifier</span> <span class="attribute-name">ValueType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>_7437C1A55F19AFF22113672577526132<span class="tag">&lt;/ns3:KeyIdentifier&gt;</span>
                    <span class="tag">&lt;/ns3:SecurityTokenReference&gt;</span>
                <span class="tag">&lt;/RequestedAttachedReference&gt;</span>
                <span class="tag">&lt;RequestedUnattachedReference&gt;</span>
                    <span class="tag">&lt;ns3:SecurityTokenReference</span> <span class="attribute-name">xmlns:wsse11</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">wsse11:TokenType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;ns3:KeyIdentifier</span> <span class="attribute-name">ValueType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>_7437C1A55F19AFF22113672577526132<span class="tag">&lt;/ns3:KeyIdentifier&gt;</span>
                    <span class="tag">&lt;/ns3:SecurityTokenReference&gt;</span>
                <span class="tag">&lt;/RequestedUnattachedReference&gt;</span>
                <span class="tag">&lt;wsp:AppliesTo</span> <span class="attribute-name">xmlns:wsp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2004/09/policy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wst</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;wsa:EndpointReference</span> <span class="attribute-name">xmlns:wsa</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;wsa:Address&gt;</span>https://server:8993/services/QueryService<span class="tag">&lt;/wsa:Address&gt;</span>
                    <span class="tag">&lt;/wsa:EndpointReference&gt;</span>
                <span class="tag">&lt;/wsp:AppliesTo&gt;</span>
                <span class="tag">&lt;Lifetime&gt;</span>
                    <span class="tag">&lt;ns2:Created&gt;</span>2013-04-29T17:49:12.620Z<span class="tag">&lt;/ns2:Created&gt;</span>
                    <span class="tag">&lt;ns2:Expires&gt;</span>2013-04-29T18:19:12.620Z<span class="tag">&lt;/ns2:Expires&gt;</span>
                <span class="tag">&lt;/Lifetime&gt;</span>
            <span class="tag">&lt;/RequestSecurityTokenResponse&gt;</span>
        <span class="tag">&lt;/RequestSecurityTokenResponseCollection&gt;</span>
    <span class="tag">&lt;/soap:Body&gt;</span>
<span class="tag">&lt;/soap:Envelope&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to obtain a SAML assertion to use in secure communication to DDF, a <code>RequestSecurityToken</code> (RST) request has to be made to the STS.</p>
</div>
<div class="paragraph">
<p>An endpoint&#8217;s policy will specify the type of security token needed.
Most of the endpoints that have been used with DDF require a SAML v2.0 assertion with a required KeyType of <a href="http://docs.oasis-open.org/ws-sx/ws-trust/200512/PublicKey" class="bare">http://docs.oasis-open.org/ws-sx/ws-trust/200512/PublicKey</a>.
This means that the SAML assertion provided by the client to a DDF endpoint must contain a SubjectConfirmation block with a type of "holder-of-key" containing the client&#8217;s public key.
This is used to prove that the client can possess the SAML assertion returned by the STS.</p>
</div>
</div>
<div class="sect3">
<h4 id="_x_509_publickey_saml_security_token_sample"><a class="anchor" href="#_x_509_publickey_saml_security_token_sample"></a><a class="link" href="#_x_509_publickey_saml_security_token_sample">1.15.4. X.509 PublicKey SAML Security Token Sample</a></h4>
<div class="paragraph">
<div class="title">X.509 PublicKey SAML Security Token Request</div>
<p>The STS that comes with DDF requires the following to be in the RequestSecurityToken request in order to issue a valid SAML assertion.
See the request block below for an example of how these components should be populated.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>WS-Addressing header containing Action, To, and MessageID blocks</p>
</li>
<li>
<p>Valid, non-expired timestamp</p>
</li>
<li>
<p>Issued over HTTPS</p>
</li>
<li>
<p>TokenType of <a href="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0" class="bare">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</a></p>
</li>
<li>
<p>KeyType of <a href="http://docs.oasis-open.org/ws-sx/ws-trust/200512/PublicKey" class="bare">http://docs.oasis-open.org/ws-sx/ws-trust/200512/PublicKey</a></p>
</li>
<li>
<p>X509 Certificate as the Proof of Possession or POP.  This needs to be the certificate of the client that will be both requesting the SAML assertion and using the SAML assertion to issue a query</p>
</li>
<li>
<p>Claims (optional): Some endpoints may require that the SAML assertion include attributes of the user, such as an authenticated user&#8217;s role, name identifier, email address, etc.  If the SAML assertion needs those attributes, the RequestSecurityToken must specify which ones to include.</p>
<div class="ulist">
<ul>
<li>
<p>UsernameToken: If Claims are required, the RequestSecurityToken security header must contain a UsernameToken element with a username and password.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">X.509 PublicKey SAML Security Token Sample Request</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
</pre></td>
  <td class="code"><pre><span class="tag">&lt;soapenv:Envelope</span> <span class="attribute-name">xmlns:ns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:soapenv</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/soap/envelope/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   <span class="tag">&lt;soapenv:Header</span> <span class="attribute-name">xmlns:wsa</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;wsa:Action&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue<span class="tag">&lt;/wsa:Action&gt;</span>
      <span class="tag">&lt;wsa:MessageID&gt;</span>uuid:527243af-94bd-4b5c-a1d8-024fd7e694c5<span class="tag">&lt;/wsa:MessageID&gt;</span>
      <span class="tag">&lt;wsa:To&gt;</span>https://server:8993/services/SecurityTokenService<span class="tag">&lt;/wsa:To&gt;</span>
      <span class="tag">&lt;wsse:Security</span> <span class="attribute-name">soapenv:mustUnderstand</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsse</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsu</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;wsu:Timestamp</span> <span class="attribute-name">wsu:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TS-17</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsu:Created&gt;</span>2014-02-19T17:30:40.771Z<span class="tag">&lt;/wsu:Created&gt;</span>
            <span class="tag">&lt;wsu:Expires&gt;</span>2014-02-19T19:10:40.771Z<span class="tag">&lt;/wsu:Expires&gt;</span>
         <span class="tag">&lt;/wsu:Timestamp&gt;</span>

         <span class="comment">&lt;!-- OPTIONAL: Only required if the endpoint that the SAML assertion will be sent to requires claims. --&gt;</span>
         <span class="tag">&lt;wsse:UsernameToken</span> <span class="attribute-name">wsu:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UsernameToken-16</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsse:Username&gt;</span>pparker<span class="tag">&lt;/wsse:Username&gt;</span>
            <span class="tag">&lt;wsse:Password</span> <span class="attribute-name">Type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>password1<span class="tag">&lt;/wsse:Password&gt;</span>
            <span class="tag">&lt;wsse:Nonce</span> <span class="attribute-name">EncodingType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>LCTD+5Y7hlWIP6SpsEg9XA==<span class="tag">&lt;/wsse:Nonce&gt;</span>
            <span class="tag">&lt;wsu:Created&gt;</span>2014-02-19T17:30:37.355Z<span class="tag">&lt;/wsu:Created&gt;</span>
         <span class="tag">&lt;/wsse:UsernameToken&gt;</span>
      <span class="tag">&lt;/wsse:Security&gt;</span>
   <span class="tag">&lt;/soapenv:Header&gt;</span>
   <span class="tag">&lt;soapenv:Body&gt;</span>
      <span class="tag">&lt;wst:RequestSecurityToken</span> <span class="attribute-name">xmlns:wst</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;wst:TokenType&gt;</span>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0<span class="tag">&lt;/wst:TokenType&gt;</span>
         <span class="tag">&lt;wst:KeyType&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/PublicKey<span class="tag">&lt;/wst:KeyType&gt;</span>

         <span class="comment">&lt;!-- OPTIONAL: Only required if the endpoint that the SAML assertion will be sent to requires claims. --&gt;</span>
         <span class="tag">&lt;wst:Claims</span> <span class="attribute-name">Dialect</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ic</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;ic:ClaimType</span> <span class="attribute-name">Optional</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
         <span class="tag">&lt;/wst:Claims&gt;</span>
         <span class="tag">&lt;wst:RequestType&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue<span class="tag">&lt;/wst:RequestType&gt;</span>
            <span class="tag">&lt;wsp:AppliesTo</span> <span class="attribute-name">xmlns:wsp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2004/09/policy</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsa:EndpointReference</span> <span class="attribute-name">xmlns:wsa</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsa:Address&gt;</span>https://server:8993/services/QueryService<span class="tag">&lt;/wsa:Address&gt;</span>
            <span class="tag">&lt;/wsa:EndpointReference&gt;</span>
         <span class="tag">&lt;/wsp:AppliesTo&gt;</span>
         <span class="tag">&lt;wst:UseKey&gt;</span>
            <span class="tag">&lt;ds:KeyInfo</span> <span class="attribute-name">xmlns:ds</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
               <span class="tag">&lt;ds:X509Data&gt;</span>
                  <span class="tag">&lt;ds:X509Certificate&gt;</span>MIIFGDCCBACgAwIBAgICJe0wDQYJKoZIhvcNAQEFBQAwXDELMAkGA1UEBhMCVVMxGDAWBgNVBAoT
D1UuUy4gR292ZXJubWVudDEMMAoGA1UECxMDRG9EMQwwCgYDVQQLEwNQS0kxFzAVBgNVBAMTDkRP
RCBKSVRDIENBLTI3MB4XDTEzMDUwNzAwMjU0OVoXDTE2MDUwNzAwMjU0OVowaTELMAkGA1UEBhMC
VVMxGDAWBgNVBAoTD1UuUy4gR292ZXJubWVudDEMMAoGA1UECxMDRG9EMQwwCgYDVQQLEwNQS0kx
EzARBgNVBAsTCkNPTlRSQUNUT1IxDzANBgNVBAMTBmNsaWVudDCCASIwDQYJKoZIhvcNAQEBBQAD
ggEPADCCAQoCggEBAOq6L1/jjZ5cyhjhHEbOHr5WQpboKACYbrsn8lg85LGNoAfcwImr9KBmOxGb
ZCxHYIhkW7pJ+kppyH8DbbbDMviIvvdkvrAIU0l8OBRn2wReCBGQ01Imdc3+WzFF2svW75d6wii2ZVd
eMvUO15p/pAD/sdIfXmAfyu8+tqtiO8KVZGkTnlg3AMzfeSrkci5UHMVWj0qUSuzLk9SAg/9STgb
Kf2xBpHUYecWFSB+dTpdZN2pC85tj9xIoWGh5dFWG1fPcYRgzGPxsybiGOylbJ7rHDJuL7IIIyx5
EnkCuxmQwoQ6XQAhiWRGyPlY08w1LZixI2v+Cv/ZjUfIHv49I9P4Mt8CAwEAAaOCAdUwggHRMB8G
A1UdIwQYMBaAFCMUNCBNXy43NZLBBlnDjDplNZJoMB0GA1UdDgQWBBRPGiX6zZzKTqQSx/tjg6hx
9opDoTAOBgNVHQ8BAf8EBAMCBaAwgdoGA1UdHwSB0jCBzzA2oDSgMoYwaHR0cDovL2NybC5nZHMu
bml0LmRpc2EubWlsL2NybC9ET0RKSVRDQ0FfMjcuY3JsMIGUoIGRoIGOhoGLbGRhcDovL2NybC5n
ZHMubml0LmRpc2EubWlsL2NuJTNkRE9EJTIwSklUQyUyMENBLTI3JTJjb3UlM2RQS0klMmNvdSUz
ZERvRCUyY28lM2RVLlMuJTIwR292ZXJubWVudCUyY2MlM2RVUz9jZXJ0aWZpY2F0ZXJldm9jYXRp
b25saXN0O2JpbmFyeTAjBgNVHSAEHDAaMAsGCWCGSAFlAgELBTALBglghkgBZQIBCxIwfQYIKwYB
BQUHAQEEcTBvMD0GCCsGAQUFBzAChjFodHRwOi8vY3JsLmdkcy5uaXQuZGlzYS5taWwvc2lnbi9E
T0RKSVRDQ0FfMjcuY2VyMC4GCCsGAQUFBzABhiJodHRwOi8vb2NzcC5uc24wLnJjdnMubml0LmRp
c2EubWlsMA0GCSqGSIb3DQEBBQUAA4IBAQCGUJPGh4iGCbr2xCMqCq04SFQ+iaLmTIFAxZPFvup1
4E9Ir6CSDalpF9eBx9fS+Z2xuesKyM/g3YqWU1LtfWGRRIxzEujaC4YpwHuffkx9QqkwSkXXIsim
EhmzSgzxnT4Q9X8WwalqVYOfNZ6sSLZ8qPPFrLHkkw/zIFRzo62wXLu0tfcpOr+iaJBhyDRinIHr
hwtE3xo6qQRRWlO3/clC4RnTev1crFVJQVBF3yfpRu8udJ2SOGdqU0vjUSu1h7aMkYJMHIu08Whj
8KASjJBFeHPirMV1oddJ5ydZCQ+Jmnpbwq+XsCxg1LjC4dmbjKVr9s4QK+/JLNjxD8IkJiZE<span class="tag">&lt;/ds:X509Certificate&gt;</span>
               <span class="tag">&lt;/ds:X509Data&gt;</span>
            <span class="tag">&lt;/ds:KeyInfo&gt;</span>
         <span class="tag">&lt;/wst:UseKey&gt;</span>
      <span class="tag">&lt;/wst:RequestSecurityToken&gt;</span>
   <span class="tag">&lt;/soapenv:Body&gt;</span>
<span class="tag">&lt;/soapenv:Envelope&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">X.509 PublicKey SAML Security Token Response</div>
<p>This is the response from the STS containing the SAML assertion to be used in subsequent requests to QCRUD endpoints.</p>
</div>
<div class="paragraph">
<p>The <code>saml2:Assertion</code> block contains the entire SAML assertion.</p>
</div>
<div class="paragraph">
<p>The <code>Signature</code> block contains a signature from the STS&#8217;s private key.
The endpoint receiving the SAML assertion will verify that it trusts the signer and ensure that the message wasn&#8217;t tampered with.</p>
</div>
<div class="paragraph">
<p>The <code>SubjectConfirmation</code> block contains the client&#8217;s public key, so the server can verify that the client has permission to hold this SAML assertion.
The <code>AttributeStatement</code> block contains all of the claims requested.</p>
</div>
<div class="listingblock">
<div class="title">X.509 PublicKey SAML Security Token Sample Response</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
</pre></td>
  <td class="code"><pre><span class="tag">&lt;soap:Envelope</span> <span class="attribute-name">xmlns:soap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/soap/envelope/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   <span class="tag">&lt;soap:Header&gt;</span>
      <span class="tag">&lt;Action</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RSTRC/IssueFinal<span class="tag">&lt;/Action&gt;</span>
      <span class="tag">&lt;MessageID</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>urn:uuid:b46c35ad-3120-4233-ae07-b9e10c7911f3<span class="tag">&lt;/MessageID&gt;</span>
      <span class="tag">&lt;To</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://www.w3.org/2005/08/addressing/anonymous<span class="tag">&lt;/To&gt;</span>
      <span class="tag">&lt;RelatesTo</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>uuid:527243af-94bd-4b5c-a1d8-024fd7e694c5<span class="tag">&lt;/RelatesTo&gt;</span>
      <span class="tag">&lt;wsse:Security</span> <span class="attribute-name">soap:mustUnderstand</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsse</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsu</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;wsu:Timestamp</span> <span class="attribute-name">wsu:Id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TS-90DBA0754E55B4FE7013928310431357</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wsu:Created&gt;</span>2014-02-19T17:30:43.135Z<span class="tag">&lt;/wsu:Created&gt;</span>
            <span class="tag">&lt;wsu:Expires&gt;</span>2014-02-19T17:35:43.135Z<span class="tag">&lt;/wsu:Expires&gt;</span>
         <span class="tag">&lt;/wsu:Timestamp&gt;</span>
      <span class="tag">&lt;/wsse:Security&gt;</span>
   <span class="tag">&lt;/soap:Header&gt;</span>
   <span class="tag">&lt;soap:Body&gt;</span>
      <span class="tag">&lt;ns2:RequestSecurityTokenResponseCollection</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200802</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/ws-sx/ws-trust/200512</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns3</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns4</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ns5</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2005/08/addressing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;ns2:RequestSecurityTokenResponse&gt;</span>
            <span class="tag">&lt;ns2:TokenType&gt;</span>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0<span class="tag">&lt;/ns2:TokenType&gt;</span>
            <span class="tag">&lt;ns2:RequestedSecurityToken&gt;</span>
               <span class="tag">&lt;saml2:Assertion</span> <span class="attribute-name">ID</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">_90DBA0754E55B4FE7013928310431176</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">IssueInstant</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2014-02-19T17:30:43.117Z</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">Version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">saml2:AssertionType</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:saml2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:assertion</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                  <span class="tag">&lt;saml2:Issuer&gt;</span>tokenissuer<span class="tag">&lt;/saml2:Issuer&gt;</span>
                  <span class="tag">&lt;ds:Signature</span> <span class="attribute-name">xmlns:ds</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                     <span class="tag">&lt;ds:SignedInfo&gt;</span>
                        <span class="tag">&lt;ds:CanonicalizationMethod</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/10/xml-exc-c14n#</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;ds:SignatureMethod</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#rsa-sha1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;ds:Reference</span> <span class="attribute-name">URI</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#_90DBA0754E55B4FE7013928310431176</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                           <span class="tag">&lt;ds:Transforms&gt;</span>
                              <span class="tag">&lt;ds:Transform</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#enveloped-signature</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                              <span class="tag">&lt;ds:Transform</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/10/xml-exc-c14n#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                 <span class="tag">&lt;ec:InclusiveNamespaces</span> <span class="attribute-name">PrefixList</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:ec</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/10/xml-exc-c14n#</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                              <span class="tag">&lt;/ds:Transform&gt;</span>
                           <span class="tag">&lt;/ds:Transforms&gt;</span>
                           <span class="tag">&lt;ds:DigestMethod</span> <span class="attribute-name">Algorithm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#sha1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                           <span class="tag">&lt;ds:DigestValue&gt;</span>/bEGqsRGHVJbx298WPmGd8I53zs=<span class="tag">&lt;/ds:DigestValue&gt;</span>
                        <span class="tag">&lt;/ds:Reference&gt;</span>
                     <span class="tag">&lt;/ds:SignedInfo&gt;</span>
                     <span class="tag">&lt;ds:SignatureValue&gt;</span>
mYR7w1/dnuh8Z7t9xjCb4XkYQLshj+UuYlGOuTwDYsUPcS2qI0nAgMD1VsDP7y1fDJxeqsq7HYhFKsnqRfebMM4WLH1D/lJ4rD4UO+i9l3tuiHml7SN24WM1/bOqfDUCoDqmwG8afUJ3r4vmTNPxfwfOss8BZ/8ODgZzm08ndlkxDfvcN7OrExbV/3/45JwF/MMPZoqvi2MJGfX56E9fErJNuzezpWnRqPOlWPxyffKMAlVaB9zF6gvVnUqcW2k/Z8X9lN7O5jouBI281ZnIfsIPuBJERFtYNVDHsIXM1pJnrY6FlKIaOsi55LQu3Ruir/n82pU7BT5aWtxwrn7akBg==                    <span class="tag">&lt;/ds:SignatureValue&gt;</span>
                     <span class="tag">&lt;ds:KeyInfo&gt;</span>
                        <span class="tag">&lt;ds:X509Data&gt;</span>
                           <span class="tag">&lt;ds:X509Certificate&gt;</span>MIIFHTCCBAWgAwIBAgICJe8wDQYJKoZIhvcNAQEFBQAwXDELMAkGA1UEBhMCVVMxGDAWBgNVBAoT
D1UuUy4gR292ZXJubWVudDEMMAoGA1UECxMDRG9EMQwwCgYDVQQLEwNQS0kxFzAVBgNVBAMTDkRP
RCBKSVRDIENBLTI3MB4XDTEzMDUwNzAwMjYzN1oXDTE2MDUwNzAwMjYzN1owbjELMAkGA1UEBhMC
VVMxGDAWBgNVBAoTD1UuUy4gR292ZXJubWVudDEMMAoGA1UECxMDRG9EMQwwCgYDVQQLEwNQS0kx
EzARBgNVBAsTCkNPTlRSQUNUT1IxFDASBgNVBAMTC3Rva2VuaXNzdWVyMIIBIjANBgkqhkiG9w0B
AQEFAAOCAQ8AMIIBCgKCAQEAx01/U4M1wG+wL1JxX2RL1glj101FkJXMk3KFt3zD//N8x/Dcwwvs
ngCQjXrV6YhbB2V7scHwnThPv3RSwYYiO62z+g6ptfBbKGGBLSZOzLe3fyJR4RxblFKsELFgPHfX
vgUHS/keG5uSRk9S/Okqps/yxKB7+ZlxeFxsIz5QywXvBpMiXtc2zF+M7BsbSIdSx5LcPcDFBwjF
c66rE3/y/25VMht9EZX1QoKr7f8rWD4xgd5J6DYMFWEcmiCz4BDJH9sfTw+n1P+CYgrhwslWGqxt
cDME9t6SWR3GLT4Sdtr8ziIM5uUteEhPIV3rVC3/u23JbYEeS8mpnp0bxt5eHQIDAQABo4IB1TCC
AdEwHwYDVR0jBBgwFoAUIxQ0IE1fLjc1ksEGWcOMOmU1kmgwHQYDVR0OBBYEFGBjdkdey+bMHMhC
Z7gwiQ/mJf5VMA4GA1UdDwEB/wQEAwIFoDCB2gYDVR0fBIHSMIHPMDagNKAyhjBodHRwOi8vY3Js
Lmdkcy5uaXQuZGlzYS5taWwvY3JsL0RPREpJVENDQV8yNy5jcmwwgZSggZGggY6GgYtsZGFwOi8v
Y3JsLmdkcy5uaXQuZGlzYS5taWwvY24lM2RET0QlMjBKSVRDJTIwQ0EtMjclMmNvdSUzZFBLSSUy
Y291JTNkRG9EJTJjbyUzZFUuUy4lMjBHb3Zlcm5tZW50JTJjYyUzZFVTP2NlcnRpZmljYXRlcmV2
b2NhdGlvbmxpc3Q7YmluYXJ5MCMGA1UdIAQcMBowCwYJYIZIAWUCAQsFMAsGCWCGSAFlAgELEjB9
BggrBgEFBQcBAQRxMG8wPQYIKwYBBQUHMAKGMWh0dHA6Ly9jcmwuZ2RzLm5pdC5kaXNhLm1pbC9z
aWduL0RPREpJVENDQV8yNy5jZXIwLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3NwLm5zbjAucmN2cy5u
aXQuZGlzYS5taWwwDQYJKoZIhvcNAQEFBQADggEBAIHZQTINU3bMpJ/PkwTYLWPmwCqAYgEUzSYx
bNcVY5MWD8b4XCdw5nM3GnFlOqr4IrHeyyOzsEbIebTe3bv0l1pHx0Uyj059nAhx/AP8DjVtuRU1
/Mp4b6uJ/4yaoMjIGceqBzHqhHIJinG0Y2azua7eM9hVbWZsa912ihbiupCq22mYuHFP7NUNzBvV
j03YUcsy/sES5sRx9Rops/CBN+LUUYOdJOxYWxo8oAbtF8ABE5ATLAwqz4ttsToKPUYh1sxdx5Ef
APeZ+wYDmMu4OfLckwnCKZgkEtJOxXpdIJHY+VmyZtQSB0LkR5toeH/ANV4259Ia5ZT8h2/vIJBg
6B4=<span class="tag">&lt;/ds:X509Certificate&gt;</span>
                        <span class="tag">&lt;/ds:X509Data&gt;</span>
                     <span class="tag">&lt;/ds:KeyInfo&gt;</span>
                  <span class="tag">&lt;/ds:Signature&gt;</span>
                  <span class="tag">&lt;saml2:Subject&gt;</span>
                     <span class="tag">&lt;saml2:NameID</span> <span class="attribute-name">Format</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameQualifier</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://cxf.apache.org/sts</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>pparker<span class="tag">&lt;/saml2:NameID&gt;</span>
                     <span class="tag">&lt;saml2:SubjectConfirmation</span> <span class="attribute-name">Method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:cm:holder-of-key</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;saml2:SubjectConfirmationData</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">saml2:KeyInfoConfirmationDataType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                           <span class="tag">&lt;ds:KeyInfo</span> <span class="attribute-name">xmlns:ds</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2000/09/xmldsig#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                              <span class="tag">&lt;ds:X509Data&gt;</span>
                                 <span class="tag">&lt;ds:X509Certificate&gt;</span>MIIFGDCCBACgAwIBAgICJe0wDQYJKoZIhvcNAQEFBQAwXDELMAkGA1UEBhMCVVMxGDAWBgNVBAoT
D1UuUy4gR292ZXJubWVudDEMMAoGA1UECxMDRG9EMQwwCgYDVQQLEwNQS0kxFzAVBgNVBAMTDkRP
RCBKSVRDIENBLTI3MB4XDTEzMDUwNzAwMjU0OVoXDTE2MDUwNzAwMjU0OVowaTELMAkGA1UEBhMC
VVMxGDAWBgNVBAoTD1UuUy4gR292ZXJubWVudDEMMAoGA1UECxMDRG9EMQwwCgYDVQQLEwNQS0kx
EzARBgNVBAsTCkNPTlRSQUNUT1IxDzANBgNVBAMTBmNsaWVudDCCASIwDQYJKoZIhvcNAQEBBQAD
ggEPADCCAQoCggEBAOq6L1/jjZ5cyhjhHEbOHr5WQpboKACYbrsn8lg85LGNoAfcwImr9KBmOxGb
ZCxHYIhkW7pJ+kppyH8bbbviIvvdkvrAIU0l8OBRn2wReCBGQ01Imdc3+WzFF2svW75d6wii2ZVd
eMvUO15p/pAD/sdIfXmAfyu8+tqtiO8KVZGkTnlg3AMzfeSrkci5UHMVWj0qUSuzLk9SAg/9STgb
Kf2xBpHUYecWFSB+dTpdZN2pC85tj9xIoWGh5dFWG1fPcYRgzGPxsybiGOylbJ7rHDJuL7IIIyx5
EnkCuxmQwoQ6XQAhiWRGyPlY08w1LZixI2v+Cv/ZjUfIHv49I9P4Mt8CAwEAAaOCAdUwggHRMB8G
A1UdIwQYMBaAFCMUNCBNXy43NZLBBlnDjDplNZJoMB0GA1UdDgQWBBRPGiX6zZzKTqQSx/tjg6hx
9opDoTAOBgNVHQ8BAf8EBAMCBaAwgdoGA1UdHwSB0jCBzzA2oDSgMoYwaHR0cDovL2NybC5nZHMu
bml0LmRpc2EubWlsL2NybC9ET0RKSVRDQ0FfMjcuY3JsMIGUoIGRoIGOhoGLbGRhcDovL2NybC5n
ZHMubml0LmRpc2EubWlsL2NuJTNkRE9EJTIwSklUQyUyMENBLTI3JTJjb3UlM2RQS0klMmNvdSUz
ZERvRCUyY28lM2RVLlMuJTIwR292ZXJubWVudCUyY2MlM2RVUz9jZXJ0aWZpY2F0ZXJldm9jYXRp
b25saXN0O2JpbmFyeTAjBgNVHSAEHDAaMAsGCWCGSAFlAgELBTALBglghkgBZQIBCxIwfQYIKwYB
BQUHAQEEcTBvMD0GCCsGAQUFBzAChjFodHRwOi8vY3JsLmdkcy5uaXQuZGlzYS5taWwvc2lnbi9E
T0RKSVRDQ0FfMjcuY2VyMC4GCCsGAQUFBzABhiJodHRwOi8vb2NzcC5uc24wLnJjdnMubml0LmRp
c2EubWlsMA0GCSqGSIb3DQEBBQUAA4IBAQCGUJPGh4iGCbr2xCMqCq04SFQ+iaLmTIFAxZPFvup1
4E9Ir6CSDalpF9eBx9fS+Z2xuesKyM/g3YqWU1LtfWGRRIxzEujaC4YpwHuffkx9QqkwSkXXIsim
EhmzSgzxnT4Q9X8WwalqVYOfNZ6sSLZ8qPPFrLHkkw/zIFRzo62wXLu0tfcpOr+iaJBhyDRinIHr
hwtE3xo6qQRRWlO3/clC4RnTev1crFVJQVBF3yfpRu8udJ2SOGdqU0vjUSu1h7aMkYJMHIu08Whj
8KASjJBFeHPirMV1oddJ5ydZCQ+Jmnpbwq+XsCxg1LjC4dmbjKVr9s4QK+/JLNjxD8IkJiZE<span class="tag">&lt;/ds:X509Certificate&gt;</span>
                              <span class="tag">&lt;/ds:X509Data&gt;</span>
                           <span class="tag">&lt;/ds:KeyInfo&gt;</span>
                        <span class="tag">&lt;/saml2:SubjectConfirmationData&gt;</span>
                     <span class="tag">&lt;/saml2:SubjectConfirmation&gt;</span>
                  <span class="tag">&lt;/saml2:Subject&gt;</span>
                  <span class="tag">&lt;saml2:Conditions</span> <span class="attribute-name">NotBefore</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2014-02-19T17:30:43.119Z</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NotOnOrAfter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2014-02-19T18:00:43.119Z</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                  <span class="tag">&lt;saml2:AuthnStatement</span> <span class="attribute-name">AuthnInstant</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2014-02-19T17:30:43.117Z</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                     <span class="tag">&lt;saml2:AuthnContext&gt;</span>
                        <span class="tag">&lt;saml2:AuthnContextClassRef&gt;</span>urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified<span class="tag">&lt;/saml2:AuthnContextClassRef&gt;</span>
                     <span class="tag">&lt;/saml2:AuthnContext&gt;</span>
                  <span class="tag">&lt;/saml2:AuthnStatement&gt;</span>

                  <span class="comment">&lt;!-- This block will only be included if Claims were requested in the RST. --&gt;</span>
                  <span class="tag">&lt;saml2:AttributeStatement&gt;</span>
                     <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>pparker<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                     <span class="tag">&lt;/saml2:Attribute&gt;</span>
                     <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>pparker@example.com<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                     <span class="tag">&lt;/saml2:Attribute&gt;</span>
                     <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>pparker<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                     <span class="tag">&lt;/saml2:Attribute&gt;</span>
                     <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Peter Parker<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                     <span class="tag">&lt;/saml2:Attribute&gt;</span>
                     <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>users<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                     <span class="tag">&lt;/saml2:Attribute&gt;</span>
                     <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>users<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                     <span class="tag">&lt;/saml2:Attribute&gt;</span>
                     <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>avengers<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                     <span class="tag">&lt;/saml2:Attribute&gt;</span>
                     <span class="tag">&lt;saml2:Attribute</span> <span class="attribute-name">Name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">NameFormat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;saml2:AttributeValue</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>admin<span class="tag">&lt;/saml2:AttributeValue&gt;</span>
                     <span class="tag">&lt;/saml2:Attribute&gt;</span>
                  <span class="tag">&lt;/saml2:AttributeStatement&gt;</span>
               <span class="tag">&lt;/saml2:Assertion&gt;</span>
            <span class="tag">&lt;/ns2:RequestedSecurityToken&gt;</span>
            <span class="tag">&lt;ns2:RequestedAttachedReference&gt;</span>
               <span class="tag">&lt;ns4:SecurityTokenReference</span> <span class="attribute-name">wsse11:TokenType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsse11</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                  <span class="tag">&lt;ns4:KeyIdentifier</span> <span class="attribute-name">ValueType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>_90DBA0754E55B4FE7013928310431176<span class="tag">&lt;/ns4:KeyIdentifier&gt;</span>
               <span class="tag">&lt;/ns4:SecurityTokenReference&gt;</span>
            <span class="tag">&lt;/ns2:RequestedAttachedReference&gt;</span>
            <span class="tag">&lt;ns2:RequestedUnattachedReference&gt;</span>
               <span class="tag">&lt;ns4:SecurityTokenReference</span> <span class="attribute-name">wsse11:TokenType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wsse11</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                  <span class="tag">&lt;ns4:KeyIdentifier</span> <span class="attribute-name">ValueType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>_90DBA0754E55B4FE7013928310431176<span class="tag">&lt;/ns4:KeyIdentifier&gt;</span>
               <span class="tag">&lt;/ns4:SecurityTokenReference&gt;</span>
            <span class="tag">&lt;/ns2:RequestedUnattachedReference&gt;</span>
            <span class="tag">&lt;ns2:Lifetime&gt;</span>
               <span class="tag">&lt;ns3:Created&gt;</span>2014-02-19T17:30:43.119Z<span class="tag">&lt;/ns3:Created&gt;</span>
               <span class="tag">&lt;ns3:Expires&gt;</span>2014-02-19T18:00:43.119Z<span class="tag">&lt;/ns3:Expires&gt;</span>
            <span class="tag">&lt;/ns2:Lifetime&gt;</span>
         <span class="tag">&lt;/ns2:RequestSecurityTokenResponse&gt;</span>
      <span class="tag">&lt;/ns2:RequestSecurityTokenResponseCollection&gt;</span>
   <span class="tag">&lt;/soap:Body&gt;</span>
<span class="tag">&lt;/soap:Envelope&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_registry_clients"><a class="anchor" href="#_developing_registry_clients"></a><a class="link" href="#_developing_registry_clients">1.16. Developing Registry Clients</a></h3>
<div class="paragraph">
<p>Registry Clients create Federated Sources using the OSGi Configuration Admin.
Developers should reference an individual <code>Source</code>'s (Federated, Connected, or Catalog Provider) documentation for the Configuration properties (such as a Factory PID, addresses, intervals, etc) necessary to establish that <code>Source</code> in the framework. </p>
</div>
<div class="listingblock">
<div class="title">Creating a Source Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>org.osgi.service.cm.ConfigurationAdmin configurationAdmin = getConfigurationAdmin() ;
org.osgi.service.cm.Configuration currentConfiguration = configurationAdmin.createFactoryConfiguration(getFactoryPid(), <span class="predefined-constant">null</span>);
<span class="predefined-type">Dictionary</span> properties = <span class="keyword">new</span> <span class="predefined-type">Dictionary</span>() ;
properties.put(QUERY_ADDRESS_PROPERTY,queryAddress);
currentConfiguration.update( properties );</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>QUERY_ADDRESS_PROPERTY</code> is specific to this Configuration and might not be required for every <code>Source</code>.
The properties necessary for creating a Configuration are different for every <code>Source</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_developing_resource_readers"><a class="anchor" href="#_developing_resource_readers"></a><a class="link" href="#_developing_resource_readers">1.17. Developing Resource Readers</a></h3>
<div class="paragraph">
<p>A <code>ResourceReader</code> is a class that retrieves a resource from a native/external source and returns it to DDF.
A simple example is that of a File <code>ResourceReader</code>.
It takes a file from the local file system and passes it back to DDF.
New implementations can be created in order to support obtaining Resources from various Resource data stores. </p>
</div>
<div class="sect3">
<h4 id="_creating_a_new_resourcereader"><a class="anchor" href="#_creating_a_new_resourcereader"></a><a class="link" href="#_creating_a_new_resourcereader">1.17.1. Creating a New <code>ResourceReader</code></a></h4>
<div class="paragraph">
<p>Complete the following procedure to create a <code>ResourceReader</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements the <code>DDF.catalog.resource.ResourceReader</code> interface.</p>
</li>
<li>
<p>Deploy the OSGi bundled packaged service to the DDF run-time.</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_implementing_the_resourcereader_interface"><a class="anchor" href="#_implementing_the_resourcereader_interface"></a><a class="link" href="#_implementing_the_resourcereader_interface">1.17.1.1. Implementing the <code>ResourceReader</code> Interface</a></h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="directive">public</span> <span class="type">class</span> <span class="class">TestResourceReader</span> <span class="directive">implements</span> DDF.catalog.resource.ResourceReader</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ResourceReader</code> has a couple of key methods where most of the work is performed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><strong>URI</strong><br>
It is recommended to become familiar with the Java API URI class in order to properly build a <code>ResourceReader</code>. 
Furthermore, a URI should be used according to its <a href="http://www.w3.org/Addressing/URL/uri-spec.html">specification</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Developing Resource Readers"></span>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_retrieveresource"><a class="anchor" href="#_retrieveresource"></a><a class="link" href="#_retrieveresource">1.17.1.2. retrieveResource</a></h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="directive">public</span> ResourceResponse retrieveResource( <span class="predefined-type">URI</span> uri, <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Serializable</span>&gt; arguments )<span class="directive">throws</span> <span class="exception">IOException</span>, ResourceNotFoundException, ResourceNotSupportedException;</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This method is the main entry to the <code>ResourceReader</code>.
It is used to retrieve a <code>Resource</code> and send it back to the caller (generally the <code>CatalogFramework</code>).
Information needed to obtain the entry is contained in the <code>URI</code> reference.
The URI Scheme will need to match a scheme specified in the <code>getSupportedSchemes</code> method.
This is how the CatalogFramework determines which <code>ResourceReader</code> implementation to use. 
If there are multiple <code>ResourceReaders</code> supporting the same scheme, these <code>ResourceReaders</code> will be invoked iteratively. 
Invocation of the <code>ResourceReaders</code> stops once one of them returns a <code>Resource</code>.</p>
</div>
<div class="paragraph">
<p>Arguments are also passed in.
These can be used by the <code>ResourceReader</code> to perform additional operations on the resource.</p>
</div>
<div class="paragraph">
<p>The <code>URLResourceReader</code> is an example <code>ResourceReader</code> that reads a file from a URI.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>Map&lt;String, Serializable&gt; arguments</code> parameter is passed in to support any options or additional information associated with retrieving the resource.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_implement_retrieveresource"><a class="anchor" href="#_implement_retrieveresource"></a><a class="link" href="#_implement_retrieveresource">1.17.1.3. Implement <code>retrieveResource()</code></a></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define supported schemes (e.g., file, http, etc.).</p>
</li>
<li>
<p>Check if the incoming URI matches a supported scheme. If it does not, throw <code>ResourceNotSupportedException</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Example:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="keyword">if</span> ( !uri.getScheme().equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">http</span><span class="delimiter">&quot;</span></span>) )
 {
   <span class="keyword">throw</span> <span class="keyword">new</span> ResourceNotSupportedException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Unsupported scheme received, was expecting http</span><span class="delimiter">&quot;</span></span>)
 }</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement the business logic.</p>
</li>
<li>
<p>For example, the <code>URLResourceReader</code> will obtain the resource through a connection:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="predefined-type">URL</span> url = uri.toURL();
<span class="predefined-type">URLConnection</span> conn = url.openConnection();
<span class="predefined-type">String</span> mimeType = conn.getContentType();
<span class="keyword">if</span> ( mimeType == <span class="predefined-constant">null</span> ) {
    mimeType = <span class="predefined-type">URLConnection</span>.guessContentTypeFromName( url.getFile() );
}
<span class="predefined-type">InputStream</span> is = conn.getInputStream();</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>Resource</code> needs to be accessible from the DDF installation (see the rootResourceDirectories property of the <code>URLResourceReader</code>). 
This includes being able to find a file locally or reach out to a remote URI. 
This may require Internet access, and DDF may need to be configured to use a proxy (<code>http.proxyHost</code> and <code>http.proxyPort</code> can be added to the system properties on the command line script).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Return <code>Resource</code> in <code>ResourceResponse</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="keyword">return</span> ResourceResponseImpl( <span class="keyword">new</span> ResourceImpl( <span class="keyword">new</span> <span class="predefined-type">BufferedInputStream</span>( is ), <span class="keyword">new</span> MimeType( mimeType ), url.getFile() ) );</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the Resource cannot be found, throw a <code>ResourceNotFoundException</code>.  </p>
</div>
</div>
<div class="sect4">
<h5 id="_getsupportedschemes"><a class="anchor" href="#_getsupportedschemes"></a><a class="link" href="#_getsupportedschemes">1.17.1.4. <code>getSupportedSchemes</code></a></h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">Set</span>&lt;<span class="predefined-type">String</span>&gt; getSupportedSchemes();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method lets the <code>ResourceReader</code> inform the CatalogFramework about the type of URI scheme that it accepts and should be passed.
For single-use ResourceReaders (like a URLResourceReader), there may be only one scheme that it can accept while others may understand more than one.
A ResourceReader must, at minimum, accept one qualifier. 
As mentioned before, this method is used by the <code>CatalogFramework</code> to determine which <code>ResourceReader</code> to invoke. </p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><strong><code>ResourceReader</code> extends <code>Describable</code></strong><br>
Additionally, there are other methods that are used to uniquely describe a <code>ResourceReader</code>.
 The <code>describe</code> methods are straight-forward and can be implemented with guidance from the Javadoc.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_export_to_osgi_service_registry"><a class="anchor" href="#_export_to_osgi_service_registry"></a><a class="link" href="#_export_to_osgi_service_registry">1.17.1.5. Export to OSGi Service Registry</a></h5>
<div class="paragraph">
<p>In order for the <code>ResourceReader</code> to be used by the <code>CatalogFramework</code>, it should be exported to the OSGi Service Registry as a <code>DDF.catalog.resource.ResourceReader</code>.</p>
</div>
<div class="paragraph">
<p>See the XML below for an example:</p>
</div>
<div class="listingblock">
<div class="title">Blueprint example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">customResourceReaderId]</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">example.resource.reader.impl.CustomResourceReader</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;service</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">customResourceReaderId</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DDF.catalog.source.ResourceReader</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_resource_writers"><a class="anchor" href="#_developing_resource_writers"></a><a class="link" href="#_developing_resource_writers">1.18. Developing Resource Writers</a></h3>
<div class="paragraph">
<p>A <code>ResourceWriter</code> is an object used to store or delete a <code>Resource</code>. 
<code>ResourceWriter</code> objects should be registered within the OSGi Service Registry, so clients can retrieve an instance when they need to store a <code>Resource</code>. </p>
</div>
<div class="sect3">
<h4 id="_create_a_new_resourcewriter"><a class="anchor" href="#_create_a_new_resourcewriter"></a><a class="link" href="#_create_a_new_resourcewriter">1.18.1. Create a New <code>ResourceWriter</code></a></h4>
<div class="paragraph">
<p>Complete the following procedure to create a <code>ResourceWriter</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class that implements the <code>DDF.catalog.resource.ResourceWriter</code> interface.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">ResourceWriter Implementation Skeleton</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="keyword">import</span> <span class="include">java.net.URI</span>;
<span class="keyword">import</span> <span class="include">java.util.Map</span>;
<span class="keyword">import</span> <span class="include">DDF.catalog.resource.Resource</span>;
<span class="keyword">import</span> <span class="include">DDF.catalog.resource.ResourceNotFoundException</span>;
<span class="keyword">import</span> <span class="include">DDF.catalog.resource.ResourceNotSupportedException</span>;
<span class="keyword">import</span> <span class="include">DDF.catalog.resource.ResourceWriter</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleResourceWriter</span> <span class="directive">implements</span> ResourceWriter {

        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="type">void</span> deleteResource(<span class="predefined-type">URI</span> uri, <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; arguments) <span class="directive">throws</span> ResourceNotFoundException, <span class="exception">IOException</span> {
           <span class="comment">// WRITE IMPLEMENTATION</span>
         }

        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="predefined-type">URI</span> storeResource(Resource resource, <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; arguments)<span class="directive">throws</span> ResourceNotSupportedException, <span class="exception">IOException</span> {
           <span class="comment">// WRITE IMPLEMENTATION</span>
           <span class="keyword">return</span> <span class="predefined-constant">null</span>;
        }

        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="predefined-type">URI</span> storeResource(Resource resource, <span class="predefined-type">String</span> id, <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; arguments) <span class="directive">throws</span> ResourceNotSupportedException, <span class="exception">IOException</span> {
           <span class="comment">// WRITE IMPLEMENTATION</span>
           <span class="keyword">return</span> <span class="predefined-constant">null</span>;
        }

}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Register the implementation as a Service in the OSGi Service Registry.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Blueprint Service Registration Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>...
<span class="tag">&lt;service</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ResourceWriterReference</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DDF.catalog.resource.ResourceWriter</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
...</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Deploy the OSGi bundled packaged service to the DDF run-time (Refer to the <a href="#_osgi_basics">OSGi Basics</a> - Bundles section.)</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p><strong>ResourceWriter Javadoc</strong><br>
Refer to the Catalog API Javadoc for more information about the methods required for implementing the interface. </p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_filters"><a class="anchor" href="#_developing_filters"></a><a class="link" href="#_developing_filters">1.19. Developing Filters</a></h3>
<div class="paragraph">
<p>The common way to create a <code>Filter</code> is to use the GeoTools <code>FilterFactoryImpl</code> object, which provides Java implementations for the various types of filters in the Filter Specification.
Examples are the easiest way to understand how to properly create a <code>Filter</code> and a <code>Query</code>. </p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Refer to the <a href="http://docs.geotools.org/latest/javadocs/">GeoTools javadoc</a> for more information on <code>FilterFactoryImpl</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Implementing the Filter interface directly is only for extremely advanced use cases and is highly discouraged.
Instead, use of the DDF-specific <code>FilterBuilder</code> API is recommended.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Developers create a <code>Filter</code> object in order to filter or constrain the amount of records returned from a <code>Source</code>.
The OGC Filter Specification has several types of filters that can be combined in a tree-like structure to describe the set of metacards that should be returned. </p>
</div>
<div class="ulist">
<div class="title">Categories of Filters</div>
<ul>
<li>
<p>Comparison Operators</p>
</li>
<li>
<p>Logical Operators</p>
</li>
<li>
<p>Expressions</p>
</li>
<li>
<p>Literals</p>
</li>
<li>
<p>Functions</p>
</li>
<li>
<p>Spatial Operators</p>
</li>
<li>
<p>Temporal Operators</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_units_of_measure"><a class="anchor" href="#_units_of_measure"></a><a class="link" href="#_units_of_measure">1.19.1. Units of Measure</a></h4>
<div class="paragraph">
<p>According to the <a href="http://www.opengeospatial.org/standards/filter">OGC Filter Specifications: 09-026r1</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Developing Filters"></span> and <a href="http://www.opengeospatial.org/standards/filter">OGC Filter Specifications: 04-095</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Developing Filters"></span>, units of measure can be expressed as a URI.
To fulfill that requirement, DDF utilizes the GeoTools class <code>org.geotools.styling.UomOgcMapping</code> for spatial filters requiring a standard for units of measure for scalar distances.
Essentially, the <code>UomOgcMapping</code> maps the <a href="http://www.opengeospatial.org/standards/symbol">OGC Symbology Encoding</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Developing Filters"></span> standard URIs to Java Units.
This class provides three options for units of measure: </p>
</div>
<div class="ulist">
<ul>
<li>
<p>FOOT</p>
</li>
<li>
<p>METRE</p>
</li>
<li>
<p>PIXEL</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>DDF only supports FOOT and METRE since they are the most applicable to scalar distances.</p>
</div>
</div>
<div class="sect3">
<h4 id="_filter_examples"><a class="anchor" href="#_filter_examples"></a><a class="link" href="#_filter_examples">1.19.2. Filter Examples</a></h4>
<div class="paragraph">
<p>The example below illustrates creating a query, and thus an OGC Filter, that does a case-insensitive search for the phrase "mission" in the entire metacard&#8217;s text.
Note that the OGC <code>PropertyIsLike</code> Filter is used for this simple contextual query.</p>
</div>
<div class="listingblock">
<div class="title">Simple Contextual Search</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
  <td class="code"><pre>org.opengis.filter.FilterFactory filterFactory = <span class="keyword">new</span> FilterFactoryImpl() ;
<span class="type">boolean</span> isCaseSensitive = <span class="predefined-constant">false</span> ;

<span class="predefined-type">String</span> wildcardChar = <span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span> ; <span class="comment">// used to match zero or more characters</span>
<span class="predefined-type">String</span> singleChar = <span class="string"><span class="delimiter">&quot;</span><span class="content">?</span><span class="delimiter">&quot;</span></span> ; <span class="comment">// used to match exactly one character</span>
<span class="predefined-type">String</span> escapeChar = <span class="string"><span class="delimiter">&quot;</span><span class="char">\\</span><span class="delimiter">&quot;</span></span> ; <span class="comment">// used to escape the meaning of the wildCard, singleChar,</span>
and the escapeChar itself

<span class="predefined-type">String</span> searchPhrase = <span class="string"><span class="delimiter">&quot;</span><span class="content">mission</span><span class="delimiter">&quot;</span></span> ;
org.opengis.filter.Filter propertyIsLikeFilter =
    filterFactory.like(filterFactory.property(Metacard.ANY_TEXT), searchPhrase, wildcardChar, singleChar, escapeChar, isCaseSensitive);
DDF.catalog.operation.QueryImpl query = <span class="keyword">new</span> QueryImpl( propertyIsLikeFilter );</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The example below illustrates creating an absolute temporal query, meaning the query is searching for Metacards whose modified timestamp occurred during a specific time range.
Note that this query uses the <code>During</code> OGC Filter for an absolute temporal query.</p>
</div>
<div class="listingblock">
<div class="title">Absolute Temporal Search</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
  <td class="code"><pre>org.opengis.filter.FilterFactory filterFactory = <span class="keyword">new</span> FilterFactoryImpl() ;
org.opengis.temporal.Instant startInstant = <span class="keyword">new</span> org.geotools.temporal.object.DefaultInstant(<span class="keyword">new</span> DefaultPosition(start));

org.opengis.temporal.Instant endInstant = <span class="keyword">new</span> org.geotools.temporal.object.DefaultInstant(<span class="keyword">new</span> DefaultPosition(end));

org.opengis.temporal.Period period =  <span class="keyword">new</span> org.geotools.temporal.object.DefaultPeriod(startInstant, endInstant);

<span class="predefined-type">String</span> property = Metacard.MODIFIED ; <span class="comment">// modified date of a metacard</span>

org.opengis.filter.Filter filter = filterFactory.during( filterFactory.property(property), filterFactory.literal(period)  );

DDF.catalog.operation.QueryImpl query = <span class="keyword">new</span> QueryImpl(filter) ;</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_contextual_searches"><a class="anchor" href="#_contextual_searches"></a><a class="link" href="#_contextual_searches">1.19.2.1. Contextual Searches</a></h5>
<div class="paragraph">
<p>Most contextual searches can be expressed using the <code>PropertyIsLike</code> filter. The special characters that have meaning in a <code>PropertyIsLike</code> filter are the wildcard, single wildcard, and escape characters (see Example Creating-Filters-1).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. <code>PropertyIsLike</code> Special Characters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Character</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wildcard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches zero or more characters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single Wildcard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matches exactly one character.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Escapes the meaning of the Wildcard, Single Wildcard, and the Escape character itself</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Characters and words, such as <code>AND</code>, <code>&amp;</code>, <code>and</code>, <code>OR</code>, <code>|</code>, <code>or</code>, <code>NOT</code>, <code>~</code>, <code>not</code>, <code>{</code>, and <code>}</code>, are treated as literals in a <code>PropertyIsLike</code> filter. In order to create equivalent logical queries, a developer must instead use the Logical Operator filters {<code>AND</code>, <code>OR</code>, <code>NOT</code>}. The Logical Operator filters can be combined together with <code>PropertyIsLike</code> filters to create a tree that represents the search phrase expression. </p>
</div>
<div class="listingblock">
<div class="title">Creating the search phrase "mission and planning"</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td>
  <td class="code"><pre>org.opengis.filter.FilterFactory filterFactory = <span class="keyword">new</span> FilterFactoryImpl() ;

<span class="type">boolean</span> isCaseSensitive = <span class="predefined-constant">false</span> ;

<span class="predefined-type">String</span> wildcardChar = <span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span> ; <span class="comment">// used to match zero or more characters</span>
<span class="predefined-type">String</span> singleChar = <span class="string"><span class="delimiter">&quot;</span><span class="content">?</span><span class="delimiter">&quot;</span></span> ; <span class="comment">// used to match exactly one character</span>
<span class="predefined-type">String</span> escapeChar = <span class="string"><span class="delimiter">&quot;</span><span class="char">\\</span><span class="delimiter">&quot;</span></span> ; <span class="comment">// used to escape the meaning of the wildCard, singleChar, and the escapeChar itself</span>

<span class="predefined-type">Filter</span> filter =
    filterFactory.and(
       filterFactory.like(filterFactory.property(Metacard.METADATA), <span class="string"><span class="delimiter">&quot;</span><span class="content">mission</span><span class="delimiter">&quot;</span></span> ,
wildcardChar, singleChar, escapeChar, isCaseSensitive),
       filterFactory.like(filterFactory.property(Metacard.METADATA), <span class="string"><span class="delimiter">&quot;</span><span class="content">planning</span><span class="delimiter">&quot;</span></span> ,
wildcardChar, singleChar, escapeChar, isCaseSensitive)
    );

DDF.catalog.operation.QueryImpl query = <span class="keyword">new</span> QueryImpl( filter );</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_tree_view_of_creating_filters"><a class="anchor" href="#_tree_view_of_creating_filters"></a><a class="link" href="#_tree_view_of_creating_filters">1.19.2.1.1. Tree View of Creating Filters </a></h6>
<div class="paragraph">
<p>Filters used in DDF can always be represented in a tree diagram.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png;base64,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" alt="Filter Example Tree Diagram" width="260" height="224">
</div>
<div class="title">Filter Example Tree Diagram</div>
</div>
</div>
<div class="sect5">
<h6 id="_xml_view_of_creating_filters"><a class="anchor" href="#_xml_view_of_creating_filters"></a><a class="link" href="#_xml_view_of_creating_filters">1.19.2.1.2. XML View of Creating Filters</a></h6>
<div class="paragraph">
<p>Another way to view this type of Filter is through an XML model, which is shown below.</p>
</div>
<div class="listingblock">
<div class="title">Pseudo XML of Example Creating-Filters-3</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
  <td class="code"><pre><span class="tag">&lt;Filter&gt;</span>
   <span class="tag">&lt;And&gt;</span>
      <span class="tag">&lt;PropertyIsLike</span> <span class="attribute-name">wildCard</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">singleChar</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">?</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">escapeChar</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">\</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
           <span class="tag">&lt;PropertyName&gt;</span>metadata<span class="tag">&lt;/PropertyName&gt;</span>
           <span class="tag">&lt;Literal&gt;</span>mission<span class="tag">&lt;/Literal&gt;</span>
      <span class="tag">&lt;/PropertyIsLike&gt;</span>
      <span class="tag">&lt;PropertyIsLike</span> <span class="attribute-name">wildCard</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">singleChar</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">?</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">escapeChar</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">\</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
           <span class="tag">&lt;PropertyName&gt;</span>metadata<span class="tag">&lt;/PropertyName&gt;</span>
           <span class="tag">&lt;Literal&gt;</span>planning<span class="tag">&lt;/Literal&gt;</span>
      <span class="tag">&lt;/PropertyIsLike&gt;</span>
   <span class="tag">&lt;And&gt;</span>
<span class="tag">&lt;/Filter&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the Logical Operators and <code>PropertyIsLike</code> filters, a developer can create a whole language of search phrase expressions.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_fuzzy_operations"><a class="anchor" href="#_fuzzy_operations"></a><a class="link" href="#_fuzzy_operations">1.19.2.2. Fuzzy Operations</a></h5>
<div class="paragraph">
<p>DDF only supports one custom function.
The Filter specification does not include a fuzzy operator, so a Filter function was created to represent a fuzzy operation.
The function and class is called <code>FuzzyFunction</code>, which is used by clients to notify the Sources to perform a fuzzy search.
The syntax expected by providers is similar to the Fuzzy Function.
Refer to the example below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td>
  <td class="code"><pre><span class="predefined-type">String</span> wildcardChar = <span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span> ; <span class="comment">// used to match zero or more characters</span>
<span class="predefined-type">String</span> singleChar = <span class="string"><span class="delimiter">&quot;</span><span class="content">?</span><span class="delimiter">&quot;</span></span> ; <span class="comment">// used to match exactly one character</span>
<span class="predefined-type">String</span> escapeChar = <span class="string"><span class="delimiter">&quot;</span><span class="char">\\</span><span class="delimiter">&quot;</span></span> ; <span class="comment">// used to escape the meaning of the wildCard, singleChar</span>

<span class="type">boolean</span> isCaseSensitive = <span class="predefined-constant">false</span> ;

<span class="predefined-type">Filter</span> fuzzyFilter = filterFactory.like(
     <span class="keyword">new</span> DDF.catalog.impl.filter.FuzzyFunction(
          <span class="predefined-type">Arrays</span>.asList((<span class="predefined-type">Expression</span>) (filterFactory.property(Metacard.ANY_TEXT))),
          filterFactory.literal(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)),
     searchPhrase,
     wildcardChar,
     singleChar,
     escapeChar,
     isCaseSensitive);

QueryImpl query = <span class="keyword">new</span> QueryImpl(fuzzyFilter);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parsing_filters"><a class="anchor" href="#_parsing_filters"></a><a class="link" href="#_parsing_filters">1.19.3. Parsing Filters</a></h4>
<div class="paragraph">
<p>According to the <a href="http://www.opengeospatial.org/standards/filter">OGC Filter Specification 04-095</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Developing Filters"></span>: a "(filter expression) representation can be &#8230;&#8203; parsed and then transformed into whatever target language is required to retrieve or modify object instances stored in some persistent object store."
Filters can be thought of as the <code>WHERE</code> clause for a SQL SELECT statement to "fetch data stored in a SQL-based relational database." </p>
</div>
<div class="paragraph">
<p>Sources can parse OGC Filters using the <code>FilterAdapter</code> and <code>FilterDelegate</code>.
See Developing a Filter Delegate for more details on implementing a new <code>FilterDelegate</code>.
This is the preferred way to handle OGC Filters in a consistent manner.</p>
</div>
<div class="paragraph">
<p>Alternately, <code>org.opengis.filter.Filter</code> implementations can be parsed using implementations of the interface <code>org.opengis.filter.FilterVisitor</code>. 
The <code>FilterVisitor</code> uses the <a href="http://www.oodesign.com/visitor-pattern.html">Visitor pattern</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Developing Filters"></span>. Essentially, <code>FilterVisitor</code> instances "visit" each part of the <code>Filter</code> tree allowing developers to implement logic to handle the filter&#8217;s operations. 
GeoTools 8 includes implementations of the <code>FilterVisitor</code> interface.
The <code>DefaultFilterVisitor</code>, as an example, provides only business logic to visit every node in the <code>Filter</code> tree.
The <code>DefaultFilterVisitor</code> methods are meant to be overwritten with the correct business logic. 
The simplest approach when using <code>FilterVisitor</code> instances is to build the appropriate query syntax for a target language as each part of the <code>Filter</code> is visited.
For instance, when given an incoming <code>Filter</code> object to be evaluated against a RDBMS, a <code>CatalogProvider</code> instance could use a <code>FilterVisitor</code> to interpret each filter operation on the <code>Filter</code> object and translate those operations into SQL.
The <code>FilterVisitor</code> may be needed to support <code>Filter</code> functionality not currently handled by the <code>FilterAdapter</code> and <code>FilterDelegate</code> reference implementation.</p>
</div>
<div class="sect4">
<h5 id="_interpreting_a_filter_to_create_sql"><a class="anchor" href="#_interpreting_a_filter_to_create_sql"></a><a class="link" href="#_interpreting_a_filter_to_create_sql">1.19.3.1. Interpreting a Filter to Create SQL</a></h5>
<div class="paragraph">
<p>If the <code>FilterAdapter</code> encountered or "visited" a <code>PropertyIsLike</code> filter with its property assigned as <code>title</code> and its literal expression assigned as <code>mission</code>, the <code>FilterDelegate</code> could create the proper SQL syntax similar to title <code>LIKE</code> mission.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATYAAADuCAIAAAA8xLwIAAARpklEQVR42u2df0hV5x/HBxoi4a7DMIkokd1+MCKiMSSixAkSF4sGCSt3qX+CwUb4z/pj/TGE/iiwtkm0IJw0aZW4ytjMIpfNLJdYoRI2TbtKhW0rZ6Zm99v3jQcOl3vzqPeX53pfrz8u9zzPOeee83ye13me55x7znnnDQDYmHcoAgAUBYCQFf0fANgGFAVAUQBAUQAUBQAUBQAUBUBRAEBRABQFABQFABQFQFEAQFEAFAUAFAUAFAVAUQBAUQAURVEAFAUAFAVAUQBAUQAURVEAFAUAFAVAUQBAUQBAUQAUBQAUBUDRmfMOQBzjcDi2bt3a2tpqa0X/BYhX7ty5c+DAgbS0tF9//XV4eHh0dHR8fNzr9aIogI1oaWl5//33Ozs79f3FixdjY2PBWYqiAJHi008//eqrrzwez9OnT4eGhl69eoWiADbixx9/3LhxY0dHR29vryxVp/f169coCmAXbt++vXDhwqamJlna19f3/PnzIBpSFAWIFI8fP5YLFy9ebG5uvn///sDAwMjICIoC2Ai5cO7cuYaGhra2tv7+/hcvXqAogL0UraqqunLlSmtrq0akg4ODKApgL0VPnz596dKllpaW7u7uZ8+eoSiAvRQ9depUXV3drVu3urq6lIKiAPZS9Oeff5aif/75pxT9559/UBTAdopevHhRiv71118oCoCiMa5oa2vrjh07Fi9ezA0Zc57U1NStW7c2NDSgaMwoqpLKyMg4fPhwT0/PG5jrKMplZWVpaWk1NTUoGgOKPnz4MDMzs62tjbobV0iMZcuWSVcUtbuihw4dKioqosrGIbt27SopKUFRuyu6ZcuWqqoq6mscUl1d7XK5UNTuiq5YsUJlRH2NQzwez5IlS1DU7oomJiYODQ1RX+OQkZGR2aqTKDqzwqKyxi0oGneK+l2CS05OXr9+fWVlpQ2r5kx3fPqLWM/pmxvEZqAoioaz6nd0dGRnZyvlyJEjKIqiKGo7RUVnZ6dSsrKyUDQsm4GiKBr+qq+UefPm+c4wMjKyZ88eh8NhptfX16tLnDyBvmjSb50VFRXLly9PSkrKzMw8ceKE7/obGxtzc3O1oNa2Zs2aM2fO+C3r93N+vXGlrFu3Tl+qq6vNBWtra5Wydu3ayXatv7/f7XanpKRonVpzUVFRU1NTiK2oOh2LFi1SyrFjx6bcNRRF0fAoeu/ePd9W1JihrKzM4/GY81y+fFmJmzZt0vYMDg7qiyaV6LuImetyuTR54cIFI/fatWsJCQl5eXlPnjwZHx/fvXu3csvLyy1+LnA75bwmCwoKzBTpp5TS0tLJFpG9mjQOJcPDw5InJycnFEVl+IIFC2S7uePWu4aiKBrOsejRo0d9Z/C7ErthwwYlamZzKU2qLfVdZLJciaHJ7u5uY3JsbEyTTqfT4ucCt9Pr9aanp8uHgYEBYyVqtTQpNyZbJGGCu3fvhmUsqkZ7/vz5ixcvNndzyl1DURQNwxld9Uvl0smTJ62rr3zwSzTOBk+2iG+usawfksfalsD0ffv2mc2m0aiq+bJYxGhFjX1UF7S4uPjRo0fBKVpZWakN1rHMOED4Fctku4aiKBqR0zBhV1SGaFLN4Iy2JzBdPWHV/lWrVul7fn6+Mfq1WERj0Z07d6rtNeWRqMEp+t577+lTHXi//5BY7xqKomj0FDU6uman8a0d3clyc3NzNamOYoiKCmOUW1dXJ1elhzqW01mVRokaGAeeEpu+oto1Q/WVK1f29vaac1rvGoqiaPQUra+vV6LaLt8TQlLFdxG/XPN00c2bN9WiqnJ3dnZqUvOo3yjnrbdnwYIFSvcdapqbkZGRoc/Au3/8VqXtOX/+vKFxY2OjstRTDXosqo03zuXK1atXr05n11AURaOnqKGHKp/aLrVFaiHNs5q+F11UWZWblZXld9FFrdC2bdtSUlI0m9xzu91TXv8oLy93OByBuU6n00g0DxCTbbl+Yvv27VqJmlx9qtPrNxYNxPqMrnramZmZxmjTPG1rsWsoiqIx/DeDoCktLTUa0jfxAYqiaCwp6vV61b8N+7VHFEXROa5o0gSR/hX1J/UrGgrGj58oyv2iYGtevnyJojx1AexLb28vT12IAUULCgrMCxgQV9TU1BiXslDU1ooePHiQJwDGJ263mycAxoCiPT09S5cu5Tm68UZ7e7vT6eQ5urHxNHp1eBYuXFhaWvrgwQPq7pynq6tLsU5PT+dp9LH0Tpfm5ubCwkLfP4XDXMXhcLhcLt7pwpvRAFAUAEVRFABFAVAURQFQFEUBUBQARVEUAEUBUBRFAVAURQFQFABFURQARSEq4Y/Qmh0OB8WLomBfRYkgigKKoiiKoiiKoiiKoiigKKAoiqIoiqIoigKKoiiKxguPHz+OXDknJib29fVRyCgKwdPe3h6595Q4nc6WlhYKGUUheKqqqiL3nhKXy6WKRSGjKATPZ599Frn3lBw4cKCwsJBCRlEIEvVCI/qeEq1Zvejr169T1CgKM+POnTtq4qLwnhKtX7+yf/9+/SLFjqKxgfE+mEWLFsXJe0rs8P4b7e/mzZtn970sKBob0KrMYq8hLS1tFt9uhqIxAGOzuT32RtGYhzOcs05Ez2CjaMyj4V9FRQWezCI//fSTooCiKPp2+LfNrBPRf1OhaMzDf1ZnnYj+JxlFYx6u9BIFFKVyAIqiKIoSBRRFUSAKKErlQFEURVEUJQooSuUAFEVRFCUKKIqiQBRQlMqBoiiKoihKFFCUygEoiqJUDhRFURQFooCis0R2dvZkD7zKysrCFqKAorPM/v37J6sce/fuRR6igKKzjEozKSnprZWDh4wRBRS1BR9//HFgzfjwww8xhyigqC2oqKgIrByx+BA6ooCic1PRvr6++fPn+1UOlTLaEAUUtQuFhYW+NWPjxo04QxRQ1EacPXvWt3L88MMPCEMUUNRepKWlGTVD3a1YfGEBUUDROa7oF198YVSOzZs3owpRQFHbcenSJaNyVFVVoQpRQFE74nQ61dF6/PgxqhAFFLUje/fu/fzzz5GEKKCoTWlpafntt9+QhCigKMBcA0UBUBRFAVAUAEVRFABFURQARQFQNOKKtra27tixY/Hixe/ATEhNTd26dWtDQ0MUqhcxCj0KsaqotjgjI+Pw4cM9PT1vYCaoxMrKytLS0mpqaiLqJzEKSxRiUtGHDx9mZma2tbUR6aBRsJctWxa527KIUbiiEJOKHjp0qKioiACHyK5duyL3CB9iFK4oxKSiW7ZsqaqqIrohUl1d7XK5IqQoMQpXFGJS0RUrVmhbiW6IeDyeJUuWREhRYhSuKMSkoomJiUNDQ0Q3REZGRiJ3cYsYhSsKMamocgltWIicosQoXFGYg4r6XYBKTk5ev359ZWWlDQMz6/XYJopaF4VfbhTKLcqhiVNFzcmOjg7j9VhHjhxBURRFUdspKjo7O42X1aFoLCoa/XJD0WgraiTOmzfPdwYN0/fs2eNwOMz0+vp6dYmTJ9AXTfqts6KiYvny5UlJSZmZmSdOnPBdf2NjY25urhbU2tasWXPmzBm/Zf1+zq83rpR169bpS3V1tblgbW2tUtauXUsrauYGlltw5W9c7TCylOJ0Ovft2zc+Po6is6PovXv3fFtRY4aysjKPx2POc/nyZSVu2rRJ6x8cHNQXTSrRdxEz1+VyafLChQtG7rVr1xISEvLy8p48eaIw7969W7nl5eUWPxe4nXJekwUFBWaK2+1WSmlpKYpad3SDK/9vvvlGR2HvBMeOHdM8xcXFKDqbY9GjR4/6zuB31W7Dhg1K1MzmUppUW+q7yGS5OTk5muzu7jYmx8bGNKkDs8XPBW6nKkp6erqq2sDAgLESHd01qWqHotaKBlf+gb+iNhZFZ+GMrvqlcunkyZPWFUI++CUaZ4MnW8Q311jWD9llHe/AdPW1zGbTaFTVMgQumJqaanH/RBwqGkT568C3c+fOjIwM32WnDNmsRCFexqJTzhCKosZ7oNUMzmh7AtPVE1MtWbVqlb7n5+cbo19OF02paBDlr6O28ZbRt44/aUXtqKjR0b17965FR3ey3NzcXE3W1taGqKgwRrl1dXVyVTVPfTYUnVLRIMrf74isyKKo3RWtr69Xotou3xNCUsV3Eb9c83TRzZs31aKuXLmys7NTk5qnsrJSzltvz4IFC5TuN9Q0NkMdMH1G4U6RWFQ0sNyCKH/j/PmxY8feTNwRtnr1ahS1u6KGHoqr2i4dYtVCmqdzfS+6qB4oNysry++iiw7D27ZtS0lJ0WyqQ263u6mpyfrnysvLHQ5HYK7T6TQSzQNEnCgayFsL8K3lNtPyf/TokeZXrNVbMS7SoGhs/0c3mjErLS01GtL4+etCnIOisaSo1+tV/9b3sh6KoiiKTk3SBJH+FaPrlZ6eHh0/URRFY0PRt15QsT6FaIe/16JoGMMxuwFFURRFURSdW4rO1GEUpaOLopEK/5Rn+adzGcDiNgsUDSUux48fz8zM1Pj8gw8+qK2t3bdvnwbqmvzoo4/M/0v7haO/v9/tdqekpCgWDoejqKjIvPpikeUX0CnveTp79uy6deu0JZohLy/P/Hswitqxo2t9mwWKhhIUGaUiNf7OYU7W1dXpuw6Fbw3H2rVr9d2Qanh4WIfLnJycKbN81zCde57kp8fj8Xq9ZWVlod8wiKKRVdT6NgsUDSUoxu1jMsF3UiRM8NZwGFnmXzV9scjyXcOM7nkyts13Y1DUdopa32aBomEJyvQnjabSuMNJLW1xcfGjR4+mzAoMqN/GWN9QEfrOomgEFbW+zQJFo6yoBpw7d+7UkNU8XJpdYossFJ3LilrfZoGiUVbURKPWCxcu+D4QxyIrsKNrfc8TikZV0cA7J6a8tcJ3BuvbLFA0yorm5+efP3/euImvsbFR6dnZ2VNm+a5hOvc8oWhUFQ28c2LKWyumf5sFikZZUZX89u3bFa+EhAR9qmdrDjgtsgIvuljf84SiPI0+3hUlCigKKIqiKIqiEJ+K8tatsPDy5UvejGb/KPB+0filt7eX94vaPwoxqWhBQYH5aC8ImpqaGuPSQiQgRuGKQkwqevDgwSg8HW/O43a7S0pKIqQoMQpXFGJS0Z6enqVLl7a1tRHgoGlvb3c6nSrJCClKjMIVhZhUVKh7sHDhwtLS0gcPHhDpGdHV1aVyS09PVxn+G0mIUViiEKuKiubm5sLCQt9/RcN0cDgcLperoaHh38hDjEKPQgwrChAPoCgAiqIoAIoCoCiKAqAoigKgKACKhkRiYmJfXx/hgTint7fXpoouW7aspaWFCEGcc+PGjbS0NClaV1cnRbu6uuyiaEFBgTaLCEGc8/33369aterUqVNS9NatW1JUibZQ9LvvvissLCRCEM/8/fffOTk5n3zyyenTpy9duqR+ZXd397Nnz2yhqLZvyZIl169fJ04Qt5w8eTIjI+Pbb7+tqqq6cuVKa2urhqaDg4O2UFRofJyenl5SUnL79m2iBXHVeP7xxx9ffvnlu+++W1xcXF5efu7cuYaGhra2tv7+/hcvXthF0dHR0aampi1btmi4zI0REFckJyevXr3666+/Pn78uNpSNVfNzc33798fGBgYGRmxi6KvXr16/vx5X19fR0fHjRs3tJW//PKLOuUaOv8MMNdRPVdtV51XzVdbJQvkgoyQF3ZR1Ov1Dg8PP336VP1vbZ+OIlevXr18+XLdBBcB5i5GJVdt//3331Xz29vbZYFckBGvX7+2i6JGQzo0NKQt83g8nZ2dd+/ebWlpuXXr1p8Acx3Vc9V21XnVfNV/dXHlQhBNaGQVVUM6Njam8bHG0E+ePNGGPnjwoGuCvwDmLkYlV21XnVfNV/2Xn3JBRthLUcPS8fHx0dFRNfH//fffs2fPtLn/AMx1VM9V21XnVfNV/2VBcH5GXFEACBEUBUBRAEBRABQFABQFABQFQFEAQFEAFAUAFAUAFAVAUQBAUQAUBQAUBQAUBUBRAEBRABRFUQAUBQAUBUBRAEBRABRFUQAUBYDwKQoANgRFAVAUAILl/8IjsS14r6QnAAAAAElFTkSuQmCC" alt="Parsing Filters Tree Diagram" width="310" height="238">
</div>
<div class="title">Parsing Filters Tree Diagram</div>
</div>
</div>
<div class="sect4">
<h5 id="_interpreting_a_filter_to_create_xquery"><a class="anchor" href="#_interpreting_a_filter_to_create_xquery"></a><a class="link" href="#_interpreting_a_filter_to_create_xquery">1.19.3.2. Interpreting a Filter to Create XQuery</a></h5>
<div class="paragraph">
<p>If the <code>FilterAdapter</code> encountered an <code>OR</code> filter, such as in Figure Parsing-Filters2 and the target language was XQuery, the <code>FilterDelegate</code> could yield an expression such as </p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>ft:query(//inventory:book/@subject,'math') union
ft:query(//inventory:book/@subject,'science').</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png;base64,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" alt="Parsing Filters XQuery" width="570" height="336">
</div>
<div class="title">Parsing Filters XQuery</div>
</div>
<div class="sect5">
<h6 id="_filteradapterdelegate_process_for_figure_parsing"><a class="anchor" href="#_filteradapterdelegate_process_for_figure_parsing"></a><a class="link" href="#_filteradapterdelegate_process_for_figure_parsing">1.19.3.2.1. FilterAdapter/Delegate Process for Figure Parsing</a></h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>FilterAdapter</code> visits the <code>OR</code> filter first.</p>
</li>
<li>
<p><code>OR</code> filter visits its children in a loop. </p>
</li>
<li>
<p>The first child in the loop that is encountered is the LHS <code>PropertyIsLike</code>.</p>
</li>
<li>
<p>The <code>FilterAdapter</code> will call the <code>FilterDelegate</code> <code>PropertyIsLike</code> method with the LHS property and literal.</p>
</li>
<li>
<p>The LHS <code>PropertyIsLike</code> delegate method builds the XQuery syntax that makes sense for this particular underlying object store. In this case, the <em>subject</em> property is specific to this XML database, and the business logic maps the <em>subject</em> property to its index at <code>//inventory:book/@subject</code> Note that <code>ft:query</code> in this instance is a custom XQuery module for this specific XML database that does full text searches.</p>
</li>
<li>
<p>The <code>FilterAdapter</code> then moves back to the <code>OR</code> filter, which visits its second child.</p>
</li>
<li>
<p>The <code>FilterAdapter</code> will call the <code>FilterDelegate</code> <code>PropertyIsLike</code> method with the RHS property and literal.</p>
</li>
<li>
<p>The RHS <code>PropertyIsLike</code> delegate method builds the XQuery syntax that makes sense for this particular underlying object store. In this case, the <em>subject</em> property is specific to this XML database, and the business logic maps the <em>subject</em> property to its index at <code>//inventory:book/@subject</code> Note that <code>ft:query</code> in this instance is a custom XQuery module for this specific XML database that does full text searches.
. The <code>FilterAdapter</code> then moves back to its <code>OR</code> Filter which is now done with its children.</p>
</li>
<li>
<p>It then collects the output of each child and sends the list of results to the <code>FilterDelegate OR</code> method.</p>
</li>
<li>
<p>The final result object will be returned from the <code>FilterAdapter</code> adapt method.</p>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="_filtervisitor_process_for_figure_parsing"><a class="anchor" href="#_filtervisitor_process_for_figure_parsing"></a><a class="link" href="#_filtervisitor_process_for_figure_parsing">1.19.3.2.2. FilterVisitor Process for Figure Parsing</a></h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>FilterVisitor visits the <code>OR</code> filter first.</p>
</li>
<li>
<p><code>OR</code> filter visits its children in a loop. </p>
</li>
<li>
<p>The first child in the loop that is encountered is the LHS <code>PropertyIsLike</code>.</p>
</li>
<li>
<p>The LHS <code>PropertyIsLike</code> builds the XQuery syntax that makes sense for this particular underlying object store. In this case, the <em>subject</em> property is specific to this XML database, and the business logic maps the <em>subject</em> property to its index at <code>//inventory:book/@subject</code>. Note that <code>ft:query</code> in this instance is a custom XQuery module for this specific XML database that does full text searches.</p>
</li>
<li>
<p>The FilterVisitor then moves back to the <code>OR</code> filter, which visits its second child.</p>
</li>
<li>
<p>The RHS <code>PropertyIsLike</code> builds the XQuery syntax that makes sense for this particular underlying object store. In this case, the <em>subject</em> property is specific to this XML database, and the business logic maps the <em>subject</em> property to its index at <code>//inventory:book/@subject</code>. Note that <code>ft:query</code> in this instance is a custom XQuery module for this specific XML database that does full text searches.</p>
</li>
<li>
<p>The FilterVisitor then moves back to its <code>OR</code> filter, which is now done with its children. It then collects the output of each child and could potentially execute the following code to produce the above expression.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="directive">public</span> visit( Or filter, <span class="predefined-type">Object</span> data) {
...
   <span class="comment">/* the equivalent statement for the OR filter in this domain (XQuery) */</span>
   xQuery = childFilter1Output + <span class="string"><span class="delimiter">&quot;</span><span class="content"> union </span><span class="delimiter">&quot;</span></span> + childFilter2Output;
...
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_filter_profile"><a class="anchor" href="#_filter_profile"></a><a class="link" href="#_filter_profile">1.19.4. Filter Profile</a></h4>
<div class="paragraph">
<p>The filter profile maps filters to metacard types.</p>
</div>
<div class="sect4">
<h5 id="_role_of_the_ogc_filter"><a class="anchor" href="#_role_of_the_ogc_filter"></a><a class="link" href="#_role_of_the_ogc_filter">1.19.4.1. Role of the OGC Filter</a></h5>
<div class="paragraph">
<p>Both Queries and Subscriptions extend the OGC GeoAPI Filter interface.</p>
</div>
<div class="paragraph">
<p>The Filter Builder and Adapter do not fully implement the OGC Filter Specification.
The filter support profile contains suggested filter to metacard type mappings.
For example, even though a Source could support a <code>PropertyIsGreaterThan</code> filter on <code>XML_TYPE</code>, it would not likely be useful.</p>
</div>
</div>
<div class="sect4">
<h5 id="_catalog_filter_profile"><a class="anchor" href="#_catalog_filter_profile"></a><a class="link" href="#_catalog_filter_profile">1.19.4.2. Catalog Filter Profile</a></h5>
<div class="paragraph">
<p>The following table displays the common metacard attributes with their respective types for reference.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Metacard Attribute To Type Mapping</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metacard Attribute</th>
<th class="tableblock halign-left valign-top">Metacard Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ANY_DATE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATE_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ANY_GEO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEO_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ANY_TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONTENT_TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONTENT_TYPE_VERSION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CREATED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATE_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EFFECTIVE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATE_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEOGRAPHY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEO_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">METADATA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XML_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MODIFIED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATE_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RESOURCE_SIZE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RESOURCE_URI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOURCE_ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TARGET_NAMESPACE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">THUMBNAIL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BINARY_TYPE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TITLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING_TYPE</p></td>
</tr>
</tbody>
</table>
<div class="sect5">
<h6 id="_comparison_operators"><a class="anchor" href="#_comparison_operators"></a><a class="link" href="#_comparison_operators">1.19.4.2.1. Comparison Operators</a></h6>
<div class="paragraph">
<p>Comparison operators compare the value associated with a property name with a given Literal value.
Endpoints and sources should try to use metacard types other than the object type.
The object type only supports backwards compatibility with <code>java.net.URI</code>.  
Endpoints that send other objects will not be supported by standard sources.
The following table maps the metacard types to supported comparison operators.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Metacard Types to Comparison Operators</caption>
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3337%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">PropertyIs</th>
<th class="tableblock halign-left valign-top">Between</th>
<th class="tableblock halign-left valign-top">EqualTo</th>
<th class="tableblock halign-left valign-top">GreaterThan</th>
<th class="tableblock halign-left valign-top">GreaterThan</th>
<th class="tableblock halign-left valign-top">OrEqualTo</th>
<th class="tableblock halign-left valign-top">LessThan</th>
<th class="tableblock halign-left valign-top">LessThan</th>
<th class="tableblock halign-left valign-top">OrEqualTo</th>
<th class="tableblock halign-left valign-top">Like</th>
<th class="tableblock halign-left valign-top">NotEqualTo</th>
<th class="tableblock halign-left valign-top">Null</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BINARY_TYPE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN_TYPE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATE_TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE_TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FLOAT_TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p>
<p class="tableblock"> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEO_TYPE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER_TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LONG_TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBJECT_TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHORT_TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING_TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XML_TYPE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong>
 </p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Comparison Operators</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PropertyIsBetween</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lower &#8656; Property &#8656; Upper</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PropertyIsEqualTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property == Literal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PropertyIsGreaterThan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property &gt; Literal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PropertyIsGreaterThanOrEqualTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property &gt;= Literal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PropertyIsLessThan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property &lt; Literal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PropertyIsLessThanOrEqualTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property &#8656; Literal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PropertyIsLike</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property LIKE Literal</p>
<p class="tableblock">Equivalent to SQL "like" </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PropertyIsNotEqualTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property != Literal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PropertyIsNull</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property == null</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_logical_operators"><a class="anchor" href="#_logical_operators"></a><a class="link" href="#_logical_operators">1.19.4.2.2. Logical Operators</a></h6>
<div class="paragraph">
<p>Logical operators apply Boolean logic to one or more child filters.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Supported Logical Operators</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">And</th>
<th class="tableblock halign-left valign-top">Not</th>
<th class="tableblock halign-left valign-top">Or</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported Filters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_temporal_operators"><a class="anchor" href="#_temporal_operators"></a><a class="link" href="#_temporal_operators">1.19.4.2.3. Temporal Operators</a></h6>
<div class="paragraph">
<p>Temporal operators compare a date associated with a property name to a given Literal date or date range.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Supported Temporal Operators</caption>
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 8.3337%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">After</th>
<th class="tableblock halign-left valign-top">AnyInteracts</th>
<th class="tableblock halign-left valign-top">Before</th>
<th class="tableblock halign-left valign-top">Begins</th>
<th class="tableblock halign-left valign-top">BegunBy</th>
<th class="tableblock halign-left valign-top">During</th>
<th class="tableblock halign-left valign-top">EndedBy</th>
<th class="tableblock halign-left valign-top">Meets</th>
<th class="tableblock halign-left valign-top">MetBy</th>
<th class="tableblock halign-left valign-top">OverlappedBy</th>
<th class="tableblock halign-left valign-top">TContains</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATE_TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Literal values can be either date instants or date periods.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Temporal Operator Descriptions</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">After</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property &gt; (Literal || Literal.end)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Before</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property &lt; (Literal || Literal.start)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">During</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Literal.start &lt; Property &lt; Literal.end</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_spatial_operators"><a class="anchor" href="#_spatial_operators"></a><a class="link" href="#_spatial_operators">1.19.4.2.4. Spatial Operators</a></h6>
<div class="paragraph">
<p>Spatial operators compare a geometry associated with a property name to a given Literal geometry. </p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Supported Spatial Operators.</caption>
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.091%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BBox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beyond</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crosses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disjoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DWithin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intersects</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overlaps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Touches</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Within</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEO_TYPE</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>X</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Geometries are usually represented as Well-Known Text (<em>WKT</em>).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Spatial Operator Descriptions</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beyond</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property geometries beyond given distance of Literal geometry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property geometry contains Literal geometry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crosses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property geometry crosses Literal geometry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disjoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property geometry direct positions are not interior to Literal geometry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DWithin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property geometry lies within distance to Literal geometry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intersects</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property geometry intersects Literal geometry; opposite to the Disjoint operator </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overlaps</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property geometry interior overlaps Literal geometry interior somewhere</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Touches</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property geometry touches but does not overlap Literal geometry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Within</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property geometry completely contains Literal geometry</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_filter_delegates"><a class="anchor" href="#_developing_filter_delegates"></a><a class="link" href="#_developing_filter_delegates">1.20. Developing Filter Delegates</a></h3>
<div class="paragraph">
<p>Filter Delegates help reduce the complexity of parsing OGC Filters.
The reference Filter Adapter implementation contains the necessary boilerplate visitor code and input normalization to handle commonly supported OGC Filters.</p>
</div>
<div class="sect3">
<h4 id="_creating_a_new_filter_delegate"><a class="anchor" href="#_creating_a_new_filter_delegate"></a><a class="link" href="#_creating_a_new_filter_delegate">1.20.1. Creating a New Filter Delegate</a></h4>
<div class="paragraph">
<p>A Filter Delegate contains the logic that converts normalized filter input into a form that the target data source can handle.
Delegate methods will be called in a depth first order as the Filter Adapter visits filter nodes.</p>
</div>
<div class="sect4">
<h5 id="_implementing_the_filter_delegate"><a class="anchor" href="#_implementing_the_filter_delegate"></a><a class="link" href="#_implementing_the_filter_delegate">1.20.1.1. Implementing the Filter Delegate</a></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class extending <code>FilterDelegate</code>.<br>
<code>public class ExampleDelegate extends DDF.catalog.filter.FilterDelegate&lt;ExampleReturnObjectType&gt; {</code></p>
</li>
<li>
<p><code>FilterDelegate</code> will throw an appropriate exception for all methods not implemented. Refer to the DDF JavaDoc for more details about what is expected of each <code>FilterDelegate</code> method.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>A code example of a Filter Delegate can be found in <code>DDF.catalog.filter.proxy.adapter.test</code> of the <code>filter-proxy</code> bundle.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_throwing_exceptions"><a class="anchor" href="#_throwing_exceptions"></a><a class="link" href="#_throwing_exceptions">1.20.1.2. Throwing Exceptions</a></h5>
<div class="paragraph">
<p>Filter delegate methods can throw <code>UnsupportedOperationException</code> run-time exceptions.
The <code>GeotoolsFilterAdapterImpl</code> will catch and re-throw these exceptions as <code>UnsupportedQueryExceptions</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_using_the_filter_adapter"><a class="anchor" href="#_using_the_filter_adapter"></a><a class="link" href="#_using_the_filter_adapter">1.20.1.3. Using the Filter Adapter</a></h5>
<div class="paragraph">
<p>The FilterAdapter can be requested from the OSGi registry.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;reference</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">filterAdapter</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DDF.catalog.filter.FilterAdapter</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Query in a QueryRequest implements the Filter interface.
The Query can be passed to a <code>FilterAdapter</code> and <code>FilterDelegate</code> to process the Filter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td>
  <td class="code"><pre><span class="annotation">@Override</span>
<span class="directive">public</span> DDF.catalog.operation.QueryResponse query(DDF.catalog.operation.QueryRequest queryRequest)
    <span class="directive">throws</span> DDF.catalog.source.UnsupportedQueryException {

    DDF.catalog.operation.Query query = queryRequest.getQuery();

    DDF.catalog.filter.FilterDelegate&lt;ExampleReturnObjectType&gt; delegate = <span class="keyword">new</span> ExampleDelegate();

    <span class="comment">// DDF.catalog.filter.FilterAdapter adapter injected via Blueprint</span>
    ExampleReturnObjectType result = adapter.adapt(query, delegate);
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Import the Catalog API Filter package and the reference implementation package of the Filter Adapter in the bundle manifest (in addition to any other required packages).<br>
<code>Import-Package: DDF.catalog, DDF.catalog.filter, DDF.catalog.source</code></p>
</div>
</div>
<div class="sect4">
<h5 id="_filter_support"><a class="anchor" href="#_filter_support"></a><a class="link" href="#_filter_support">1.20.1.4. Filter Support</a></h5>
<div class="paragraph">
<p>Not all OGC Filters are exposed at this time.
If demand for further OGC Filter functionality is requested, it can be added to the Filter Adapter and Delegate so sources can support more complex filters.
The following OGC Filter types are currently available:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Logical</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">And</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Or</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exclude</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property Comparison</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyIsBetween</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyIsEqualTo</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyIsGreaterThan</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyIsGreaterThanOrEqualTo</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyIsLessThan</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyIsLessThanOrEqualTo</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyIsLike</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyIsNotEqualTo</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyIsNull</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>Spatial</code></th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Beyond</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the geometry being tested is beyond the stated distance of the geometry provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Contains</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the second geometry is wholly inside the first geometry.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Crosses</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if:
* the intersection of the two geometries results in a value whose dimension is less than the geometries
* the maximum dimension of the intersection value includes points interior to both the geometries
* the intersection value is not equal to either of the geometries.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Disjoint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the two geometries do not touch or intersect.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DWithin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the geometry being tested is within the stated distance of the geometry provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Intersects</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if the two geometries intersect. This is a convenience method as <code>Not Disjoint(A,B)</code> gets the same result.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Overlaps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the intersection of the geometries results in a value of the same dimension as the geometries that is different from both of the geometries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Touches</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if and only if the only common points of the two geometries are in the union of the boundaries of the geometries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Within</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the first geometry is wholly inside the second geometry.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Temporal</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://docs.geotools.org/latest/javadocs/org/opengis/filter/temporal/After.html">After</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Developing Filter Delegates"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://docs.geotools.org/latest/javadocs/org/opengis/filter/temporal/Before.html">Before</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Developing Filter Delegates"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://docs.geotools.org/latest/javadocs/org/opengis/filter/temporal/During.html">During</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Developing Filter Delegates"></span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_action_components"><a class="anchor" href="#_developing_action_components"></a><a class="link" href="#_developing_action_components">1.21. Developing Action Components</a></h3>
<div class="paragraph">
<p>To provide a service, such as a link to a metacard, the <code>ActionProvider</code> interface should be implemented.
An <code>ActionProvider</code> essentially provides a List of <code>Actions</code> when given input that it can recognize and handle.
For instance, if a REST endpoint ActionProvider was given a metacard, it could provide a link based on the metacard&#8217;s ID. 
An Action Provider performs an action when given a subject that it understands.
If it does not understand the subject or does not know how to handle the given input, it will return <code>Collections.emptyList()</code>.
An Action Provider is required to have an ActionProvider id.
The Action Provider must register itself in the OSGi Service Registry with the <code>ddf.action.ActionProvider</code> interface and must also have a service property value for <code>id</code>. 
An action is a URL that, when invoked, provides a resource or executes intended business logic. </p>
</div>
<div class="sect3">
<h4 id="_action_component_naming_convention"><a class="anchor" href="#_action_component_naming_convention"></a><a class="link" href="#_action_component_naming_convention">1.21.1. Action Component Naming Convention</a></h4>
<div class="paragraph">
<p>For each Action, a title and description should be provided to describe what the action does.
The recommended naming convention is to use the verb 'Get' when retrieving a portion of a metacard, such as the metadata or thumbnail, or when downloading a resource.
The verb 'Export' or the expression 'Export as' is recommended when the metacard is being exported in a different format or presented after going some transformation.</p>
</div>
<div class="sect4">
<h5 id="_action_component_taxonomy"><a class="anchor" href="#_action_component_taxonomy"></a><a class="link" href="#_action_component_taxonomy">1.21.1.1. Action Component Taxonomy</a></h5>
<div class="paragraph">
<p>An Action Provider registers an <code>id</code> as a service property in the OGSi Service Registry based on the type of service or action that is provided.
Regardless of implementation, if more than one Action Provider provides the same service, such as providing a URL to a thumbnail for a given metacard, they must both register under the same <code>id</code>.
Therefore, Action Provider implementers must follow an Action Taxonomy. </p>
</div>
<div class="paragraph">
<p>The following is a sample taxonomy: </p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>catalog.data.metacard</code> shall be the grouping that represents Actions on a Catalog metacard.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>catalog.data.metacard.view</code></p>
</li>
<li>
<p><code>catalog.data.metacard.thumbnail</code></p>
</li>
<li>
<p><code>catalog.data.metacard.html</code></p>
</li>
<li>
<p><code>catalog.data.metacard.resource</code></p>
</li>
<li>
<p><code>catalog.data.metacard.metadata</code></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Action ID Service Descriptions</caption>
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 57.1428%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Required Action</th>
<th class="tableblock halign-left valign-top">Naming Convention</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.data.metacard.view</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides a valid URL to view a metacard. Format of data is not specified; i.e. the representation can be in XML, JSON, or other.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export as &#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.data.metacard.thumbnail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides a valid URL to the bytes of a thumbnail (<code>Metacard.THUMBNAIL</code>) with MIME type image/jpeg.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export as Thumbnail</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.data.metacard.map.overlay.thumbnail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides a metacard URL that translates the metacard into a geographically aligned image (suitable for overlaying on a map).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export as Thumbnail Overlay</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.data.metacard.html</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides a valid URL that, when invoked, provides an HTML representation of the metacard.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export as HTML</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.data.metacard.xml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides a valid URL that, when invoked, provides an XML representation of the metacard.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export as XML</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.data.metacard.geojson</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides a valid URL that, when invoked, provides an XML representation of the metacard.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export as GeoJSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.data.metacard.resource</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides a valid URL that, when invoked, provides the underlying resource of the metacard.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export as Resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.data.metacard.metadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides a valid URL to the XML metadata in the metacard (<code>Metacard.METADATA</code>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export as Metadata</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_query_options"><a class="anchor" href="#_developing_query_options"></a><a class="link" href="#_developing_query_options">1.22. Developing Query Options</a></h3>
<div class="paragraph">
<p>The easiest way to create a Query is to use the <code>ddf.catalog.operation.QueryImpl</code> object.
It is first necessary to create an OGC Filter object then set the Query Options after <code>QueryImpl</code> has been constructed.</p>
</div>
<div class="listingblock">
<div class="title"><code>QueryImpl</code> Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td>
  <td class="code"><pre><span class="comment">/*
  Builds a query that requests a total results count and
  that the first record to be returned is the second record found from
  the requested set of metacards.
 */</span>

 <span class="predefined-type">String</span> property = ...;

 <span class="predefined-type">String</span> value = ...;

 org.geotools.filter.FilterFactoryImpl filterFactory = <span class="keyword">new</span> FilterFactoryImpl() ;

 QueryImpl query = <span class="keyword">new</span> QueryImpl( filterFactory.equals(filterFactory.property(property),

filterFactory.literal(value))) ;

 query.setStartIndex(<span class="integer">2</span>) ;

 query.setRequestsTotalResultsCount(<span class="predefined-constant">true</span>);</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_evaluating_a_query"><a class="anchor" href="#_evaluating_a_query"></a><a class="link" href="#_evaluating_a_query">1.22.1. Evaluating a query</a></h4>
<div class="paragraph">
<p>Every Source must be able to evaluate a Query object.
Nevertheless, each Source could evaluate the Query differently depending on what that Source supports as to properties and query capabilities.
For instance, a common property all Sources understand is id, but a Source could possibly store frequency values under the property name "frequency."
Some Sources may not support frequency property inquiries and will
throw an error stating it cannot interpret the property.
In addition, some Sources might be able to handle spatial operations, while others might not.
A developer should consult a Source&#8217;s documentation for the limitations, capabilities, and properties that a Source can support.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. <a id="_query_options"></a>Query Options</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>StartIndex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-based index that states which metacard the Source should return first out of the requested metacards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PageSize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the maximum amount of metacards the Source should return.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SortBy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines how the results are sorted and on which property.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RequestsTotalResultsCount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines whether the total number of results should be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TimeoutMillis</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of time in milliseconds before the query is to be abandoned. If a zero or negative timeout is set, the catalog framework will default to a value configurable via the Admin UI under Catalog &#8594; Configuration &#8594; Query Operations.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_commons_ddf_utilities"><a class="anchor" href="#_commons_ddf_utilities"></a><a class="link" href="#_commons_ddf_utilities">1.22.2. Commons-DDF Utilities</a></h4>
<div class="paragraph">
<p>The <code>commons-DDF</code> bundle provides utilities and functionality commonly used across other DDF components, such as the endpoints and providers. </p>
</div>
<div class="sect4">
<h5 id="_fuzzyfunction"><a class="anchor" href="#_fuzzyfunction"></a><a class="link" href="#_fuzzyfunction">1.22.2.1. FuzzyFunction</a></h5>
<div class="paragraph">
<p><code>DDF.catalog.impl.filter.FuzzyFunction</code> class is used to indicate that a <code>PropertyIsLike</code> filter should interpret the search as a fuzzy query. </p>
</div>
</div>
<div class="sect4">
<h5 id="_xpathhelper"><a class="anchor" href="#_xpathhelper"></a><a class="link" href="#_xpathhelper">1.22.2.2. XPathHelper</a></h5>
<div class="paragraph">
<p><code>DDF.util.XPathHelper</code> provides convenience methods for executing XPath operations on XML.
It also provides convenience methods for converting XML as a <code>String</code> from a <code>org.w3c.dom.Document</code> object and vice versa.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_managed_service_factory_bundles"><a class="anchor" href="#_configuring_managed_service_factory_bundles"></a><a class="link" href="#_configuring_managed_service_factory_bundles">1.23. Configuring Managed Service Factory Bundles</a></h3>
<div class="paragraph">
<p>Services that are created using a Managed Service Factory can be configured using <code>.config</code> files as well.
These configuration files, however, follow a different naming convention than <code>.cfg</code> files.
The filenames must start with the Managed Service Factory PID, be followed by a dash and a unique identifier, and have a <code>.config</code> extension.
For instance, assuming that the Managed Service Factory PID is <code>org.codice.ddf.factory.pid</code> and two instances of the service need to be configured, files <code>org.codice.ddf.factory.pid-&lt;UNIQUE ID 1&gt;.config</code> and <code>org.codice.ddf.factory.pid-&lt;UNIQUE ID 2&gt;.config</code> should be created and added to <code>&lt;DDF_HOME&gt;/etc</code>.</p>
</div>
<div class="paragraph">
<p>The unique identifiers used in the file names have no impact on the order in which the configuration files are processed.
No specific processing order should be assumed.
Also, a new service will be created and configured every time a configuration file matching the Managed Service Factory PID is added to the directory, regardless of the <em>unique id</em> used.</p>
</div>
<div class="paragraph">
<p>Any <code>service.factoryPid</code> and <code>service.pid</code> values in these <code>.config</code> files will be overridden by the values parsed from the file name, so <code>.config</code> files should not contain these properties.</p>
</div>
<div class="sect3">
<h4 id="_file_format"><a class="anchor" href="#_file_format"></a><a class="link" href="#_file_format">1.23.1. File Format</a></h4>
<div class="paragraph">
<p>The basic syntax of the <code>.config</code> configuration files is similar to the older <code>.cfg</code> files but introduces support for lists and types other than simple strings.
The type associated with a property must match the type attribute used in the corresponding <code>metatype.xml</code> file when applicable.</p>
</div>
<div class="paragraph">
<p>The following table shows the format to use for each property type supported.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Property Formats</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Format (see details below for variations)</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name="value"</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>name="John"</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name=B"true|false"</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>authorized=B"true"</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name=I"value"</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>timeout=I"10"</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name=L"value"</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>diameter=L"100"</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name=F"value"</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cost=F"1093140480"</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name=D"value"</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>latitude=D"4636745974857667812"</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Strings</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name=["value1","value2",…​]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>complexStringArray=[ \
  "{\"url\"\ \"http://test.sample.com\"\ \"layers\"\ [\"0\"]\ \"VERSION\"\ \"1.1|1.2\"\ \"image/png\"}\ \"beta\"\ 1}", \
  "{\"url\"\ \"http://test.sample.com"\ 0.5}", \
  "/security-config\=SAML|basic", \
  ]</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Booleans</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name=B["true|false","true|false",…​]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>authorizedList=B[ \
  "true", \
  "false", \
  ]</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Integers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name=I["value1","value2",…​]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>sizes=I[ \
  "10", \
  "20", \
  "30", \
  ]</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Longs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name=L["value1","value2",…​]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>sizes=L[ \
  "100", \
  "200", \
  "300", \
  ]</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Floats</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name=F["value1","value2",…​]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>sizes=F[ \
  "1066192077", \
  "1074580685", \
  "1079194419", \
  ]</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Doubles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name=D["value1","value2",…​]</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>sizes=D[ \
  "4607736361554183979", \
  "4612212939583790252", \
  "4614714689176794563", \
  ]</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Values with types other than String must be prefixed with a lower-case or upper-case character. See the examples in the table.</p>
<div class="ulist">
<ul>
<li>
<p>Boolean: <code>B</code> or <code>b</code></p>
</li>
<li>
<p>Integer: <code>I</code> or <code>i</code></p>
</li>
<li>
<p>Long: <code>L</code> or <code>l</code></p>
</li>
<li>
<p>Float: <code>F</code> or <code>f</code></p>
</li>
<li>
<p>Double: <code>D</code> or <code>d</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Equal signs (<code>=</code>), double quotes (<code>"</code>), and spaces within values must must be escaped using a backslash (<code>\</code>).</p>
</li>
<li>
<p>When properties are split over multiple lines for readability, end of lines must be specified with a backslash (<code>\</code>). See the examples for lists in the table.</p>
</li>
<li>
<p>A comma (<code>,</code>) after the last value in a list is optional.</p>
</li>
<li>
<p>Surrounding the equal signs (<code>=</code>) with spaces for properties is optional.
Because there is a known issue when using OPS4J Pax Exam 4.11.0 and modifying <code>.config</code> files that include spaces, all default <code>.config</code> files that may be modified in OPS4J Pax Exam 4.11.0 tests should not include spaces.</p>
</li>
<li>
<p>Boolean values will default to <code>false</code> if any value other than <code>true</code> is provided.</p>
</li>
<li>
<p>Float values must be representated in the IEEE 754 floating-point "single format" bit layout, preserving Not-a-Number (NaN) values.
For example, <code>F"1093140480"</code> corresponds to <code>F"10.5"</code>.
See the documentation for <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt(java.lang.String)">java.lang.Integer#parseInt(java.lang.String)</a> and <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#intBitsToFloat(int)">java.lang.Float#intBitsToFloat(int)</a> for more details.</p>
</li>
<li>
<p>Double values must be represented in the IEEE 754 floating-point "double format" bit layout, preserving Not-a-Number (NaN) values.
For example, <code>D"4636745974857667812"</code> corresponds to <code>D"100.1234"</code>.
See the documentation for <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#parseLong(java.lang.String)">java.lang.Long#parseLong(java.lang.String)</a> and <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#longBitsToDouble(long)">java.lang.Double#longBitsToDouble</a> for more details.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Sample configuration file</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="linenums">webAuthenticationTypes=&quot;basic&quot;
endpointAuthenticationTypes=&quot;&quot;
sessionAccess=B&quot;true&quot;
guestAccess=B&quot;true&quot;
realms=[ \
  &quot;/\=karaf&quot;, \
  ]
requiredAttributes=[ \
  &quot;/\=&quot;, \
  &quot;/admin\={http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role\=admin}&quot;, \
  &quot;/system\={http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role\=admin}&quot;, \
  &quot;/security-config\={http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role\=admin}&quot;, \
  ]
whiteListContexts=[ \
  &quot;/services/SecurityTokenService&quot;, \
  &quot;/services/internal/metrics&quot;, \
  &quot;/services/saml&quot;, \
  &quot;/proxy&quot;, \
  &quot;/services/csw&quot;, \
  ]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_xacml_policies"><a class="anchor" href="#_developing_xacml_policies"></a><a class="link" href="#_developing_xacml_policies">1.24. Developing XACML Policies</a></h3>
<div class="paragraph">
<p>This document assumes familiarity with the XACML schema and does not go into detail on the XACML language.
When creating a policy, a target is used to indicate that a certain action should be run only for one type of request.
Targets can be used on both the main policy element and any individual rules.
Targets are geared toward the actions that are set in the request.
These actions generally consist of the standard CRUD operations (create, read, update, delete) or a SOAPAction if the request is coming through a SOAP endpoint.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>These are only the action values that are currently created by the components that come with DDF.
Additional components can be created and added to DDF to identify specific actions.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the examples below, the policy has specified targets for the above type of calls.
For the Filtering code, the target was set for "filter", and the Service validation code targets were geared toward two services: <code>query</code> and <code>LocalSiteName</code>.
In a production environment, these actions for service authorization will generally be full URNs that are described within the SOAP WSDL.</p>
</div>
<div class="sect3">
<h4 id="_xacml_policy_attributes"><a class="anchor" href="#_xacml_policy_attributes"></a><a class="link" href="#_xacml_policy_attributes">1.24.1. XACML Policy Attributes</a></h4>
<div class="paragraph">
<p>Attributes for the XACML request are populated with the information in the calling subject and the resource being checked.</p>
</div>
</div>
<div class="sect3">
<h4 id="_xacml_policy_subject"><a class="anchor" href="#_xacml_policy_subject"></a><a class="link" href="#_xacml_policy_subject">1.24.2. XACML Policy Subject</a></h4>
<div class="paragraph">
<p>The attributes for the subject are obtained from the SAML claims and populated within the XACML policy as individual attributes under the <code>urn:oasis:names:tc:xacml:1.0:subject-category:access-subject</code> category.
The name of the claim is used for the <code>AttributeId</code> value.
Examples of the items being populated are available at the end of this page.</p>
</div>
</div>
<div class="sect3">
<h4 id="_xacml_policy_resource"><a class="anchor" href="#_xacml_policy_resource"></a><a class="link" href="#_xacml_policy_resource">1.24.3. XACML Policy Resource</a></h4>
<div class="paragraph">
<p>The attributes for resources are obtained through the permissions process.
When checking permissions, the XACML processing engine retrieves a list of permissions that should be checked against the subject.
These permissions are populated outside of the engine and should be populated with the attributes that should be asserted against the subject.
When the permissions are of a key-value type, the key being used is populated as the AttributeId value under the urn:oasis:names:tc:xacml:3.0:attribute-category:resource category.</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_a_xacml_policy"><a class="anchor" href="#_using_a_xacml_policy"></a><a class="link" href="#_using_a_xacml_policy">1.24.4. Using a XACML Policy</a></h4>
<div class="paragraph">
<p>To use a XACML policy, copy the XACML policy into the <code>&lt;DDF_HOME&gt;/etc/pdp/policies</code> directory.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assuring_authenticity_of_bundles_and_applications"><a class="anchor" href="#_assuring_authenticity_of_bundles_and_applications"></a><a class="link" href="#_assuring_authenticity_of_bundles_and_applications">1.25. Assuring Authenticity of Bundles and Applications</a></h3>
<div class="paragraph">
<p>DDF Artifacts in the JAR file format (such as bundles or KAR files) can be signed and verified using the tools included as part of the Java Runtime Environment.</p>
</div>
<div class="sect3">
<h4 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a><a class="link" href="#_prerequisites">1.25.1. Prerequisites</a></h4>
<div class="paragraph">
<p>To work with Java signatures, a keystore/truststore is required.
For testing or trial purposes DDF can sign and validate using a self-signed certificate, generated with the keytool utility.
In an actuall installation, a certificate issued from a trusted Certificate Authority will be used.</p>
</div>
<div class="paragraph">
<p>Additional documentation on keytool can be found at <a href="http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html">Keytool home</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Assuring Authenticity of Bundles and Applications"></span>.</p>
</div>
<div class="listingblock">
<div class="title">Using keytool to generate a self-signed certificate keystore</div>
<div class="content">
<pre class="CodeRay highlight"><code>~ $ keytool -genkey -keyalg RSA -alias selfsigned -keystore keystore.jks -storepass password -validity 360 -keysize 2048
What is your first and last name?
  [Unknown]:  Nick Fury
What is the name of your organizational unit?
  [Unknown]:  Marvel
What is the name of your organization?
  [Unknown]:  SHIELD
What is the name of your City or Locality?
  [Unknown]:  New York
What is the name of your State or Province?
  [Unknown]:  NY
What is the two-letter country code for this unit?
  [Unknown]:  US
Is CN=Nick Fury, OU=SHIELD, O=Marvel, L="New  York", ST=NY, C=US correct?
  [no]:  yes
Enter key password for &lt;selfsigned&gt;
    (RETURN if same as keystore password):
Re-enter new password:</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_signing_a_jarkar"><a class="anchor" href="#_signing_a_jarkar"></a><a class="link" href="#_signing_a_jarkar">1.25.2. Signing a JAR/KAR</a></h4>
<div class="paragraph">
<p>Once a keystore is available, the JAR can be signed using the <code>jarsigner</code>
 tool.</p>
</div>
<div class="paragraph">
<p>Additional documentation on jarsigner can be found at <a href="http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jarsigner.html">Jarsigner</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Assuring Authenticity of Bundles and Applications"></span>.</p>
</div>
<div class="listingblock">
<div class="title">Using jarsigner to sign a KAR</div>
<div class="content">
<pre class="CodeRay highlight"><code>~ $ jarsigner -keystore keystore.jks -keypass shield -storepass password  catalog-app-2.5.1.kar selfsigned</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_verifying_a_jarkar"><a class="anchor" href="#_verifying_a_jarkar"></a><a class="link" href="#_verifying_a_jarkar">1.25.2.1. Verifying a JAR/KAR</a></h5>
<div class="paragraph">
<p>The jarsigner utility is also used to verify a signature in a JAR-formatted file.</p>
</div>
<div class="listingblock">
<div class="title">Using jarsigner to verify a file</div>
<div class="content">
<pre class="CodeRay highlight"><code>~ $ jarsigner -verify -verbose -keystore keystore.jks catalog-app-2.5.1.kar
        9447 Mon Oct 06 17:05:46 MST 2014 META-INF/MANIFEST.MF
        9503 Mon Oct 06 17:05:46 MST 2014 META-INF/SELFSIGN.SF

[... section abbreviated for space]

smk     6768 Wed Sep 17 17:13:58 MST 2014 repository/ddf/catalog/security/catalog-security-logging/2.5.1/catalog-security-logging-2.5.1.jar
  s = signature was verified
  m = entry is listed in manifest
  k = at least one certificate was found in keystore
  i = at least one certificate was found in identity scope
jar verified.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the last line: <em>jar verified</em>.
This indicates that the signatures used to sign the JAR (or in this case, KAR) were valid according to the trust relationships specified by the keystore.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wfs_services"><a class="anchor" href="#_wfs_services"></a><a class="link" href="#_wfs_services">1.26. WFS Services</a></h3>
<div class="paragraph">
<p>The Web Feature Service (WFS) is an <a href="http://www.opengeospatial.org/">Open Geospatial Consortium (OGC)</a> Specification.
DDF supports the ability to integrate WFS 1.1, and 2.0 Web Services.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>DDF does not include a supported WFS Web Service (Endpoint) implementation.
Therefore, federation for 2 DDF instances is not possible via WFS.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">WFS Features</div>
<p>When a query is issued to a WFS server, the output of the query is an XML document that contains a collection of feature member elements.
Each WFS server can have one or more feature types with each type being defined by a schema that extends the WFS <code>featureMember</code> schema.
The schema for each type can be discovered by issuing a <code>DescribeFeatureType</code> request to the WFS server for the feature type in question.
The WFS source handles WFS capability discovery and requests for feature type description when an instance of the WFS source is configured and created.</p>
</div>
<div class="paragraph">
<p>See the <a href="managing.html#_wfs_1_1_source">WFS v1.1.0 Source</a>,
or <a href="managing.html#_wfs_2_0_source">WFS v2.0.0 Source</a> for more information about how to configure a WFS source.</p>
</div>
<div class="paragraph">
<div class="title">Converting a WFS Feature</div>
<p>In order to expose WFS features to DDF clients, the WFS feature must be converted into the common data format of the DDF, a metacard.
The OGC package contains a <code>GenericFeatureConverter</code> that attempts to populate mandatory metacard fields with properties from the WFS feature XML.
All properties will be mapped directly to new attributes in the metacard.
However, the <code>GenericFeatureConverter</code> may not be able to populate the default metacard fields with properties from the feature XML.</p>
</div>
<div class="paragraph">
<div class="title">Creating a Custom Converter</div>
<p>To more accurately map WFS feature properties to fields in the metacard, a custom converter can be created.
The OGC package contains an interface, <code>FeatureConverter</code>, which extends the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/converters/Converter.htmlConverter" class="bare">http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/converters/Converter.htmlConverter</a> interface provided by the <a href="http://xstream.codehaus.org/">XStream</a> project.
XStream is an open source API for serializing XML into Java objects and vice-versa.
Additionally, a base class, <code>AbstractFeatureConverter</code>, has been created to handle the mapping of many fields to reduce code duplication in the custom converter classes.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the <code>CustomConverter</code> class extending the <code>ogc.catalog.common.converter.AbstractFeatureConverter</code> class.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">CustomConverter</span> <span class="directive">extends</span> ogc.catalog.common.converter.AbstractFeatureConverter</code></pre>
</div>
</div>
</li>
<li>
<p>Implement the <code>FeatureConverterFactory</code> interface and the <code>createConverter()</code> method for the <code>CustomConverter</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
  <td class="code"><pre><span class="directive">public</span> <span class="type">class</span> <span class="class">CustomConverterFactory</span> <span class="directive">implements</span> FeatureConverterFactory {
    <span class="directive">private</span> <span class="directive">final</span> featureType;
    <span class="directive">public</span> CustomConverterFactory(<span class="predefined-type">String</span> featureType) {
        <span class="local-variable">this</span>.featureType = featureType;
    }
    <span class="directive">public</span> FeatureConverter createConverter() {
        <span class="keyword">return</span> <span class="keyword">new</span> CustomConverter();
    }
    <span class="directive">public</span> <span class="predefined-type">String</span> getFeatureType() {
        <span class="keyword">return</span> featureType;
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</li>
<li>
<p>Implement the <code>unmarshal</code> method required by the <code>FeatureConverter</code> interface. The <code>createMetacardFromFeature(reader, metacardType)</code> method implemented in the <code>AbstractFeatureConverter</code> is recommended.<br></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="directive">public</span> Metacard unmarshal(HierarchicalStreamReader reader, UnmarshallingContext ctx) {
  MetacardImpl mc = createMetacardFromFeature(reader, metacardType);
  <span class="comment">//set your feature specific fields on the metacard object here</span>
  <span class="comment">//</span>
  <span class="comment">//if you want to map a property called &quot;beginningDate&quot; to the Metacard.createdDate field</span>
  <span class="comment">//you would do:</span>
  mc.setCreatedDate(mc.getAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">beginningDate</span><span class="delimiter">&quot;</span></span>).getValue());
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</li>
<li>
<p>Export the <code>ConverterFactory</code> to the OSGi registry by creating a <code>blueprint.xml</code> file for its bundle. The bean id and argument value must match the WFS Feature type being converted.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;blueprint</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.osgi.org/xmlns/blueprint/v1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:cm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">custom_type</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.converter.factory.CustomConverterFactory</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;argument</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">custom_type</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/bean&gt;</span>
  <span class="tag">&lt;service</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">custom_type</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ogc.catalog.common.converter.factory.FeatureConverterFactory</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/blueprint&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_json_definition_files"><a class="anchor" href="#_json_definition_files"></a><a class="link" href="#_json_definition_files">1.27. JSON Definition Files</a></h3>
<div class="paragraph">
<p>DDF supports adding new attribute types, metacard types, validators, and more using json-formatted definition files.</p>
</div>
<div class="paragraph">
<p>The following may be defined in a JSON definition file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_attribute_type_definition_file">Attribute Types</a></p>
</li>
<li>
<p><a href="#_metacard_type_definition_file">Metacard Types</a></p>
</li>
<li>
<p><a href="#_global_attribute_validators_file">Global Attribute Validators</a></p>
</li>
<li>
<p><a href="#_metacard_validator_definition">Metacard Validators</a></p>
</li>
<li>
<p><a href="#_default_attribute_values">Default Attribute Values</a></p>
</li>
<li>
<p><a href="#_attribute_injection_definition">Attribute Injections</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_definition_file_format"><a class="anchor" href="#_definition_file_format"></a><a class="link" href="#_definition_file_format">1.27.1. Definition File Format</a></h4>
<div class="paragraph">
<p>A definition file follows the JSON format as specified in <a href="http://www.ecma-international.org/publications/standards/Ecma-404.htm">ECMA-404</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="JSON Definition Files"></span>.
All definition files must be valid JSON in order to be parsed.</p>
</div>
<div class="paragraph">
<p>A single definition file may define as many of the types as needed.
This means that types can be defined across multiple files for grouping or clarity.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deploying_definition_files"><a class="anchor" href="#_deploying_definition_files"></a><a class="link" href="#_deploying_definition_files">1.27.2. Deploying Definition Files</a></h4>
<div class="paragraph">
<p>The file must have a <code>.json</code> extension in order to be picked up by the deployer.
Once the definition file is ready to be deployed, put the definition file <code>&lt;filename&gt;.json</code> into the <code>etc/definitions</code> folder.</p>
</div>
<div class="paragraph">
<p>Definition files can be added, updated, and/or deleted in the <code>etc/definitions</code> folder.
The changes are applied dynamically and no restart is required.</p>
</div>
<div class="paragraph">
<p>If a definition file is removed from the <code>etc/definitions</code> folder, the changes that were applied by that file will be undone.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developing_subscriptions"><a class="anchor" href="#_developing_subscriptions"></a><a class="link" href="#_developing_subscriptions">1.28. Developing Subscriptions</a></h3>
<div class="paragraph">
<p>Subscriptions represent "standing queries" in the Catalog.
Like a query, subscriptions are based on the OGC Filter specification.</p>
</div>
<div class="sect3">
<h4 id="_subscription_lifecycle"><a class="anchor" href="#_subscription_lifecycle"></a><a class="link" href="#_subscription_lifecycle">1.28.1. Subscription Lifecycle</a></h4>
<div class="paragraph">
<p>A Subscription itself is a series of events during which various plugins or transformers can be called to process the subscription.</p>
</div>
<div class="sect4">
<h5 id="_creation"><a class="anchor" href="#_creation"></a><a class="link" href="#_creation">1.28.1.1. Creation</a></h5>
<div class="ulist">
<ul>
<li>
<p>Subscriptions are created directly with the <a href="architecture.html#_event_processor">Event Processor</a> or declaratively through use of the Whiteboard Design Pattern.</p>
</li>
<li>
<p>The Event Processor will invoke each Pre-Subscription Plugin and, if the subscription is not rejected, the subscription will be activated.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_evaluation"><a class="anchor" href="#_evaluation"></a><a class="link" href="#_evaluation">1.28.1.2. Evaluation</a></h5>
<div class="ulist">
<ul>
<li>
<p>When a metacard matching the subscription is created, updated, or deleted in any Source, each Pre-Delivery Plugin will be invoked.</p>
</li>
<li>
<p>If the delivery is not rejected, the associated Delivery Method callback will be invoked.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_update_evaluation"><a class="anchor" href="#_update_evaluation"></a><a class="link" href="#_update_evaluation">1.28.1.3. Update Evaluation</a></h5>
<div class="paragraph">
<p>Notably, the Catalog allows event evaluation on both the previous value (if available) and new value of a Metacard when an update occurs.</p>
</div>
</div>
<div class="sect4">
<h5 id="_durability"><a class="anchor" href="#_durability"></a><a class="link" href="#_durability">1.28.1.4. Durability</a></h5>
<div class="paragraph">
<p>Subscription durability is not provided by the Event Processor.
Thus, all subscriptions are transient and will not be recreated in the event of a system restart.
It is the responsibility of Endpoints using subscriptions to persist and re-establish the subscription on startup.
This decision was made for the sake of simplicity, flexibility, and the inability of the Event Processor to recreate a fully-configured Delivery Method without being overly restrictive.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Subscriptions are not persisted by the Catalog itself.</strong><br>
Subscriptions must be explicitly persisted by an endpoint and are not persisted by the Catalog.
The Catalog Framework, or more specifically the Event Processor itself, does not persist subscriptions.
Certain endpoints, however, can persist the subscriptions on their own and recreate them on system startup.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_subscription"><a class="anchor" href="#_creating_a_subscription"></a><a class="link" href="#_creating_a_subscription">1.28.2. Creating a Subscription</a></h4>
<div class="paragraph">
<p>Currently, the Catalog reference implementation does not contain a subscription endpoint.
Therefore, an endpoint that exposes a web service interface to create, update, and delete subscriptions would provide a client&#8217;s subscription filtering criteria to be used by Catalog&#8217;s Event Processor to determine which events are of interest to the client.
The endpoint client also provides the callback URL of the event consumer to be called when an event matching the subscription&#8217;s criteria is found.
This callback to the event consumer is made by a Delivery Method implementation that the client provides when the subscription is created. 
Whenever an event occurs in the Catalog matching the subscription, the Delivery Method implementation will be called by the Event Processor. 
The Delivery Method will, in turn, send the event notification out to the event consumer. 
As part of the subscription creation process, the Catalog verifies that the event consumer at the specified callback URL is available to receive callbacks.
Therefore, the client must ensure the event consumer is running prior to creating the subscription.
The Catalog completes the subscription creation by executing any pre-subscription Catalog Plugins, and then registering the subscription with the OSGi Service Registry.
The Catalog does not persist subscriptions by default.</p>
</div>
<div class="sect4">
<h5 id="_event_processing_and_notification"><a class="anchor" href="#_event_processing_and_notification"></a><a class="link" href="#_event_processing_and_notification">1.28.2.1. Event Processing and Notification</a></h5>
<div class="paragraph">
<p>If an event matches a subscription&#8217;s criteria, any pre-delivery plugins that are installed are invoked, the subscription&#8217;s <code>DeliveryMethod</code> is retrieved, and its operation corresponding to the type of ingest event is invoked. 
For example, the <code>DeliveryMethod</code> <code>created()</code> function is called when a metacard is created.
The <code>DeliveryMethod</code> operations subsequently invoke the corresponding operation in the client&#8217;s event consumer service, which is specified by the callback URL provided when the <code>DeliveryMethod</code> was created.
An internal subscription tracker monitors the OSGi registry, looking for subscriptions to be added (or deleted).
When it detects a subscription being added, it informs the Event Processor, which sets up the subscription&#8217;s filtering and is responsible for posting event notifications to the subscriber when events satisfying their criteria are met.</p>
</div>
<div class="paragraph">
<p>The Standard Event Processor is an implementation of the Event Processor and provides the ability to create/delete subscriptions.
Events are generated by the CatalogFramework as metacards are created/updated/deleted and the Standard Event Processor is called since it is also a Post-Ingest Plugin.
The Standard Event Processor checks each event against each subscription&#8217;s criteria.</p>
</div>
<div class="paragraph">
<p>When an event matches a subscription&#8217;s criteria the Standard Event Processor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>invokes each pre-delivery plugin on the metacard in the event.</p>
</li>
<li>
<p>invokes the <code>DeliveryMethod</code> operation corresponding to the type of event being processed, e.g., <code>created()</code> operation for the creation of a metacard.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Available Event Processor</div>
<ul>
<li>
<p><a href="architecture.html#_event_processor">Standard Event Processor</a></p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_using_ddf_implementation"><a class="anchor" href="#_using_ddf_implementation"></a><a class="link" href="#_using_ddf_implementation">1.28.2.1.1. Using DDF Implementation</a></h6>
<div class="paragraph">
<p>If applicable, the implementation of <code>Subscription</code> that comes with DDF should be used.
It is available at <code>ddf.catalog.event.impl.SubscriptionImpl</code> and offers a constructor that takes in all of the necessary objects.
Specifically, all that is needed is a <code>Filter</code>, <code>DeliveryMethod</code>, <code>Set&lt;String&gt;</code> of source IDs, and a <code>boolean</code> for enterprise.</p>
</div>
<div class="paragraph">
<p>The following is an example code stub showing how to create a new instance of Subscription using the DDF implementation. </p>
</div>
<div class="listingblock">
<div class="title">Creating a Subscription</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="comment">// Create a new filter using an imported FilterBuilder</span>
<span class="predefined-type">Filter</span> filter = filterBuilder.attribute(Metacard.ANY_TEXT).like().text(<span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span>);
<span class="error"> </span>
<span class="comment">// Create a implementation of DeliveryMethod</span>
DeliveryMethod deliveryMethod = <span class="keyword">new</span> MyCustomDeliveryMethod();
<span class="error"> </span>
<span class="comment">// Create a set of source ids</span>
<span class="comment">// This set is empty as the subscription is not specific to any sources</span>
<span class="predefined-type">Set</span>&lt;<span class="predefined-type">String</span>&gt; sourceIds = <span class="keyword">new</span> <span class="predefined-type">HashSet</span>&lt;<span class="predefined-type">String</span>&gt;();
<span class="error"> </span>
<span class="comment">// Set the isEnterprise boolean value</span>
<span class="comment">// This subscription example should notifications from all sources (not just local)</span>
<span class="type">boolean</span> isEnterprise = <span class="predefined-constant">true</span>;

Subscription subscription = <span class="keyword">new</span> SubscriptionImpl(filter, deliveryMethod, sourceIds,isEnterprise);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_delivery_method"><a class="anchor" href="#_delivery_method"></a><a class="link" href="#_delivery_method">1.28.2.2. Delivery Method</a></h5>
<div class="paragraph">
<p>A Delivery Method provides the operation (created, updated, deleted) for how an event&#8217;s metacard can be delivered.</p>
</div>
<div class="paragraph">
<p>A Delivery Method is associated with a subscription and contains the callback URL of the event consumer to be notified of events.
The Delivery Method encapsulates the operations to be invoked by the Event Processor when an event matches the criteria for the subscription.
The Delivery Method&#8217;s operations are responsible for invoking the corresponding operations on the event consumer associated with the callback URL.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contributing_to_documentation"><a class="anchor" href="#_contributing_to_documentation"></a><a class="link" href="#_contributing_to_documentation">1.29. Contributing to Documentation</a></h3>
<div class="paragraph">
<p>DDF documentation is included in the source code, so it is edited and maintained in much the same way.</p>
</div>
<div class="paragraph">
<p><code>src/main/resources</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 19. Documentation Directory Structure and Contents</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Directory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contents</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Asciidoctor-formatted files containing documentation contents and the header information needed to organize them.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>images</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Screenshots, icons, and other image files used in documentation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>templates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template files used to compile the documentation for display.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jbake.properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Properties file defining content types and other parameters.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_editing_existing_documentation"><a class="anchor" href="#_editing_existing_documentation"></a><a class="link" href="#_editing_existing_documentation">1.29.1. Editing Existing Documentation</a></h4>
<div class="paragraph">
<p>Update existing content when code behavior changes, new capabilities are added to features, or the configuration process changes.
Content is organized within the <code>content</code> directory in sub directories according to the audience and purpose for each document in the documentation library.
Use this list to determine placement of new content.</p>
</div>
<div class="dlist">
<div class="title">Documentation Sections</div>
<dl>
<dt class="hdlist1">Introduction/Core Concepts</dt>
<dd>
<p>This section is intended to be a high-level, executive summary of the features and capabilities of DDF. Content here should be written at a non-technical level.</p>
</dd>
<dt class="hdlist1">Quick Start</dt>
<dd>
<p>This section is intended for getting set up with a test, demonstration, or trial instance of DDF. This is the place for non-production shortcuts or workarounds that would not be used in a secured, hardened installation.</p>
</dd>
<dt class="hdlist1">Managing</dt>
<dd>
<p>The managing section covers "how-to" instructions to be used to install, configure, and maintain an instance of DDF in a production environment. This content should be aimed at system administrators. Security hardening should be integrated into these sections.</p>
</dd>
<dt class="hdlist1">Using</dt>
<dd>
<p>This section is primarily aimed at the final end users who will be performing tasks with DDF. This content should guide users through common tasks and user interfaces.</p>
</dd>
<dt class="hdlist1">Integrating</dt>
<dd>
<p>This section guides developers building other projects looking to connect to new or existing instances of DDF.</p>
</dd>
<dt class="hdlist1">Developing</dt>
<dd>
<p>This section provides guidance and best practices on developing custom implementations of DDF components, especially ones that may be contributed into the code baseline.</p>
</dd>
<dt class="hdlist1">Architecture</dt>
<dd>
<p>This section is a detailed description of the architectural design of DDF and how components work together.</p>
</dd>
<dt class="hdlist1">Reference</dt>
<dd>
<p>This section is a comprehensive list of features and possible configurations.</p>
</dd>
<dt class="hdlist1">Metadata Reference</dt>
<dd>
<p>This section details how metadata is extracted and normalized by DDF.</p>
</dd>
<dt class="hdlist1">Documentation</dt>
<dd>
<p>This is a collection of all of the individual documentation pages in one html or pdf file.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>See the <a href="https://codice.atlassian.net/wiki/spaces/DDF/pages/6291516/Documentation+Style+Guide">style guide</a> for more guidance on stylistic and formatting concerns.</p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_new_documentation_content"><a class="anchor" href="#_adding_new_documentation_content"></a><a class="link" href="#_adding_new_documentation_content">1.29.2. Adding New Documentation Content</a></h4>
<div class="paragraph">
<p>If creating a new section is required, there are some minimal requirements for a new <code>.adoc</code> file.</p>
</div>
<div class="paragraph">
<div class="title">Header content</div>
<p>The templates scan the header information to place it into the correct place within the documentation.
Different sections have different headers required, but some common attributes are always required.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>type</code>: roughly maps to the section or subSection of the documentation.</p>
</li>
<li>
<p><code>title</code>: title of the section or subsection contained in the file.</p>
</li>
<li>
<p><code>status</code>: set to <code>published</code> to include within the documentation, set to <code>draft</code> to hide a work-in-progress section.</p>
</li>
<li>
<p><code>order</code>: used in sections where order needs to be enforced.</p>
</li>
<li>
<p><code>summary</code>: brief summary of section contents. Some, but not all, summaries are included by templates.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_new_documentation_template"><a class="anchor" href="#_creating_a_new_documentation_template"></a><a class="link" href="#_creating_a_new_documentation_template">1.29.3. Creating a New Documentation Template</a></h4>
<div class="paragraph">
<p>To create a new, standalone documentation page, create a new template in the <code>templates</code> directory.
Optionally, this template can <code>include</code> some of the internal templates in the <code>templates/build</code> directory, but this is not required.</p>
</div>
<div class="paragraph">
<p>For guidance on using the freemarker syntax, see the <a href="https://freemarker.apache.org/docs/ref.html">Freemarker documentation</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Contributing to Documentation"></span>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_extending_documentation_in_downstream_distributions"><a class="anchor" href="#_extending_documentation_in_downstream_distributions"></a><a class="link" href="#_extending_documentation_in_downstream_distributions">1.29.4. Extending Documentation in Downstream Distributions</a></h4>
<div class="paragraph">
<p>By mimicking the build and directory structure of the documentation, downstream projects are able to leverage the existing documentation and insert content before and after sections of the DDF documentation.</p>
</div>
<div class="listingblock">
<div class="title">Documentation Module Directory Structure</div>
<div class="content">
<pre class="CodeRay highlight"><code>-docs
  -src
    -main
      -resources
        -content
        -images
        -templates</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>content</code></dt>
<dd>
<p>Contains the .adoc files that make up the content.
Sub-directories are organized according to the documents that make up the main library.</p>
</dd>
<dt class="hdlist1"><code>images</code></dt>
<dd>
<p>any pre-existing images, such as screenshots, to be included in the documentation.</p>
</dd>
<dt class="hdlist1"><code>templates</code></dt>
<dd>
<p>template files used to create documentation artifacts.
A <code>build</code> sub-directory holds the templates that will not be standalone documents to render specific sections.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_development_guidelines"><a class="anchor" href="#_development_guidelines"></a><a class="link" href="#_development_guidelines">2. Development Guidelines</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_contributing"><a class="anchor" href="#_contributing"></a><a class="link" href="#_contributing">2.1. Contributing</a></h3>
<div class="paragraph">
<p>The Distributed Data Framework is free and open-source software offered under the GNU Lesser General Public License.
The DDF is managed under the guidance of the <a href="http://codice.org">Codice Foundation</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Contributing"></span>.
Contributions are welcomed and encouraged.
Please visit the <a href="https://codice.atlassian.net/wiki/display/DDF/Guidelines%2C+Standards+and+Best+Practices">Codice DDF Contributor Guidelines</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Contributing"></span> and the <a href="https://github.com/codice/ddf">DDF source code repository</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="Contributing"></span> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_osgi_basics"><a class="anchor" href="#_osgi_basics"></a><a class="link" href="#_osgi_basics">2.2. OSGi Basics</a></h3>
<div class="paragraph">
<p>DDF runs on top of an OSGi framework, a Java virtual machine (JVM), several choices of operating systems, and the physical hardware infrastructure.
The items within the dotted line represent the standard DDF components.</p>
</div>
<div class="paragraph">
<p>DDF is a customized and branded distribution of <a href="http://karaf.apache.org/">Apache Karaf</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="OSGi Basics"></span>.
DDF could also be considered to be a more lightweight OSGi distribution, as compared to Apache ServiceMix, FUSE ESB, or Talend ESB, all of which are also built upon Apache Karaf.
Similar to its peers, DDF incorporates (<a href="https://tools.codice.org/#DDFArchitecture-AdditionalUpstreamDependencies">additional upstream dependencies</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="OSGi Basics"></span>).</p>
</div>
<div class="paragraph">
<p>The DDF framework hosts DDF applications, which are extensible by adding components via OSGi.
The best example of this is the DDF Catalog (API), which offers extensibility via several types of Catalog Components.
The DDF Catalog API serves as the foundation for several applications and resides in the applications tier.</p>
</div>
<div class="paragraph">
<p>The Catalog Components consist of <a href="documentation.html#_endpoints">Endpoints</a>, <a href="architecture.html#_types_of_plugins">Plugins</a>, <a href="#_catalog_framework_reference">Catalog Frameworks</a>, <a href="introduction.html#_introduction_to_federation_and_sources">Sources</a>, and <a href="managing.html#_catalog_providers">Catalog Providers</a>.
Customized components can be added to DDF.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Capability</dt>
<dd>
<p>A general term used to refer to an ability of the system.</p>
</dd>
<dt class="hdlist1">Component</dt>
<dd>
<p>Represents a portion of an Application that can be extended.</p>
</dd>
<dt class="hdlist1">Bundle</dt>
<dd>
<p>Java Archives (JARs) with special OSGi manifest entries.</p>
</dd>
<dt class="hdlist1">Feature</dt>
<dd>
<p>One or more bundles that form an installable unit; defined by Apache Karaf but portable to other OSGi containers.</p>
</dd>
<dt class="hdlist1">Application</dt>
<dd>
<p>A JSON file defining a collection of bundles with configurations to be displayed in the Admin Console.</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_packaging_capabilities_as_bundles"><a class="anchor" href="#_packaging_capabilities_as_bundles"></a><a class="link" href="#_packaging_capabilities_as_bundles">2.2.1. Packaging Capabilities as Bundles</a></h4>
<div class="paragraph">
<p>Services and code are physically deployed to DDF using bundles.
The bundles within DDF are created using the maven bundle plug-in.
Bundles are Java JAR files that have additional metadata in the <code>MANIFEST.MF</code> that is relevant to an OSGi container.</p>
</div>
<div class="paragraph">
<p>The best resource for learning about the structure and headers in the manifest definition is in section 3.6 of the <a href="https://osgi.org/download/r5/osgi.core-5.0.0.pdf">OSGi Core Specification</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="OSGi Basics"></span>.
The bundles within DDF are created using the <a href="http://felix.apache.org/documentation/subprojects/apache-felix-maven-bundle-plugin-bnd.html">maven bundle plug-in</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="OSGi Basics"></span>, which uses the <a href="http://bnd.bndtools.org/">BND tool</a> <span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gsPFTAUZ5qyewAAAbNJREFUKM9lkj1ok1EUhp97cxtj0FIrOgQtGHUyCFJ/QBFxETsI/oGLiJMgKCrdC0VwFje3VoSCkkWKqGCQCkYaiXSIbWOrVjCR4A8mNslHvtzXoW20+MJZDjyHc973GMnjPVhrWCWFfJwr6ns1YP26OMY6Elu2GgcGa/lfCslnMxQWfpJ7NMT4G5gofJADmMm/1Oj9hwQ2Bq1F3IYkN65f5syFK6a/8Epvn4xBL3jvca3qFw0PHmP/xXvs6dtIvV7HRLvZ1BM3pdmstqUOkZnIcuDBLX41AlgsTevsqRMq1duSxEqVi5MCNP66KEmM3h5WdnpB1MuzOndyQHPfqh2g9D4nQOkXU5JEEDRphSG+7bECpL+3fp2fUmLnPsae5Th9ZLeZmXyum3fSikQiGAuuY8oyVG+EPM5kGTi61wDUftfIv6sQAl0sA8514VwEgGSq3yQB+TbGRlgTW8vmnhgrKVmMqFTKhF6rYjB2aUAYLFKpNTt9F+9NmOMHd+na1UEOp/rUaAYYYxCGWNTyND3C+aGRpVUkjCQa1R+X5j99vhvK8O+DyHui8W52bE+aqDNI4g+PWNi/V5c55QAAAABJRU5ErkJggg==" alt="This link is outside the DDF documentation" title="OSGi Basics"></span>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="title">Alternative Bundle Creation Methods</div>
<div class="paragraph">
<p>Using Maven is not necessary to create bundles.
Many alternative tools exist, and OSGi manifest files can also be created by hand, although hand-editing should be avoided by most developers.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_creating_a_bundle"><a class="anchor" href="#_creating_a_bundle"></a><a class="link" href="#_creating_a_bundle">2.2.1.1. Creating a Bundle</a></h5>
<div class="sect5">
<h6 id="_bundle_development_recommendations"><a class="anchor" href="#_bundle_development_recommendations"></a><a class="link" href="#_bundle_development_recommendations">2.2.1.1.1. Bundle Development Recommendations</a></h6>
<div class="dlist">
<dl>
<dt class="hdlist1">Avoid creating bundles by hand or editing a manifest file</dt>
<dd>
<p>Many tools exist for creating bundles, notably the Maven Bundle plugin, which handle the details of OSGi configuration and automate the bundling process including generation of the manifest file.</p>
</dd>
<dt class="hdlist1">Always make a distinction on which imported packages are <code>optional</code> or <code>required</code></dt>
<dd>
<p>Requiring every package when not necessary can cause an unnecessary dependency ripple effect among bundles.</p>
</dd>
<dt class="hdlist1">Embedding is an implementation detail</dt>
<dd>
<p>Using the <code>Embed-Dependency</code> instruction provided by the <code>maven-bundle-plugin</code> will insert the specified jar(s) into the target archive and add them to the <code>Bundle-ClassPath</code>. These jars and their contained packages/classes are not for public consumption; they are for the internal implementation of this service implementation only.</p>
</dd>
<dt class="hdlist1">Bundles should never be embedded</dt>
<dd>
<p>Bundles expose service implementations; they do not provide arbitrary classes to be used by other bundles.</p>
</dd>
<dt class="hdlist1">Bundles should expose service implementations</dt>
<dd>
<p>This is the corollary to the previous rule. Bundles should not be created when arbitrary concrete classes are being extracted to a library. In that case, a library/jar is the appropriate module packaging type.</p>
</dd>
<dt class="hdlist1">Bundles should generally <em>only</em> export service packages</dt>
<dd>
<p>If there are packages internal to a bundle that comprise its implementation but not its public manifestation of the API, they should be excluded from export and kept as private packages.</p>
</dd>
<dt class="hdlist1">Concrete objects that are not loaded by the root classloader should not be passed in or out of a bundle</dt>
<dd>
<p>This is a general rule with some exceptions (JAXB generated classes being the most prominent example). Where complex objects need to be passed in or out of a service method, an interface should be defined in the API bundle.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Bundles separate contract from implementation and allow for modularized development and deployment of functionality.
For that to be effective, they must be defined and used correctly so inadvertent coupling does not occur.
Good bundle definition and usage leads to a more flexible environment.</p>
</div>
</div>
<div class="sect5">
<h6 id="_maven_bundle_plugin"><a class="anchor" href="#_maven_bundle_plugin"></a><a class="link" href="#_maven_bundle_plugin">2.2.1.1.2. Maven Bundle Plugin</a></h6>
<div class="paragraph">
<p>Below is a code snippet from a Maven <code>pom.xml</code> for creating an OSGi Bundle using the Maven Bundle plugin.</p>
</div>
<div class="listingblock">
<div class="title">Maven <code>pom.xml</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td>
  <td class="code"><pre>...
<span class="tag">&lt;packaging&gt;</span>bundle<span class="tag">&lt;/packaging&gt;</span>
...
<span class="tag">&lt;build&gt;</span>
...
  <span class="tag">&lt;plugin&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.apache.felix<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>maven-bundle-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;configuration&gt;</span>
      <span class="tag">&lt;instructions&gt;</span>
        <span class="tag">&lt;Bundle-Name&gt;</span>${project.name}<span class="tag">&lt;/Bundle-Name&gt;</span>
        <span class="tag">&lt;Export-Package</span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;Bundle-SymbolicName&gt;</span>${project.groupId}.${project.artifactId}<span class="tag">&lt;/Bundle-SymbolicName&gt;</span>
        <span class="tag">&lt;Import-Package&gt;</span>
          ddf.catalog,
          ddf.catalog.*
        <span class="tag">&lt;/Import-Package&gt;</span>
      <span class="tag">&lt;/instructions&gt;</span>
    <span class="tag">&lt;/configuration&gt;</span>
  <span class="tag">&lt;/plugin&gt;</span>
...
<span class="tag">&lt;/build&gt;</span>
...</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_third_party_and_utility_bundles"><a class="anchor" href="#_third_party_and_utility_bundles"></a><a class="link" href="#_third_party_and_utility_bundles">2.2.1.2. Third Party and Utility Bundles</a></h5>
<div class="paragraph">
<p>It is recommended to avoid building directly on included third party and utility bundles.
These components do provide utility and reuse potential; however, they may be upgraded or even replaced at anytime as bug fixes and new capabilities dictate.
For example, web services may be built using CXF.
However, the distributions frequently upgrade CXF between releases to take advantage of new features.
If building on these components, be aware of the version upgrades with each distribution release.</p>
</div>
<div class="paragraph">
<p>Instead, component developers should package and deliver their own dependencies to ensure future compatibility.
For example, if re-using a bundle, the specific bundle version that you are depending on should be included in your packaged release, and the proper versions should be referenced in your bundle(s).</p>
</div>
</div>
<div class="sect4">
<h5 id="_deploying_a_bundle"><a class="anchor" href="#_deploying_a_bundle"></a><a class="link" href="#_deploying_a_bundle">2.2.1.3. Deploying a Bundle</a></h5>
<div class="paragraph">
<p>A bundle is typically installed in one of two ways:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Installed as a feature</p>
</li>
<li>
<p>Hot deployed in the <code>/deploy</code> directory</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The fastest way to deploy a created bundle during development is to copy it to the <code>/deploy</code> directory of a running DDF.
This directory checks for new bundles and deploys them immediately.
According to Karaf documentation, "Karaf supports hot deployment of OSGi bundles by monitoring JAR files inside the <code>[home]/deploy</code> directory.
Each time a JAR is copied in this folder, it will be installed inside the runtime.
It can be updated or deleted and changes will be handled automatically.
In addition, Karaf also supports exploded bundles and custom deployers (Blueprint and Spring DM are included by default)."
Once deployed, the bundle should come up in the Active state, if all of the dependencies were properly met.
When this occurs, the service is available to be used.</p>
</div>
</div>
<div class="sect4">
<h5 id="_verifying_bundle_state"><a class="anchor" href="#_verifying_bundle_state"></a><a class="link" href="#_verifying_bundle_state">2.2.1.4. Verifying Bundle State</a></h5>
<div class="paragraph">
<p>To verify if a bundle is deployed and running, go to the running command console and view the status.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Execute the <code>list</code> command.</p>
</li>
<li>
<p>If the name of the bundle is known, the <code>list</code> command can be piped to the <code>grep</code> command to quickly find the bundle.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The example below shows how to verify if a Client is deployed and running.</p>
</div>
<div class="listingblock">
<div class="title">Verifying with grep</div>
<div class="content">
<pre>ddf@local&gt;list | grep -i example
[ 162] [Active    ] [       ] [  ] [ 80] DDF :: Registry :: example Client (2.0.0)</pre>
</div>
</div>
<div class="paragraph">
<p>The state is <code>Active</code>, indicating that the bundle is ready for program execution.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_high_availability_guidance"><a class="anchor" href="#_high_availability_guidance"></a><a class="link" href="#_high_availability_guidance">2.3. High Availability Guidance</a></h3>
<div class="paragraph">
<p>Capabilities that need to function in a Highly Available Cluster should have one of the two below properties.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Stateless</dt>
<dd>
<p>Stateless capabilities will function in an Highly Available Cluster because no synchronization between DDF nodes is necessary.</p>
</dd>
<dt class="hdlist1">Common storage</dt>
<dd>
<p>If a capability must store data or share state with another node, then the data or shared state must be accessible to all nodes in the Highly Available Cluster.
For example, the Catalog&#8217;s storage provider must be accessible to all DDF nodes.</p>
</dd>
</dl>
</div>
<script type="text/javascript" src="../../webjars/iframe-resizer/2.6.2/js/iframeResizer.contentWindow.min.js"></script>
<script type="text/javascript" >
"use strict";

function makeTocExpandable() {
	var level = 1;

	while (level < 6) {
	const tocHeading = document.querySelectorAll(".sectlevel" + level + ">li");
		for (var i = tocHeading.length - 1; i >= 0; i--) {
			const childLevels = tocHeading[i].querySelector("ul li");
			if (childLevels) {
				tocHeading[i].innerHTML ='<a class="expandable">+ </a>' + tocHeading[i].innerHTML + '';
			}
		}
		const levelUp = level + 1
		const higherlevels = document.querySelectorAll(".sectlevel" + levelUp );

		for (var i = higherlevels.length - 1; i >= 0; i--) {
			higherlevels[i].classList.add("collapsed");
		}
		level++;
	}

}

function expandList(section) {
	const currentSection = section.target.parentNode;

	currentSection.querySelector("ul").classList.remove("collapsed");
	currentSection.querySelector(".expandable").innerHTML = "- ";
	currentSection.querySelector(".expandable").removeEventListener("click", expandList);
	currentSection.querySelector(".expandable").classList.add("expanded");
	currentSection.querySelector(".expanded").classList.remove("expandable");
	currentSection.querySelector(".expanded").addEventListener("click", collapseList);
}

function collapseList(section) {
	const currentSection = section.target.parentNode;

	currentSection.querySelector("ul").classList.add("collapsed");
	currentSection.querySelector(".expanded").innerHTML = "+ ";
	currentSection.querySelector(".expanded").removeEventListener("click", collapseList);
	currentSection.querySelector(".expanded").classList.add("expandable");
	currentSection.querySelector(".expandable").classList.remove("expanded");
	currentSection.querySelector(".expandable").addEventListener("click", expandList);
}

function addTocListeners() {
	const expandableSections = document.querySelectorAll(".expandable")
	const expandedSections = document.querySelectorAll(".expanded")

	for (var i = expandableSections.length - 1; i >= 0; i--) {
		expandableSections[i].addEventListener("click", expandList);
	}
	for (var i = expandedSections.length - 1; i >= 0; i--) {
		expandedSections[i].addEventListener("click", collapseList);
	}
}

function wrapScrollElements(selector) {
  document.querySelectorAll( selector ).forEach( elem => {
    const div = document.createElement( 'div' );
    div.className = "scroll-wrapper";
    elem.parentElement.insertBefore(div, elem);
    div.appendChild(elem);
  });
}

document.onreadystatechange = () => {
	if (document.readyState === 'complete') {
	  // The page is fully loaded
		makeTocExpandable();
		addTocListeners();
	    wrapScrollElements('table.tableblock');
	    wrapScrollElements('.CodeRay');
	    wrapScrollElements('.admonitionblock');
	}
};
</script>
<style>
.collapsed {display: none;}
.scroll-wrapper {overflow-x: auto;}
</style>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Copyright (c) Codice Foundation. This work is licensed under a Creative Commons Attribution 4.0 International License (http://creativecommons.org/licenses/by/4.0). This page last updated: 2021-09-22 16:44:56 UTC
</div>
</div>
</body>
</html>